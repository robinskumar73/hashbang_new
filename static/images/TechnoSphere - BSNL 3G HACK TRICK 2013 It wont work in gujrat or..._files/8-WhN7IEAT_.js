/*!CK:799150891!*//*1406517842,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["\/weLr"]); }

__d("TagExpansionButtonConfig",[],function(a,b,c,d,e,f){e.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("InstanceProxy",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$InstanceProxy0=h;}g.prototype.getInstance=function(){"use strict";return this.$InstanceProxy0;};e.exports=g;},null);
__d("XAdPreferencesInterestsWriteControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b('XControllerURIBuilder').create("\/ads\/preferences\/edit_interests\/",{ad_id:{type:"Int",required:true},action:{type:"Enum",required:true},type:{type:"Enum",required:true},fbids:{type:"IntVector",required:true}});},null);
__d("XAdPreferencesNUXControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b('XControllerURIBuilder').create("\/ads\/preferences\/nux\/",{type:{type:"String",required:true}});},null);
__d("XAdsPreferencesFeedbackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b('XControllerURIBuilder').create("\/ads\/preferences\/feeedback\/",{ad_id:{type:"Int",required:true},favorite:{type:"Enum",required:true}});},null);
__d("AdsPrefs",["AsyncRequest","CSS","DOM","Event","tidyEvent","cx","csx","XAdPreferencesInterestsWriteControllerURIBuilder","XAdPreferencesNUXControllerURIBuilder","XAdsPreferencesFeedbackControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(u,v){var w=i.scry(u.parentNode,"div._g1j")[0],x=h.hasClass(w,"_2zny")?'add':'del',y=new n().setInt('ad_id',v).setEnum('action',x).setEnum('type',w.getAttribute('data-type')).setIntVector('fbids',[w.getAttribute('data-fbid')]).getURI();new g(y).send();h.toggleClass(w,"_2zny");return w;}function r(u,v){h.toggleClass(u,"hidden_elem");var w=h.hasClass(u,"hidden_elem")?'ad_useful':'ad_neutral',x=new p().setInt('ad_id',v).setEnum('favorite',w).getURI(),y=new g(x);y.send();}function s(){var u=new o().setString('type','interest_nux_ts').getURI();new g(u).send();}var t={initRHCFeedback:function(u,v,w){k(j.listen(v,'click',function(x){r(w,u);x.kill();}));},initSuggestions:function(u,v,w){k(j.listen(v,'click',function(x){q(x.target,u);}));if(w)k(j.listen(w,'click',function(){i.scry(v,'li').forEach(function(x){h.show(x);});h.hide(w);}));},initMatchingInterests:function(u,v,w){var x=i.scry(v,"div._g1j")[0];if(x){h.removeClass(x,"_2hg");}else return;k(j.listen(v,'click',function(y){q(x,u);var z=i.scry(v,"span._58yk")[0];if(h.hasClass(x,"_2zny")){h.removeClass(z,'hidden_elem');if(w){w.subscribe('hide',s);w.setContext(x);w.show();w=null;}}else h.addClass(z,'hidden_elem');}));},initExpandable:function(u){k(j.listen(u,'click',function(v){var w=i.scry(u,"div._2fdq")[0],x=i.scry(u,"._4r43")[0],y=i.scry(u,"._1uhj")[0];h.toggleClass(x,'hidden_elem');h.toggleClass(y,'hidden_elem');h.toggleClass(w,'hidden_elem');}));},toggleFavorite:function(u){var v=i.find(u.getRoot(),'img');r(v,u.getLabel());}};e.exports=t;},null);
__d("EntstreamFeedObject",["Parent","cx"],function(a,b,c,d,e,f,g,h){var i={getRoot:function(j){return g.byClass(j,"_5jmm");}};e.exports=i;},null);
__d("EntstreamFeedObjectFollowup",["CSS","DOM","EntstreamFeedObject","Event","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={getFollowup:function(o){var p=h.scry(o,"._5lum");if(!p.length)p=h.scry(o.parentNode,"._5lum");return p?p[0]:null;},initCloseButton:function(o){var p=h.find(o,"._5xsl"),q=j.listen(p,'click',function(){q.remove();h.remove(o);});o.listener=q;},stopListenCloseButton:function(o){if(o.listener)o.listener.remove();},addFollowup:function(o,p,q){var r=g.hasClass(o,"_5pat"),s=h.create('div',{className:"_5lum"});if(r){g.addClass(s,"_5pau");}else g.addClass(s,"_1f84");if(q)g.addClass(s,q);if(p){h.appendContent(s,p);this.initCloseButton(s);h.insertBefore(o,s);}else{var t=n.getFollowup(o);if(t)this.removeFollowup(t);h.prependContent(o,s);}return s;},removeFollowup:function(o){var p=n.getFollowup(o);this.stopListenCloseButton(p);h.remove(p);},appendToFollowup:function(o,p){var q=i.getRoot(m(o)),r=n.getFollowup(q);h.appendContent(r,p);},getFollowupMessage:function(o){var p=h.find(o,"._1f86");return p;},replaceFollowupMessage:function(o,p){this.stopListenCloseButton(o);var q=n.getFollowupMessage(o);h.replace(q,p);this.initCloseButton(o);}};e.exports=n;},null);
__d("EntstreamFeedObjectFollow",["EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","Parent","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={toggleFollow:function(n,o,p){var q=n.getValue()=='follow_post'?p.follow_post:p.unfollow_post,r=g.getRoot(l(o)),s=h.getFollowup(r);if(s){h.replaceFollowupMessage(s,q);}else{s=h.addFollowup(r,q,"_521o")||h.getFollowup(r);i.listen(s,'click',function(event){var t=event.getTarget(),u="_1f89";if(j.byClass(t,u)){m.toggleFollow(n,o,p);n.toggleMenuItem();}});}}};e.exports=m;},null);
__d("EntstreamFeedObjectHide",["Event","CSS","EntstreamFeedObject","EntstreamFeedObjectFollowup","Focus","TabbableElements","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={hide:function(p,q){var r=i.getRoot(n(p));j.addFollowup(r,q);h.addClass(r,"_i6m");o.setFocus(r);},registerUnhide:function(p,q){g.listen(p,'click',function(){if(q)q.send();o.unhide(i.getRoot(p));});},setFocus:function(p){var q=l.find(p);if(q&&q[0])k.setWithoutOutline(q[0]);},unhide:function(p){j.removeFollowup(p);h.removeClass(p,"_i6m");o.setFocus(p);}};e.exports=o;},null);
__d("YouTube",["CSS","DOM","DOMQuery","Event","Keys","LitestandStoryInsertionStatus","SubscriptionsHandler","UserAgent","Focus","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(s,t,u){"use strict";var v=new m();v.addSubscriptions(j.listen(s,'load',this.listening.bind(this)),l.registerBlocker(function(){return this.playerState===r.STATE_PLAYING;}.bind(this)));p(this,{iframe:s,autofocus:t,autoplay:u,playerState:r.STATE_UNSTARTED,muted:false,volume:100,currentTime:0,timer:null,handler:v});if(t)o.set(s);}r.prototype.id=function(){"use strict";return this.iframe.id;};r.prototype.post=function(s){"use strict";s.id=this.id();this.iframe.contentWindow.postMessage(JSON.stringify(s),'*');};r.prototype.listening=function(){"use strict";this.post({event:'listening'});clearTimeout(this.timer);this.timer=setTimeout(this.listening.bind(this),100);};r.prototype.update=function(s){"use strict";if(s.event=='initialDelivery'){clearTimeout(this.timer);if((n.webkit()||n.firefox())&&s.info&&s.info.debugText.match(/flashVersion/)){this.addAccessibleButtons();if(n.firefox())this.iframe.tabIndex=-1;}}if(s.info)['playerState','muted','volume','currentTime'].forEach(function(t){if(s.info.hasOwnProperty(t))this[t]=s.info[t];}.bind(this));};r.prototype.togglePlay=function(){"use strict";this.post({event:'command',func:(this.playerState==r.STATE_PLAYING)?'pauseVideo':'playVideo'});};r.prototype.toggleMute=function(){"use strict";this.post({event:'command',func:this.muted?'unMute':'mute'});};r.prototype.addAccessibleButtons=function(){"use strict";this.addAccessibleButton('Mute',"_505m",this.toggleMute.bind(this));this.addAccessibleButton('Play',"_505n",this.togglePlay.bind(this));};r.prototype.addAccessibleButton=function(s,t,u){"use strict";var v=h.create('button',{'class':t,tabindex:0},s);h.insertAfter(this.iframe,v);this.handler.addSubscriptions(j.listen(v,'click',u),j.listen(v,'mouseover',g.hide.bind(null,v)),j.listen(this.iframe,'mouseout',g.show.bind(null,v)),j.listen(v,'focus',function(){if(!this.autoplay&&this.playerState==r.STATE_UNSTARTED){this.post({event:'command',func:'playVideo'});this.post({event:'command',func:'pauseVideo'});}}.bind(this)),j.listen(v,'keydown',function(w){switch(w.keyCode){case k.UP:case k.DOWN:this.post({event:'command',func:'setVolume',args:[this.volume+((w.keyCode==k.UP)?10:-10)]});w.prevent();break;case k.RIGHT:case k.LEFT:this.post({event:'command',func:'seekTo',args:[this.currentTime+((w.keyCode==k.RIGHT)?10:-10)]});w.prevent();break;}}.bind(this)));return v;};r.prototype.destroy=function(){"use strict";this.handler.release();delete r.instances[this.id()];if(!Object.keys(r.instances).length)r.handler.remove();};r.register=function(s,t,u){"use strict";if(!window.postMessage)return;if(!Object.keys(r.instances).length)r.handler=j.listen(window,'message',function(w){try{var x=JSON.parse(w.data);if(r.instances[x.id])r.instances[x.id].update(x);}catch(w){}});var v=new r(i.find(s,'iframe'),t,u);r.instances[v.id()]=v;};p(r,{STATE_UNSTARTED:-1,STATE_PLAYING:1,instances:{},handler:null});e.exports=r;},null);
__d("EntstreamHomeFeedObjectHide",["AsyncRequest","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectHide","Event","TrackingNodes","YouTube","csx","cx","ge","tx","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t={stopVideo:function(u){var v=s(u),w=i.find(v,"^._5jmm"),x=i.scry(w,'iframe');for(var y=0;y<x.length;y++){var z=n.instances[i.getID(x[y])];if(z&&(z.playerState===n.STATE_PLAYING))z.togglePlay();}var aa=i.scry(w,'video');for(var ba=0;ba<aa.length;ba++)if(('paused' in aa[ba])&&!aa[ba].paused)if(typeof aa[ba].pause==='function')aa[ba].pause();},hide:function(u,v,w,x){t.stopVideo(u);var y=j.getRoot(q(u)),z=h.hasClass(y,"_5pat"),aa;if(z&&w=='afrostart'){aa='';}else{var ba=w=='hide'||w=='afrostart'?"This story is now hidden from your News Feed.":"This story has been marked as spam.",ca=w=='hide'||w=='afrostart'?"Unhide":"Undo",da=m.getTrackingInfo(m.types.UNHIDE_LINK),ea=i.create('a',{href:'#','data-ft':da},ca),fa={};if(v)fa.token=v;if(x)fa.hideable_token=x;var ga=new g().setURI('/ajax/entstream/home/story/unhide').setMethod('POST').setData(fa).setRelativeTo(ea);k.registerUnhide(ea,ga);aa=i.create('div',{'class':"_1f86"},[ba,' ',ea]);}k.hide(u,aa);},registerHide:function(u,v,w,x){l.listen(u,'click',function(){t.hide(u.getAttribute('id'),v,w,x);});}};e.exports=t;},null);
__d("EntstreamHomeFeedObjectOptionsMenu",["AdsPrefs","CSS","DOM","EntstreamHomeFeedObjectHide","EntstreamFeedObject","EntstreamFeedObjectFollow","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p,q,r,s,t){p.subscribe('itemclick',function(u,v){switch(v.item.getValue()){case 'hide':case 'markspam':case 'afrostart':j.hide(q,r,v.item.getValue(),t);break;case 'afro_direct_action':var w=v.item.getRoot().getAttribute('data-optimistic-hide');if(w){var x=i.create('div',{className:"_5lum"});i.appendContent(x,v.item.getRoot().getAttribute('data-action-in-progress-string'));i.insertBefore(k.getRoot(n(q)).firstChild,x);h.addClass(k.getRoot(n(q)),"_i6m");}break;case 'follow_post':case 'unfollow_post':l.toggleFollow(v.item,q,s);break;case 'ad_useful':case 'ad_neutral':g.toggleFavorite(v.item);break;}}.bind(this));p.subscribe('show',function(){p.forEachItem(function(u){u.onShow();});});}e.exports=o;},null);
__d("PrivacySelectorOptionNew",["CSS","DOM","DOMQuery","JSXDOM","MenuSelectableItem","PrivacyConst","csx","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(s){"use strict";k.call(this,s);this.updateAfterTagExpansion(this._data.hasTags);}r.prototype.getTooltip=function(){"use strict";return this._data.tooltip;};r.prototype.getPostParam=function(){"use strict";return this._data.postParam;};r.prototype.getTriggerIcon=function(){"use strict";return this._data.triggerIcon;};r.prototype.isPublic=function(){"use strict";return this.getPostParam()===l.PostParam.EVERYONE;};r.prototype.isFriends=function(){"use strict";return this.getPostParam()===l.PostParam.FRIENDS;};r.prototype.isBasicOption=function(){"use strict";return true;};r.prototype.isCustomOption=function(){"use strict";return false;};r.prototype.getTagExpansionBehavior=function(){"use strict";return this._data.tagExpansionBehavior;};r.prototype.getBaseValue=function(){"use strict";return this._data.baseValue;};r.prototype.getIndex=function(){"use strict";return this._data.value;};r.prototype.getLoggingEventName=function(){"use strict";switch(this.getPostParam()){case l.PostParam.FRIENDS:return 'click_friends';case l.PostParam.EVERYONE:return 'click_everyone';case l.PostParam.ONLY_ME:return 'click_only_me';case l.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case l.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};r.prototype.updateAfterTagExpansion=function(s){"use strict";var t=this._data.baseLabel;if(s&&this._data.showPlusOnTagExpansion)t=o._("{privacyLabel} (+)",[o.param("privacyLabel",this._data.baseLabel)]);this._setLabel(t);if(s){this._setSubtitle(this._data.optionSubtitleWithTags);}else this._setSubtitle(this._data.optionSubtitle);};r.prototype._setLabel=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._54nh");t&&h.setContent(t,s);this._data.label=s;};r.prototype._setSubtitle=function(s){"use strict";if(!s)return;var t=i.find(this.getRoot(),"._48u1");t&&h.setContent(t,s);};r.prototype.render=function(){"use strict";var s=q.render.call(this);if(!this._data.isPrimaryOption)return s;var t=i.find(s,"._54nc");t&&g.addClass(t,"_48t_");var u=h.find(s,"._54nh");u&&g.addClass(u,"_48u0");var v=j.div({className:"_48u1"},this._data.optionSubtitle);h.appendContent(t,v);return s;};e.exports=r;},null);
__d("XPrivacySelectorLoggingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b('XControllerURIBuilder').create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("PrivacySelectorCustomOption",["Arbiter","AsyncDialog","AsyncRequest","DataStore","PrivacySelectorOptionNew","XPrivacySelectorLoggingControllerURIBuilder","XPrivacyCustomDialogControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){for(var n in k)if(k.hasOwnProperty(n))p[n]=k[n];var o=k===null?null:k.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=k;function p(q){"use strict";k.call(this,q);}p.prototype.isBasicOption=function(){"use strict";return false;};p.prototype.isCustomOption=function(){"use strict";return true;};p.prototype.getSelector=function(){"use strict";return this._selector;};p.prototype.setPostParam=function(q){"use strict";this._data.postParam=q;};p.prototype.getLoggingEventName=function(){"use strict";return 'click_custom';};p.prototype.openDialog=function(q){"use strict";if(typeof this._selector==='undefined')this._selector=q;j.set(this._data.id,'PrivacySelectorCustomOption',this);var r=new m().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',q.getPostParam()).setString('content_type',q.getContentType()).setInt('render_location',q.getRenderLocation()).setIntVector('tags',q.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',q.getTagExpansionButton()).getURI(),s=new i(r);h.send(s,function(t){var u=function(v){var w=new l().setEnum('event',v).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new i().setURI(w).send();};t.subscribe('hide',function(){g.inform('PrivacySelectorCustomOption/hide',{selector:q});});t.subscribe('success',function(){g.inform('PrivacySelectorCustomOption/success',{selector:q});u('custom_save');});t.subscribe('cancel',function(){g.inform('PrivacySelectorCustomOption/cancel',{selector:q});u('custom_cancel');});});};p.customPrivacySave=function(q,r,s){"use strict";var t=j.get(q,'PrivacySelectorCustomOption');t.getSelector().updateDataForItemIndex(t.getIndex(),r,s);t.getSelector().setValue(t.getIndex());j.remove(q,'PrivacySelectorCustomOption');};e.exports=p;},null);
__d("PrivacySelectableMenu",["AsyncRequest","CSS","DOM","Ease","PrivacySelectorCustomOption","PrivacySelectorOptionNew","SelectableMenu","SelectableMenuUtils","XPrivacySelectorLoggingControllerURIBuilder","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){for(var r in m)if(m.hasOwnProperty(r))t[r]=m[r];var s=m===null?null:m.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=m;function t(u,v){"use strict";m.call(this,u,v);}t.prototype.getItemForIndex=function(u){"use strict";for(var v=0;v<this._items.length;v++){var w=this._items[v];if(w instanceof l&&w.getIndex()==u)return w;}return null;};t.prototype.selectOption=function(u){"use strict";var v=null,w=this._items.some(function(x){if(x instanceof l&&!x.isCustomOption()&&x.getPostParam()==u){this.setValue(x.getIndex());return true;}if(x instanceof k){v=x;return false;}if(this._isMoreOption(x)){this.expandMenu(x.getRoot());return false;}},this);if(!w&&v){v.setPostParam(u);this.setValue(v.getIndex());}};t.prototype._isMoreOption=function(u){"use strict";return h.hasClass(u.getRoot(),"_2myv");};t.prototype._handleItemClick=function(u,v){"use strict";if(!n.doesItemSupportSelect(u))return s._handleItemClick.call(this,u,v);if(this._isMoreOption(u)){this._logMoreClick();this.expandMenu(u.getRoot());return;}this._logOptionClick(u);var w=this.inform('itemclick',{item:u,event:v});if(w)return;if(!n.isSelected(u)&&!u.isCustomOption()&&u.select()!==false){this._items.forEach(function(x){if(n.isSelected(x)&&x!==u)x.deselect();});this.inform('change',this.getSelection());}this.done();return u.handleClick();};t.prototype._logMoreClick=function(){"use strict";var u=new o().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(u).send();};t.prototype._logOptionClick=function(u){"use strict";var v=new o().setEnum('event',u.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new g().setURI(v).send();};t.prototype.expandMenu=function(u){"use strict";if(!u)u=i.scry(this._items[0].getRoot().parentNode,"._2myv")[0];this.forEachItem(function(v){h.removeClass(v.getRoot(),'hidden_elem');});h.addClass(u,'hidden_elem');};t.prototype.collapseMenu=function(){"use strict";this.forEachItem(function(u){var v=h.hasClass(u.getRoot(),"privacySelectorOptions/belowFold");h.conditionClass(u.getRoot(),'hidden_elem',v);});};t.prototype.updateOptionsAfterTagExpansion=function(u){"use strict";this.forEachItem(function(v){if(v instanceof l)v.updateAfterTagExpansion(u);});};t.prototype.onPopoverOpen=function(u){"use strict";if(this._items.indexOf(u)>=15)setTimeout(function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:j.sineOut});}.bind(this),250);};e.exports=t;},null);
__d("PopoverButton",["DOM","DOMQuery","csx"],function(a,b,c,d,e,f,g,h,i){var j={setLabel:function(k,l){var m=h.find(k,"._55pe"),n=m.childNodes;for(var o=0;o<n.length;o++)if(h.isTextNode(n[o])){g.replace(n[o],l);return;}g.appendContent(m,l);}};e.exports=j;},null);
__d("PrivacySelectorNewDispatcher",["Dispatcher","copyProperties","merge"],function(a,b,c,d,e,f,g,h,i){var j='selector',k=h(new g(),{handleUpdateFromSelector:function(l){this.dispatch(i({payloadSource:j},l));}});e.exports=k;},null);
__d("PrivacySelectorDataStore",["ArbiterMixin","merge","PrivacySelectorNewDispatcher","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h,i,j){var k=new j(),l=h(g,{get:function(m,n){k.executeOrEnqueue(m,n);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id};k.addResourcesAndExecute(n);l.inform('change');}});e.exports=l;},null);
__d("XPrivacySelectorUpdateControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b('XControllerURIBuilder').create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"Int",required:true},post_param:{type:"String",required:true},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool"},should_return_tooltip:{type:"Bool"},prefix_tooltip_with_app_privacy:{type:"Bool"},ent_id:{type:"Int",required:true},tag_expansion_button:{type:"String"}});},null);
__d("PrivacySelectorBase",["ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","Input","MenuSelectableItem","PopoverButton","PrivacySelectorNewDispatcher","PrivacySelectorDataStore","PrivacySelectableMenu","TagExpansionButtonConfig","Tooltip","XPrivacySelectorLoggingControllerURIBuilder","XPrivacySelectorUpdateControllerURIBuilder","bind","csx","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=y(g);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da,ea,fa,ga,ha){"use strict";this._button=da;this._menu=ea;this._popoverMenu=ga;this._input=fa;this._isSavedOnSelect=ha.is_saved_on_select;this._privacyFBID=ha.privacy_fbid;this._contentType=ha.content_type;this._renderLocation=ha.render_location;this._supportsTagExpansion=ha.supports_tag_expansion;this._prefixTooltipApps=ha.should_prefix_tooltip_apps;this._shouldDisplayLabel=ha.should_display_label;this._tags=ha.tagged_uids;this._hasTags=!!this._tags;this._entID=ha.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();if(ha.use_async_menu){this._popoverMenu.subscribe('setMenu',function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof q))return;this._onMenuLoad();this._onPopoverOpen();}.bind(this));}else this._onMenuLoad();if(ha.selector_sync_key){this._selectorSyncKey=ha.selector_sync_key.toString();p.subscribe('change',function(){p.get(this._selectorSyncKey,function(ia){if(ia.unique_id!==this._menu._config.id){this._receivingUpdate=true;this.selectOption(ia.post_param);}}.bind(this));}.bind(this));this._menu.subscribe('change',function(){if(!this._receivingUpdate){var ia=this._getSelectedOption();o.handleUpdateFromSelector({selector_type:this._selectorSyncKey,post_param:ia.getPostParam().toString(),unique_id:this._menu._config.id});}else this._receivingUpdate=false;}.bind(this));}}ca.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption.isPublic();};ca.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption.isFriends();};ca.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption.getBaseValue();};ca.prototype.setValue=function(da){"use strict";this._menu.setValue(da);};ca.prototype.openSelectorExpanded=function(){"use strict";this.openSelector();this._menu.expandMenu();};ca.prototype.openSelector=function(){"use strict";this._popover.showLayer();this.inform('open');};ca.prototype.closeSelector=function(){"use strict";this._popover.hideLayer();};ca.prototype.getPopover=function(){"use strict";return this._popover;};ca.prototype.getTriggerButtonElement=function(){"use strict";return this._button;};ca.prototype.getMenuElement=function(){"use strict";return this._menu.getRoot();};ca.prototype.selectOption=function(da){"use strict";if(!da)return;this._menu.selectOption(da);this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};ca.prototype.setTagExpansionButton=function(da){"use strict";this._tagExpansionButton=da;if(this._hasTags){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};ca.prototype.getTagExpansionButton=function(){"use strict";return this._tagExpansionButton;};ca.prototype._initTagExpansionButtonState=function(){"use strict";this._tagExpansionButton=r.FRIENDS_OF_TAGGED;var da=this._getSelectedOption();if(!da)return;var ea=JSON.parse(da.getPostParam());if(ea.settings&&ea.settings.no_tag_expansion===true){this._tagExpansionButton=r.TAGGED_ONLY;}else this._tagExpansionButton=r.FRIENDS_OF_TAGGED;};ca.prototype._getSelectedOption=function(){"use strict";if(!(this._menu instanceof q))return;var da;this._menu.forEachItem(function(ea){if(ea instanceof m&&ea.isSelected())da=ea;}.bind(this));return da;};ca.prototype._onItemClick=function(da,ea){"use strict";var fa=ea.item;if(fa.isBasicOption()){this.updateDataForItemIndex(fa.getIndex(),fa.getPostParam().toString());}else if(fa.isCustomOption())fa.openDialog(this);this.inform('click',{customSelected:fa.isCustomOption()});};ca.prototype.getContentType=function(){"use strict";return this._contentType;};ca.prototype.getRenderLocation=function(){"use strict";return this._renderLocation;};ca.prototype.getPostParam=function(){"use strict";return this._postParam;};ca.prototype.getTags=function(){"use strict";return this._tags;};ca.prototype.updateDataForItemIndex=function(da,ea,fa){"use strict";if(fa){this._tagExpansionButton=fa;this.inform('CustomTagExpansion',this._tagExpansionButton);}var ga=this._menu.getItemForIndex(da);if(ga.isCustomOption())ga.setPostParam(ea);this._selectedOption=ga;this._postParam=ea;l.setValue(this._input,ea);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};ca.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion;};ca.prototype._savePrivacy=function(){"use strict";this._sendUpdateRequest();};ca.prototype._sendUpdateRequest=function(){"use strict";var da=new u().setInt('privacy_fbid',this._privacyFBID).setString('post_param',this._postParam).setIntVector('tags',this._tags).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',this._isSavedOnSelect).setBool('should_return_tooltip',this._shouldUpdateTooltips()).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setInt('ent_id',this._entID).setString('tag_expansion_button',this._tagExpansionButton).getURI();new h().setRelativeTo(this._button).setHandler(v(this,function(ea){var fa=ea&&ea.payload&&ea.payload.tooltip;fa&&this._setTooltipValue(ea.payload.tooltip);})).setURI(da).send();};ca.prototype.informTagsChanged=function(da){"use strict";var ea=this._getTags(da);if(this._hasTags===!ea.length){this._hasTags=!!ea.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion());this._updateTriggerButtonLabel();}if(this._tags.length!==ea.length){this._tags=ea;this._updateTooltipAfterChange();}};ca.prototype._showTagExpansion=function(){"use strict";return this._hasTags&&(this._tagExpansionButton.valueOf()===r.FRIENDS_OF_TAGGED.valueOf());};ca.prototype._getTags=function(da){"use strict";var ea=[],fa=k.getID();if(da.withTags)for(var ga=0;ga<da.withTags.length;ga++){var ha=da.withTags[ga].info;if(ha.uid!=fa)ea.push(ha.uid);}if(da.mention)for(var ia in da.mention)if(da.mention[ia].type=='user'&&da.mention[ia].uid!=fa)ea.push(da.mention[ia].uid);return ea;};ca.prototype._updateTriggerButtonLabel=function(){"use strict";var da=this._selectedOption.getTriggerIcon();i.setIcon(this._button,da.cloneNode());if(!this._shouldDisplayLabel)return;n.setLabel(this._button,this._selectedOption.getLabel());};ca.prototype._updateTooltipAfterChange=function(){"use strict";var da="Loading...";this._setTooltipValue(da);this._sendUpdateRequest();};ca.prototype._setTooltipValue=function(da){"use strict";da&&s.set(this._button,da);};ca.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;var da=this._getSelectedOption().getRoot(),ea=j.hasClass(da,"privacySelectorOptions/belowFold");if(!ea)this._menu.collapseMenu();this.inform('close');};ca.prototype._onPopoverOpen=function(){"use strict";if(!(this._menu instanceof q))return;this._menu.onPopoverOpen(this._getSelectedOption());var da=new t().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new h().setURI(da).send();};ca.prototype._onMenuLoad=function(){"use strict";this._menu.subscribe('itemclick',this._onItemClick.bind(this));this._popover.subscribe('hide',this._onPopoverClose.bind(this));this._popover.subscribe('show',this._onPopoverOpen.bind(this));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._hasTags&&this._updateTriggerButtonLabel();}};e.exports=ca;},null);
__d("MenuStaticItem",["DOM","MenuItemBase","React","copyProperties","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p){"use strict";h.call(this);this._data=p;}o.prototype._renderItemContent=function(){"use strict";var p=g.create('span',{className:"_54nc _54ah"});if(this._data.reactChildren){i.renderComponent(i.createDescriptor(i.DOM.span,{className:"_54nh"},this._data.reactChildren),p);}else g.setContent(p,g.create('span',{className:"_54nh"},this._data.markup));return p;};j(o.prototype,{handleClick:l});e.exports=o;},null);
__d("MenuTogglingItem",["DOM","MenuItem"],function(a,b,c,d,e,f,g,h){for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.handleClick=function(){"use strict";this.toggleMenuItem();return j.handleClick.call(this);};k.prototype.toggleMenuItem=function(){"use strict";this._swap('ajaxify','toggleAjaxify');this._swap('value','toggleValue');this._toggleItemText();};k.prototype.setValue=function(l){"use strict";this._data.value=l;};k.prototype._toggleItemText=function(){"use strict";var l=this._anchor;this._swap('markup','toggleMarkup');g.replace(l,this._renderItemContent());};k.prototype._swap=function(l,m){"use strict";var n=this._data[l];this._data[l]=this._data[m];this._data[m]=n;};e.exports=k;},null);
__d("ContextualLayerPositionClassOnContext",["CSS","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i){function j(l){"use strict";this._layer=l;}j.prototype.enable=function(){"use strict";this._subscription=this._layer.subscribe('reposition',this._updateClassName.bind(this));if(this._layer.isShown())this._updateClassName();};j.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null;if(this._prevClassName){g.removeClass(this._layer.getContext(),this._prevClassName);this._prevClassName=null;}};j.prototype._updateClassName=function(l,m){"use strict";var n=this._layer.getContext(),o=k(m);if(this._prevClassName){if(this._prevClassName===o)return;g.removeClass(n,this._prevClassName);}g.addClass(n,o);this._prevClassName=o;};function k(l){var m=l.getAlignment(),n=l.getPosition();if(n==='below'){if(m==='left'){return "_nk";}else if(m==='right'){return "_nl";}else return "_nm";}else if(n==='above'){if(m==='left'){return "_nn";}else if(m==='right'){return "_no";}else return "_np";}else if(n==='left'){return "_nq";}else return "_nr";}h(j.prototype,{_subscription:null,_prevClassName:null});e.exports=j;},null);