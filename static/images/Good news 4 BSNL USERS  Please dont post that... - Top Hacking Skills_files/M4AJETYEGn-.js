/*!CK:3084394916!*//*1407296289,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["rg3sW"]); }

__d("BroadcastRequestParam",[],function(a,b,c,d,e,f){e.exports={ANSWER_IDS:"answer_ids",BROADCAST_REQUEST_ID:"broadcast_request_id",COLOR:"color",COMMENT_FBID:"comment_fbid",COMMENT_TOKEN:"comment_token",COMPOSER_TOKEN_IDS:"composer_token_ids",DESCRIPTION_DOM_ID:"description_dom_id",DOM_ID:"dom_id",ENTITY_TITLE:"entity_title",ENTITY_TOKEN:"entity_token",ERROR_CODE:"error_code",HAS_VIEWER_VOTED:"has_viewer_voted",QUERIED_RECIPIENTS:"queried_recipients",QUERY:"q",RECIPIENT_IDS:"recipient_ids",SEND_REQUEST:"send_request",SOURCE:"source",SOURCE_OBJ_ID:"source_obj_id",SUGGESTION_CARD_ID:"suggestion_card_id",SUGGESTION_ID:"suggestion_id",SUGGESTION_IDS:"add_suggestions_ids",SUGGESTION_ROW_ID:"suggestion_row_id",TARGET_ID:"target_id",VOTE_ACTION:"vote_action",EXISTING_IDS:"existing_ids",VALUE:"value",BROADCAST_REQUEST_TYPE:"broadcast_request_type",COMPOSER_TEXT:"composer_text"};},null);
__d("TrackingNodeTypes",[],function(a,b,c,d,e,f){e.exports={HEADLINE:1,USER_NAME:2,ACTOR_PHOTO:3,ACTION_LINKS:4,LIKE_LINK:5,UNLIKE_LINK:6,PARTICIPANT:7,PRONOUN:8,ROBOTEXT:9,TITLE:10,MEDIA_GENERIC:11,PHOTO:12,VIDEO:13,MUSIC:14,ATTACHMENT:15,NAME_LIST:16,SHARE_LINK:17,USER_MESSAGE:18,SUBTITLE:19,DESCRIPTION:20,SOURCE:21,BLINGBOX:22,OTHER:23,VIEW_ALL_COMMENTS:24,COMMENT:25,COMMENT_LINK:26,SMALL_ACTOR_PHOTO:27,SUBSTORY:28,XBUTTON:29,HIDE_LINK:30,REPORT_SPAM_LINK:31,HIDE_ALL_LINK:32,BAD_AGGREGATION_LINK:33,ADD_COMMENT_BOX:34,APP_CALL_TO_ACTION:35,UFI:36,OG_LEFT_SLIDE_PAGER:37,OG_RIGHT_SLIDE_PAGER:38,EXP_CALL_TO_ACTION:39,LARGE_MEDIA_ATTACHMENT:40,FAN_PAGE:42,UNFAN_PAGE:43,SEE_MORE:44,COLLECTION_ROBOTEXT_LINK:45,COLLECTION_ACTION_LINK:46,COLLECTION_TICKER_LINK:47,GIFT_LINK:48,SPONSORED_LINK:49,PAGE_LINK:50,SOCIAL_CONTEXT:51,SOCIAL_ACTOR_PHOTO:52,OFFERS_CLAIM:53,OFFERS_CLICK:54,DROPDOWN_BUTTON:55,EVENT_VIEW:56,EVENT_RSVP:57,ADS_SHIMMED_LINK:58,COLLECTION_ADD_BUTTON:59,EVENT_INVITE_FRIENDS:60,RHC_AD:61,AD_CREATIVE_TITLE:62,AD_CREATIVE_BODY:63,AD_CREATIVE_IMAGE:64,AD_SOCIAL_SENTENCE:65,APP_NAME:66,GROUP_JOIN:67,PAGE_COVER_PHOTO:68,PAGE_PROFILE_PIC:69,AD_IDENTITY:70,UNHIDE_LINK:71,TRENDING_TOPIC_LINK:72,RELATED_SHARE_ARTICLE:73,OFFERS_USE_NOW:74,RELATED_SHARE_VIDEO:75,RHC_CARD:76,RHC_CARD_HIDE:77,RHC_SIMPLIFICATION:78,RHC_SIMPLIFICATION_HIDE:79,TOPIC_PIVOT_HEADER:80,ADD_FRIEND_BUTTON:81,SNOWLIFT:82,SNOWLIFT_MESSAGE:83,OFFERS_RESEND:84,RHC_LINK_OPEN:85,GENERIC_CALL_TO_ACTION_BUTTON:86,AD_LOGOUT:87,RHC_PHOTO_SLIDER:88,RHC_COMMENT_BUTTON:89,HASHTAG:90,NOTE:91,RELATED_SHARE_ARTICLE_HIDE:92,RELATED_SHARE_VIDEO_HIDE:93,NEKO_PREVIEW:94,OG_COMPOSER_OBJECT:95,INSTALL_ACTION:96,SPONSORED_CONTEXT:97,DIGITAL_GOOD:98,STORY_FOOTER:99,STORY_LOCATION:100,ADD_PHOTO_ACTION:101,ACTION_ICON:102,EGO_FEED_UNIT:103,PLACE_STAR_SURVEY:104,REVIEW_MENU:105,SAVE_ACTION:106,PHOTO_GALLERY:107,SUB_ATTACHMENT:108,FEEDBACK_SECTION:109,ALBUM:110,ALBUM_COLLAGE:111,AVATAR_LIST:112,STORY_LIST:113,MEDIA_CONTROLS:114,ZERO_UPSELL_BUY:115,ZERO_UPSELL_FEED_UNIT:116,RATING:117,PERMALINK_COMMENT:118,LIKE_COUNT:119,RETRY_BUTTON:120,TIMELINE_GIFTS:121,NEARBY_FRIENDS_LIST:122,PRESENCE_UNIT:123,EVENT_INVITE_SENT:124,ATTACHMENT_TITLE:125,HSCROLL_PAGER:126,STORY_MESSAGE:127,STATUS_LINK:128,ADD_MEDIA_LINK:129,ADD_QUESTION_LINK:130,START_Q_AND_A_LINK:131,UPLOAD_FILE_LINK:132,START_CONVERSATION_LINK:133,ATTACH_LIFE_EVENT_LINK:134,ATTACH_PLACE_LINK:135,COVER_PHOTO_EDIT_LINK:136,SHOW_LIKES:137,ROTATE_LEFT_BUTTON:138,ROTATE_RIGHT_BUTTON:139,TAG_LINK:140,CLOSE_BUTTON:141,PAGER_NEXT:142,PAGER_PREVIOUS:143,FULLSCREEN_BUTTON:144,ACTIONS:145,CURATION_MENU:146,PROFILE_PIC_EDIT_LINK:147,VIEW_ALL_SHARES:148,THUMBNAIL_LINK:149,EDIT_HISTORY:150,ADD_TO_THREAD:151,SIDEBAR:152,HOME_SIDENAV:153,BUDDYLIST_NUB:154,TITLEBAR:155,SEND_BUTTON:156,CONVERSATION:157,CHAT_FLYOUT:158,INPUT:159,EMOTICONS:160,VIDEOCHAT:161,TYPEAHEAD:162,OPTIONS_MENU:163,BOOST_POST_BUTTON:164,TOGGLE_BUTTON:165,CHAT_SIDEBAR_FOOTER:166,GRIPPER:167,BOOKMARK_ITEM:168,BOOKMARKS_SECTION:169,BOOKMARKS_NAV:170,RHC:171,RHC_HEADER:172,SIDE_ADS:173,BUDDY_LIST:174,CONTENT_ROLL:175,SHOW_ADS_FEED:184,VIDEO_IN_PLAY_CALL_TO_ACTION_BUTTON:185,VIDEO_ENDSCREEN_CALL_TO_ACTION_BUTTON:186,INLINE_PHOTO_PIVOTS_HIDE:187,VIDEO_CALL_TO_ACTION_ENDSCREEN_REPLAY:188,APP_ATTACHMENT:189,ACTIVITY_LINK:190,SAVE_BUTTON:191,SEE_MORE_PHOTO_PAGE_POST_BUTTON:192,BUY_VIRTUAL_GOOD:193,UNUSED:-1};},null);
__d("ClickPointIdentifiersDEPRECATED",[],function(a,b,c,d,e,f){var g={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(h){return '{"ua_id":"'+h+'"}';}};e.exports=g;},null);
__d("TrackingNodes",["TrackingNodeTypes"],function(a,b,c,d,e,f,g){var h={types:g,BASE_CODE_START:58,BASE_CODE_END:126,BASE_CODE_SIZE:69,PREFIX_CODE_START:42,PREFIX_CODE_END:47,PREFIX_CODE_SIZE:6,encodeTN:function(i,j){var k=(i-1)%h.BASE_CODE_SIZE,l=parseInt((i-1)/h.BASE_CODE_SIZE,10);if(i<1||l>h.PREFIX_CODE_SIZE)throw Error('Invalid tracking node: '+i);var m="";if(l>0)m+=String.fromCharCode(l-1+h.PREFIX_CODE_START);m+=String.fromCharCode(k+h.BASE_CODE_START);if(typeof j!="undefined"&&j>0)m+=String.fromCharCode(48+Math.min(j,10)-1);return m;},decodeTN:function(i){if(i.length===0)return [0];var j=i.charCodeAt(0),k=1,l,m;if(j>=h.PREFIX_CODE_START&&j<=h.PREFIX_CODE_END){if(i.length==1)return [0];m=j-h.PREFIX_CODE_START+1;l=i.charCodeAt(1);k=2;}else{m=0;l=j;}if(l<h.BASE_CODE_START||l>h.BASE_CODE_END)return [0];var n=m*h.BASE_CODE_SIZE+(l-h.BASE_CODE_START)+1;if(i.length>k&&(i.charAt(k)>='0'&&i.charAt(k)<='9'))return [k+1,[n,parseInt(i.charAt(k),10)+1]];return [k,[n]];},parseTrackingNodeString:function(i){var j=[];while(i.length>0){var k=h.decodeTN(i);if(k.length==1)return [];j.push(k[1]);i=i.substring(k[0]);}return j;},getTrackingInfo:function(i,j){return '{"tn":"'+h.encodeTN(i,j)+'"}';},addDataAttribute:function(i,j,k){if(j===undefined)return;['data-ft','data-gt'].forEach(function(l){var m;if(i.getAttribute){m=i.getAttribute(l)||"{}";}else if(i.props){m=i.props[l]||"{}";}else return;var n=h.encodeTN(j,k);try{m=JSON.parse(m);if(m.tn&&m.tn===n)return;m.tn=n;if(i.setAttribute){i.setAttribute(l,JSON.stringify(m));}else if(i.props){i.props[l]=JSON.stringify(m);}else return;}catch(o){}});}};e.exports=h;},null);
__d("UFIBlingItem.react",["React","NumberFormat","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:g.PropTypes.object.isRequired,count:g.PropTypes.number.isRequired,allowText:g.PropTypes.bool,className:g.PropTypes.string,iconClassName:g.PropTypes.string,itemKey:g.PropTypes.string},render:function(){var m=k(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),n=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),o='';if(this.props.allowText)switch(this.props.itemKey){case 'reshare':if(this.props.contextArgs.reshareedu)o=this.props.count===1?' Share':' Shares';break;}return (g.createDescriptor(g.DOM.span,null,g.createDescriptor(g.DOM.i,{className:m}),g.createDescriptor(g.DOM.span,{className:"UFIBlingBoxText"},j._({"":"{count}"," Share":"{count} Share"," Shares":"{count} Shares"},[j.param("count",n),j['enum'](o,{"":""," Share":" Share"," Shares":" Shares"})]))));}});e.exports=l;},null);
__d("UFIBlingBox.react",["React","UFIBlingItem.react","UFIConstants","cx","fbt","tx","FeedNFBConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('FeedNFBConstants').data,n=g.createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:g.PropTypes.object.isRequired,'data-ft':g.PropTypes.string,comments:g.PropTypes.number,likes:g.PropTypes.number,nfb:g.PropTypes.number,onClick:g.PropTypes.func,permalink:g.PropTypes.string,reshares:g.PropTypes.number},render:function(){var o=[],p='';if(this.props.likes){o.push(g.createDescriptor(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.likes,iconClassName:"UFIBlingBoxLikeIcon",itemKey:"like",key:"like"}));p+=(this.props.likes==1)?"1 like":l._("{count} likes",{count:this.props.likes});p+=' ';}if(this.props.comments){o.push(g.createDescriptor(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.comments,iconClassName:"UFIBlingBoxCommentIcon",itemKey:"comment",key:"comment"}));p+=(this.props.comments==1)?"1 comment":l._("{count} comments",{count:this.props.comments});p+=' ';}if(this.props.reshares){o.push(g.createDescriptor(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.reshares,iconClassName:"UFIBlingBoxReshareIcon",itemKey:"reshare",key:"reshare"}));p+=(this.props.reshares==1)?"1 share":l._("{count} shares",{count:this.props.reshares});}if(this.props.nfb&&m){o.push(g.createDescriptor(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.nfb,iconClassName:"_1ufb",itemKey:"nfb",key:"nfb"}));p+=(this.props.nfb==1)?k._("{nfb text}",[k.param("nfb text",m.ONE_NFB)]):k._("{nfb count}{nfb text}",[k.param("nfb count",this.props.nfb),k.param("nfb text",m.MULT_NFB)]);p+=' ';}var q=g.createDescriptor(g.DOM.a,{className:"UFIBlingBox uiBlingBox feedbackBling",href:this.props.permalink,'data-ft':this.props['data-ft'],'aria-label':p},o);if(this.props.comments>i.defaultPageSize)return q;q.props.onClick=this.props.onClick;q.props.rel='ignore';return q;}});e.exports=n;},null);
__d("UFILikeLink.react",["AccessibilityLogger","React","TrackingNodes","tx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:'UFILikeLink',propTypes:{likeAction:h.PropTypes.bool,onClick:h.PropTypes.func},_handleClick:function(event){g.logLikeEnterPress();if(this.props.onClick)this.props.onClick(event);},render:function(){var l=this.props.likeAction?"Like":"Unlike",m=i.getTrackingInfo(this.props.likeAction?i.types.LIKE_LINK:i.types.UNLIKE_LINK),n=this.props.likeAction?"Like this":"Unlike this";return (h.createDescriptor(h.DOM.span,null,h.createDescriptor(h.DOM.a,{className:"UFILikeLink accessible_elem",href:"#",role:"button",'aria-live':"polite",title:n,onClick:this._handleClick},l),h.createDescriptor(h.DOM.a,{className:"UFILikeLink",href:"#",role:"button",'aria-live':"polite",title:n,onClick:this.props.onClick,'data-ft':m},l)));}});e.exports=k;},null);
__d("UFIShareLink.react",["React","TrackingNodes","fbt"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'UFIShareLink',propTypes:{href:g.PropTypes.oneOfType([g.PropTypes.object,g.PropTypes.string]).isRequired},render:function(){var k="Send this to friends or post it on your timeline.",l='{ "tn": "'+h.encodeTN(h.types.SHARE_LINK)+'", "type": 25 }';return (g.createDescriptor(g.DOM.a,{className:"share_action_link",'data-ft':l,href:this.props.href,rel:"dialog",title:k},"Share"));}});e.exports=j;},null);
__d("UFISubscribeLink.react",["React","fbt"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:g.PropTypes.bool,onClick:g.PropTypes.func},render:function(){var j=this.props.subscribeAction?"Get Notifications":"Stop Notifications",k=this.props.subscribeAction?"Get a notification whenever someone comments.":"Stop getting notifications when someone comments.";return (g.createDescriptor(g.DOM.a,{className:"UFISubscribeLink",href:"#",role:"button",'aria-live':"polite",title:k,onClick:this.props.onClick},j));}});e.exports=i;},null);
__d("ProfileBrowserLink",["URI"],function(a,b,c,d,e,f,g){var h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new g(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};e.exports=k;},null);
__d("UFITimelineBlingBox.react",["ProfileBrowserLink","ProfileBrowserTypes","React","UFIBlingItem.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:i.PropTypes.object.isRequired,'data-ft':i.PropTypes.string,'data-gt':i.PropTypes.string,actorid:i.PropTypes.any,commentOnClick:i.PropTypes.func,comments:i.PropTypes.number,enableShowComments:i.PropTypes.bool,enableShowLikes:i.PropTypes.bool,feedbackFBID:i.PropTypes.any,likes:i.PropTypes.number,reshares:i.PropTypes.number},render:function(){var o=[];if(this.props.likes&&this.props.enableShowLikes){var p=this._getProfileBrowserURI(),q="See who likes this",r=i.createDescriptor(i.DOM.a,{ajaxify:p.dialog,className:this._getItemClassName(o),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':"tooltip",'data-tooltip-alignh':"right",'data-tooltip-uri':this._getLikeToolTipURI(),href:p.page,key:"like",rel:"dialog",role:"button",title:q},i.createDescriptor(j,{contextArgs:this.props.contextArgs,count:this.props.likes,iconClassName:"UFIBlingBoxTimelineLikeIcon",itemKey:"like"}));o.push(r);}if(this.props.comments&&this.props.enableShowComments){var s="Show comments",t=i.createDescriptor(i.DOM.a,{'aria-label':s,className:this._getItemClassName(o),'data-ft':this.props['data-ft'],'data-hover':"tooltip",'data-tooltip-alignh':"right",href:"#",key:"comment",onClick:this.props.commentOnClick},i.createDescriptor(j,{contextArgs:this.props.contextArgs,count:this.props.comments,iconClassName:"UFIBlingBoxTimelineCommentIcon",itemKey:"comment"}));o.push(t);}if(this.props.reshares){var u="Show shares",v=this._getShareViewURI(),w=i.createDescriptor(i.DOM.a,{ajaxify:v.dialog,'aria-label':u,className:this._getItemClassName(o),'data-ft':this.props['data-ft'],'data-hover':"tooltip",'data-tooltip-alignh':"right",href:v.page,key:"reshare",rel:"async"},i.createDescriptor(j,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,iconClassName:"UFIBlingBoxTimelineReshareIcon",itemKey:"reshare"}));o.push(w);}return (i.createDescriptor(i.DOM.span,null,o));},_getItemClassName:function(o){return ((o.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem"));},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var o=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return o.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var o=h.LIKES,p={id:this.props.feedbackFBID,actorid:this.props.actorid},q=g.constructDialogURI(o,p),r=g.constructPageURI(o,p),s={dialog:q.toString(),page:r.toString()};return s;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var o=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),p=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),q={dialog:o.toString(),page:p.toString()};return q;}}});e.exports=n;},null);
__d("MercuryLoggingHelper",[],function(a,b,c,d,e,f){var g={obfuscateMessage:function(h){if(h&&h.body&&h.body.length>5)h.body=h.body.substr(0,5)+"...";return h;}};e.exports=g;},null);
__d("MercuryServerDispatcher",["AsyncRequest","CurrentUser","Env","FBAjaxRequest","LogHistory","MercuryLoggingHelper","areJSONRepresentationsEqual","copyProperties","debounceAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={},q=k.getInstance('mercury_dispatcher'),r=false,s={IMMEDIATE:'immediate',IDEMPOTENT:'idempotent',BATCH_SUCCESSIVE:'batch-successive',BATCH_SUCCESSIVE_UNIQUE:'batch-successive-unique',BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:'batch-successive-piggyback-retry',BATCH_DEFERRED_MULTI:'batch-deferred-multi',BATCH_CONDITIONAL:'batch-conditional',registerEndpoints:function(v){for(var w in v){var x=v[w],y=x.request_user_id||h.getID();if(!p[w])p[w]={};if(!p[w][y])p[w][y]={};p[w][y]=new t(w,x);}},trySend:function(v,w,x,y){y=y||h.getID();p[v][y].trySend(w,x);}};function t(v,w){var x=w.mode||s.IMMEDIATE;switch(x){case s.IMMEDIATE:case s.IDEMPOTENT:case s.BATCH_SUCCESSIVE:case s.BATCH_SUCCESSIVE_UNIQUE:case s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:case s.BATCH_DEFERRED_MULTI:case s.BATCH_CONDITIONAL:break;default:throw new Error('Invalid MercuryServerDispatcher mode '+x);}this._endpoint=v;this._mode=x;this._requestUserID=w.request_user_id;this._combineData=w.batch_function;this._combineDataIf=w.batch_if;this._batchSizeLimit=w.batch_size_limit;this._batches=[];this._handler=w.handler;this._errorHandler=w.error_handler;this._transportErrorHandler=w.transport_error_handler||w.error_handler;this._connectionRetries=w.connection_retries||0;this._timeoutHandler=w.timeout_handler;this._timeout=w.timeout;this._serverDialogCancelHandler=w.server_dialog_cancel_handler||w.error_handler;this._deferredSend=o(this._batchSend,0,this);}n(t.prototype,{_inFlight:0,_handler:null,_errorHandler:null,_transportErrorHandler:null,_timeoutHandler:null,_timeout:null,_serverDialogCancelHandler:null,_combineData:null,trySend:function(v,w){if(r)return;if(typeof v=='undefined')v=null;var x=w||this._mode;if(x==s.IMMEDIATE){this._send(v);}else if(x==s.IDEMPOTENT){if(!this._inFlight)this._send(v);}else if(x==s.BATCH_SUCCESSIVE||x==s.BATCH_SUCCESSIVE_UNIQUE){if(!this._inFlight){this._send(v);}else this._batchData(v);}else if(x==s.BATCH_CONDITIONAL){var y=this._batches[0]&&this._batches[0].getData();if(this._inFlight&&(this._combineDataIf(this._pendingRequestData,v)||this._combineDataIf(y,v))){this._batchData(v);}else this._send(v);}else if(x==s.BATCH_DEFERRED_MULTI){this._batchData(v);this._deferredSend();}else if(x==s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR){this._batchData(v);if(!this._inFlight)this._batchSend();}},_send:function(v){this._inFlight++;this._pendingRequestData=n({},v);if(this._requestUserID!=h.getID())v.request_user_id=this._requestUserID;var w=[];if(v)for(var x in v.message_batch){var y=n({},v.message_batch[x]);l.obfuscateMessage(y);w.push(y);}var z=w.length?n({},v,{message_batch:w}):v;q.log('send',{endpoint:this._endpoint,data:z,inflight_count:this._inFlight});var aa=null;if(i.worker_context){aa=new j('POST',this._endpoint,v);aa.onError=function(ba){ba.getPayload=function(){return ba.errorText;};ba.getRequest=function(){var ca=ba;ba.getData=function(){return v;};return ca;};ba.getError=function(){return ba.errorText;};ba.getErrorDescription=function(){return ba.errorText;};ba.isTransient=function(){return false;};this._handleError(ba);}.bind(this);aa.onJSON=function(ba){ba.getPayload=function(){return ba.json;};ba.getRequest=function(){return aa;};this._handleResponse(ba);}.bind(this);aa.getData=function(){return v;};aa.send();}else{aa=new g(this._endpoint).setData(v).setOption('retries',this._connectionRetries).setHandler(this._handleResponse.bind(this)).setErrorHandler(this._handleError.bind(this)).setTransportErrorHandler(this._handleTransportError.bind(this)).setServerDialogCancelHandler(this._handleServerDialogCancel.bind(this)).setAllowCrossPageTransition(true);if(this._timeout&&this._timeoutHandler)aa.setTimeoutHandler(this._timeout,this._handleTimeout.bind(this));aa.send();}},_batchData:function(v,w){if(this._mode==s.BATCH_SUCCESSIVE_UNIQUE&&typeof this._pendingRequestData!='undefined'&&m(v,this._pendingRequestData)){return;}else{var x=this._batches.length-1;if(x>=0&&!this._hasReachedBatchLimit(this._batches[x])){w?this._batches[x].combineWithOlder(v,this._combineData):this._batches[x].combineWith(v,this._combineData);}else this._batches.push(new u(v));q.debug('batch',{endpoint:this._endpoint,batches:this._batches,batch_limit:this._batchSizeLimit});}},_hasReachedBatchLimit:function(v){return this._batchSizeLimit&&v.getSize()>=this._batchSizeLimit;},_batchSend:function(){if(this._batches[0]){this._send(this._batches[0].getData());this._batches.shift();}},_handleResponse:function(v){this._inFlight--;q.log('response',{endpoint:this._endpoint,inflight_count:this._inFlight});var w=v.getPayload();r=w&&w.kill_chat;if(r)q.log('killswitch_enabled',{endpoint:this._endpoint,inflight_count:this._inFlight});if(w&&w.error_payload){if(this._errorHandler)this._errorHandler(v);}else this._handler&&this._handler(w,v.getRequest());if(this._mode==s.BATCH_SUCCESSIVE||this._mode==s.BATCH_SUCCESSIVE_UNIQUE||this._mode==s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR||this._mode==s.BATCH_CONDITIONAL)this._batchSend();delete this._pendingRequestData;},_postErrorHandler:function(){q.error('error',{endpoint:this._endpoint,inflight_count:this._inFlight-1});this._inFlight--;var v=this._mode;if(v==s.BATCH_SUCCESSIVE||v==s.BATCH_SUCCESSIVE_UNIQUE||v==s.BATCH_CONDITIONAL){this._batchSend();}else if(v==s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR)if(this._batches[0]){this._batchData(this._pendingRequestData,true);this._batchSend();}else this._batchData(this._pendingRequestData,true);delete this._pendingRequestData;},_handleError:function(v){this._errorHandler&&this._errorHandler(v);this._postErrorHandler();},_handleTransportError:function(v){this._transportErrorHandler&&this._transportErrorHandler(v);this._postErrorHandler();},_handleTimeout:function(v){this._timeoutHandler&&this._timeoutHandler(v);this._postErrorHandler();},_handleServerDialogCancel:function(v){this._serverDialogCancelHandler&&this._serverDialogCancelHandler(v);this._postErrorHandler();}});function u(v){this._data=v;this._size=1;}n(u.prototype,{getData:function(){return this._data;},getSize:function(){return this._size;},combineWith:function(v,w){this._data=w(this._data,v);this._size++;},combineWithOlder:function(v,w){this._data=w(v,this._data);this._size++;}});e.exports=s;},null);
__d("UFICommentList",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=l({actorID:true});function n(o){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new h();this.feedbackTargetID=o;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};this.orderReversed=false;k.getFeedbackTarget(this.feedbackTargetID,function(p){this.actorID=p.actorforpost;this.basePermalink=p.permalink;this.orderReversed=p.isranked;}.bind(this));}n.prototype.addComment=function(o,p,q){var r=p&&g.isExistingClientID(p),s=this.dataSource.getAllResources(),t={};for(var u in s){var v=s[u];t[v]=u;}if(r&&p in t){t[o]=t[p];var w=t[p];this.dataSource.setResource(w,o);}else if(!t[o]){var x=this.count;this.count++;t[o]=x;this.dataSource.setResource(x,o);}if(q)this.commentPermalinks[o]=this.buildCommentPermalink(o,q,t[o]);i.didUpdateFeedback(this.feedbackTargetID);};n.prototype.addCommentIDs=function(o,p,q){var r={};for(var s=0;s<p;s++)r[o+s]=q[s]||j.unavailableCommentKey;this.dataSource.addResourcesAndExecute(r);i.didUpdateFeedback(this.feedbackTargetID);return this;};n.prototype.getComments=function(o,p,q,r){var s=[];for(var t=0;t<p;t++)s.push(o+t);var u=this.dataSource.getUnavailableResourcesFromRequest(s);if(u.length){var v=Math.min.apply(Math,u),w=Math.max.apply(Math,u),x=v,y=w-v+1;if(x<this.lastRequestedOffset||(x+y)>(this.lastRequestedOffset+this.lastRequestedLength)){this.lastRequestedOffset=x;this.lastRequestedLength=y;this.fetchComments(x,y,q);}}else this.dataSource.deferredExecuteOrEnqueue(s).addCallback(this.deferredCallback.bind(this,o,p,r));};n.prototype.fetchComments=function(o,p,q){};n.prototype.deferredCallback=function(o,p,q,r){};n.prototype.reset=function(){var o=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return o;};n.prototype.deleteComment=function(o){if(!(o in this.deletedComments)){this.deletedComments[o]=true;this.deletedCount++;}};n.prototype.updateCommentCount=function(o){this.count=o;this.deletedCount=0;return this;};n.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};n.prototype.getCommentCount=function(){return this.count;};n.prototype.getDeletedCount=function(){return this.deletedCount;};n.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};n.prototype.getBasePermalink=function(){return this.basePermalink;};n.prototype.buildCommentPermalink=function(o,p,q){};n.prototype.getPermalinkForComment=function(o){return this.commentPermalinks[o];};n.isValidContextPropertyForReset=function(o){return o in m;};e.exports=n;},null);
__d("Immutable",["invariant","isNode","keyOf","mergeInto"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=i({_DONT_EVER_TYPE_THIS_SECRET_KEY:null});function l(m){g(m===l[k]);}l.mergeAllPropertiesInto=function(m,n){var o=n.length;for(var p=0;p<o;p++)j(m,n[p]);};l.deepFreezeRootNode=function(m){if(h(m))return;Object.freeze(m);for(var n in m)if(m.hasOwnProperty(n))l.recurseDeepFreeze(m[n]);Object.seal(m);};l.recurseDeepFreeze=function(m){if(h(m)||!l.shouldRecurseFreeze(m))return;Object.freeze(m);for(var n in m)if(m.hasOwnProperty(n))l.recurseDeepFreeze(m[n]);Object.seal(m);};l.shouldRecurseFreeze=function(m){return (typeof m==='object'&&!(m instanceof l)&&m!==null);};l._DONT_EVER_TYPE_THIS_SECRET_KEY=Math.random();e.exports=l;},null);
__d("mergeHelpers",["invariant","keyMirror"],function(a,b,c,d,e,f,g,h){"use strict";var i=36,j=function(l){return typeof l!=='object'||l===null;},k={MAX_MERGE_DEPTH:i,isTerminal:j,normalizeMergeArg:function(l){return l===undefined||l===null?{}:l;},checkMergeArrayArgs:function(l,m){g(Array.isArray(l)&&Array.isArray(m));},checkMergeObjectArgs:function(l,m){k.checkMergeObjectArg(l);k.checkMergeObjectArg(m);},checkMergeObjectArg:function(l){g(!j(l)&&!Array.isArray(l));},checkMergeIntoObjectArg:function(l){g((!j(l)||typeof l==='function')&&!Array.isArray(l));},checkMergeLevel:function(l){g(l<i);},checkArrayStrategy:function(l){g(l===undefined||l in k.ArrayStrategies);},ArrayStrategies:h({Clobber:true,IndexByIndex:true})};e.exports=k;},null);
__d("ImmutableObject",["Immutable","invariant","keyOf","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=j.checkMergeObjectArgs,l=j.isTerminal,m=i({_DONT_EVER_TYPE_THIS_SECRET_KEY:null});function n(s){h(s instanceof g);}for(var o in g)if(g.hasOwnProperty(o))q[o]=g[o];var p=g===null?null:g.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=g;function q(){g.call(this,g[m]);g.mergeAllPropertiesInto(this,arguments);}q.create=function(){var s=Object.create(q.prototype);q.apply(s,arguments);return s;};q.set=function(s,t){n(s);h(typeof t==='object'&&t!==undefined&&!Array.isArray(t));return new q(s,t);};q.setProperty=function(s,t,u){var v={};v[t]=u;return q.set(s,v);};q.deleteProperty=function(s,t){var u={};for(var v in s)if(v!==t&&s.hasOwnProperty(v))u[v]=s[v];return new q(u);};q.setDeep=function(s,t){n(s);return r(s,t);};q.values=function(s){return Object.keys(s).map(function(t){return s[t];});};function r(s,t){k(s,t);var u={},v=Object.keys(s);for(var w=0;w<v.length;w++){var x=v[w];if(!t.hasOwnProperty(x)){u[x]=s[x];}else if(l(s[x])||l(t[x])){u[x]=t[x];}else u[x]=r(s[x],t[x]);}var y=Object.keys(t);for(w=0;w<y.length;w++){var z=y[w];if(s.hasOwnProperty(z))continue;u[z]=t[z];}return (s instanceof g?new q(u):t instanceof g?new q(u):u);}e.exports=q;},null);
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f,g){var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;},null);
__d("UFIComments",["ClientIDs","ImmutableObject","UFICentralUpdates","UFIConstants","UFIInstanceState","invariant","merge","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o={},p={};function q(fa){return fa in p?p[fa]:fa;}function r(fa,ga){fa.forEach(function(ha){var ia=ha.ftentidentifier,ja=j.UFIPayloadSourceType,ka=ha.clientid,la=false,ma=m({},ha);if(ka){delete ma.clientid;la=g.isExistingClientID(ka);if(la&&p[ka])return;}if((ga===ja.LIVE_SEND)||(ga===ja.USER_ACTION)||(ga===ja.ENDPOINT_ADD_COMMENT)||(ga===ja.ENDPOINT_EDIT_COMMENT))ma.isunseen=true;if(ga===ja.ENDPOINT_COMMENT_FETCH||ga===ja.ENDPOINT_ID_COMMENT_FETCH)ma.fromfetch=true;if(la){if(o[ka].ufiinstanceid)k.updateStateField(o[ka].ufiinstanceid,'locallycomposed',ha.id,true);ma.ufiinstanceid=o[ka].ufiinstanceid;p[ka]=ha.id;o[ha.id]=o[ka];delete o[ka];i.didUpdateComment(ka);}ea.setComment(ha.id,new h(ma));i.didUpdateComment(ha.id);i.didUpdateFeedback(ia);});}function s(fa){for(var ga=0;ga<fa.length;ga++){var ha=fa[ga];switch(ha.actiontype){case j.UFIActionType.COMMENT_LIKE:t(ha);break;case j.UFIActionType.DELETE_COMMENT:x(ha);break;case j.UFIActionType.LIVE_DELETE_COMMENT:y(ha);break;case j.UFIActionType.REMOVE_PREVIEW:z(ha);break;case j.UFIActionType.COMMENT_SET_SPAM:aa(ha);break;case j.UFIActionType.CONFIRM_COMMENT_REMOVAL:ba(ha);break;case j.UFIActionType.TRANSLATE_COMMENT:v(ha);break;case j.UFIActionType.COMMENT_LIKECOUNT_UPDATE:u(ha);break;}}}function t(fa){var ga=ea.getComment(fa.commentid);if(ga){var ha={},ia=fa.clientid&&g.isExistingClientID(fa.clientid);if(!ia){ha.hasviewerliked=fa.viewerliked;ha.likecount=fa.likecount;}ha.likeconfirmhash=n(0,1024);da(fa.commentid,ha);}}function u(fa){var ga=ea.getComment(fa.commentid);if(ga&&fa.hasviewerliked===ga.hasviewerliked){var ha={likecount:fa.likecount,likeconfirmhash:n(0,1024)};da(fa.commentid,ha);}}function v(fa){var ga=fa.commentid,ha=ea.getComment(fa.commentid);if(ha)da(ga,{translatedtext:fa.translatedtext});}function w(fa){var ga={reportLink:fa.reportLink,commenterIsFOF:fa.commenterIsFOF,userIsMinor:fa.userIsMinor,giveFeedbackLink:fa.giveFeedbackLink};return ga;}function x(fa){var ga=ea.getComment(fa.commentid);ca(ga,j.UFIStatus.DELETED);}function y(fa){var ga=ea.getComment(fa.commentid);if(ga&&ga.status!==j.UFIStatus.DELETED)ca(ga,j.UFIStatus.LIVE_DELETED);}function z(fa){da(fa.commentid,{attachment:null});}function aa(fa){var ga=ea.getComment(fa.commentid),ha=fa.shouldHideAsSpam?j.UFIStatus.SPAM_DISPLAY:null;ca(ga,ha);}function ba(fa){da(fa.commentid,w(fa));}function ca(fa,ga){da(fa.id,{priorstatus:fa.status,status:ga});}function da(fa,ga){var ha=ea.getComment(fa)||new h({});ea.setComment(fa,h.set(ha,ga));i.didUpdateComment(ha.id);i.didUpdateFeedback(ha.ftentidentifier);}var ea={getComment:function(fa){if(fa===j.unavailableCommentKey)return null;return o[q(fa)];},setComment:function(fa,ga){l(ga instanceof h);o[q(fa)]=ga;},resetComments:function(fa){for(var ga in fa)delete o[q(ga)];}};i.subscribe('update-comments',function(fa,ga){if(ga.comments&&ga.comments.length)r(ga.comments,ga.payloadsource);});i.subscribe('update-actions',function(fa,ga){if(ga.actions&&ga.actions.length)s(ga.actions);});e.exports=ea;},null);
__d("UFIToplevelCommentList",["ActorURI","MercuryServerDispatcher","UFICentralUpdates","UFICommentList","UFIComments","UFIConstants","UFIReplyCommentList","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o={};for(var p in j)if(j.hasOwnProperty(p))r[p]=j[p];var q=j===null?null:j.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=j;r.getCommentList=function(t,u){if(!o[t])o[t]={};if(!o[t][u]){var v=new r(t,u),w=r.getCommentListsForFeedbackTargetID(t);if(w.length)v.updateCommentCount(w[0].getCommentCount());o[t][u]=v;}return o[t][u];};r.getCommentListsForFeedbackTargetID=function(t){var u=[],v=o[t]||{};for(var w in v)u.push(v[w]);return u;};r.getCommentListForFeedbackTargetID_UNSAFE=function(t){var u=r.getCommentListsForFeedbackTargetID(t);return u.length?u[0]:null;};r.resetCommentListsForFeedbackTargetID=function(t){if(!o[t])return;var u={};for(var v in o[t]){var w=o[t][v],x=w.reset();for(var y in x){var z=x[y];u[z]=true;}}k.resetComments(u);};r.resetCommentListsWithContext=function(t,u){if(!o[t])return;var v={};for(var w in o[t]){var x=o[t][w];for(var y in u)if(this.isValidContextPropertyForReset(y))x[y]=u[y];var z=x.reset();for(var aa in z){var ba=z[aa];v[ba]=true;m.resetWithContext(t,ba,u);}}k.resetComments(v);};function r(t,u){j.call(this,t);this.orderingMode=u;}r.prototype.fetchComments=function(t,u,v){var w={ft_ent_identifier:this.feedbackTargetID,viewas:v,source:null,offset:t,length:u,orderingmode:this.orderingMode};if(!v)w[g.PARAMETER_ACTOR]=this.actorID;h.trySend('/ajax/ufi/comment_fetch.php',w);};r.prototype.deferredCallback=function(t,u,v,w){var x={},y=t,z=t+u-1;for(var aa=0;aa<u;aa++){var ba=this.orderReversed?z-aa:y+aa,ca=k.getComment(w[ba]);if(ca)x[t+aa]=ca;}v(x);};r.prototype.getOrderingMode=function(){return this.orderingMode;};r.prototype.buildCommentPermalink=function(t,u,v){if(!this.basePermalink)return null;var w=Math.floor((this.count-v-1)/l.defaultPageSize)*l.defaultPageSize;return (n(this.basePermalink).addQueryData({comment_id:u,offset:w,total_comments:this.count}).toString());};h.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:h.IMMEDIATE}});function s(t){var u=k.getComment(t.commentid),v=u.id,w=u.ftentidentifier,x=u.parentcommentid;if(x)return;if(u.status!==l.UFIStatus.DELETED&&u.status!==l.UFIStatus.FAILED_ADD)r.getCommentListsForFeedbackTargetID(w).forEach(function(y){y.deleteComment(v);});}i.subscribe('update-actions',function(t,u){if(u.actions&&u.actions.length)for(var v=0;v<u.actions.length;v++){var w=u.actions[v];switch(w.actiontype){case l.UFIActionType.DELETE_COMMENT:s(w);break;}}});i.subscribe('update-comment-lists',function(t,u){var v=u.commentlists;if(v&&v.comments&&Object.keys(v).length)for(var w in v.comments)for(var x in v.comments[w]){var y=v.comments[w][x];r.getCommentList(w,x).addCommentIDs(y.range.offset,y.range.length,y.values);}});i.subscribe('update-comments',function(t,u){if(u.comments&&u.comments.length)u.comments.forEach(function(v){if(v.parentcommentid)return;var w=v.ftentidentifier;r.getCommentListsForFeedbackTargetID(w).forEach(function(x){x.addComment(v.id,v.clientid,v.legacyid);});});});i.subscribe('update-feedback',function(t,u){if(u.feedbacktargets&&u.feedbacktargets.length)u.feedbacktargets.forEach(function(v){var w=v.entidentifier,x=v.defaultcommentorderingmode,y={};if(x)y[x]=true;if(v.orderingmodes)v.orderingmodes.forEach(function(aa){y[aa.value]=true;});for(var z in y)r.getCommentList(w,z).updateCommentCount(v.commentcount);});});e.exports=r;},null);
__d("XBroadcastRequestAddComposerTokenAsyncControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b('XControllerURIBuilder').create("\/profile\/broadcast_request\/async\/add_composer_token\/",{comment_token:{type:"String"},source_obj_id:{type:"Int"}});},null);
__d("UnicodeBidi",["Locale","UnicodeBidiDirection"],function(a,b,c,d,e,f,g,h){"use strict";var i={L:'A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF'+'\u200E\u2C00-\uD7FF\uE000-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF',R:'\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05F0-\u05F2\u05F3-\u05F4'+'\u07C0-\u07C9\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824'+'\u0828\u0830-\u083E\u0840-\u0858\u085E\u200F\uFB1D\uFB1F-\uFB28'+'\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFB4F',AL:'\u0608\u060B\u060D\u061B\u061C\u061E-\u061F\u0620-\u063F\u0640'+'\u0641-\u064A\u066D\u066E-\u066F\u0671-\u06D3\u06D4\u06D5\u06E5-\u06E6'+'\u06EE-\u06EF\u06FA-\u06FC\u06FD-\u06FE\u06FF\u0700-\u070D\u070F\u0710'+'\u0712-\u072F\u074D-\u07A5\u07B1\u08A0\u08A2-\u08AC\uFB50-\uFBB1'+'\uFBB2-\uFBC1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB'+'\uFDFC\uFE70-\uFE74\uFE76-\uFEFC'},j=i.L+i.R+i.AL,k=i.R+i.AL,l=new RegExp('['+j+']'),m=new RegExp('['+k+']');function n(t){var u=l.exec(t);if(!u)return h.NEUTRAL;var v=m.exec(u[0]);return v?h.RTL:h.LTR;}function o(t,u){u=u||h.NEUTRAL;if(!t.length)return u;var v=n(t);return (v===h.NEUTRAL)?u:v;}function p(t,u){if(!u||!h.isStrong(u))u=g.getDirection();return o(t,u);}function q(t,u){return p(t,u)===h.LTR;}function r(t,u){return p(t,u)===h.RTL;}var s={firstStrongCharDir:n,resolveBlockDir:o,getDirection:p,isDirectionLTR:q,isDirectionRTL:r};e.exports=s;},null);
__d("UFIUserActions",["ActorURI","AsyncResponse","BroadcastRequestParam","CLoggerX","ClientIDs","ImmutableObject","Nectar","UFICentralUpdates","UFIToplevelCommentList","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","XBroadcastRequestAddComposerTokenAsyncControllerURIBuilder","collectDataAttributes","copyProperties","tx","UnicodeBidi"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y={BAN:'ban',UNDO_BAN:'undo_ban'},z={changeActor:function(ma,na){r.getFeedbackTarget(ma,function(oa){o.resetCommentListsWithContext(ma,{actorID:na});var pa={from_actor_id:oa.actorforpost,ft_ent_identifier:ma};pa[g.PARAMETER_ACTOR]=na;s.trySend('/ajax/ufi/actor_change.php',pa);});},changeCommentLike:function(ma,na,oa){var pa=p.getComment(ma);if(pa.hasviewerliked!=na){var qa=aa(oa.target),ra=na?1:-1,sa={commentid:ma,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:na,likecount:pa.likecount+ra};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[sa]});r.getFeedbackTarget(pa.ftentidentifier,function(ta){var ua={};ua[g.PARAMETER_ACTOR]=ta.actorforpost;s.trySend('/ajax/ufi/comment_like.php',v({comment_id:ma,legacy_id:pa.legacyid,like_action:na,ft_ent_identifier:pa.ftentidentifier,source:oa.source,client_id:k.getNewClientID()},qa,ua));});}},changeAlsoRecommend:function(ma,na){var oa=p.getComment(ma.id);if(oa.hasviewerrecommended!==na){var pa={};pa[i.COMMENT_TOKEN]=ma.id;pa[i.SOURCE_OBJ_ID]=ma.ftentidentifier;s.trySend(new t().getURI(),pa);}},addComment:function(ma,na,oa,pa){r.getFeedbackTarget(ma,function(qa){var ra=aa(pa.target),sa=k.getNewClientID();if(!qa.actorforpost)return;var ta=x.isDirectionLTR(na)?'ltr':'rtl',ua={ftentidentifier:ma,body:{text:na,dir:ta},author:qa.actorforpost,id:sa,islocal:true,ufiinstanceid:pa.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:pa.replyid,attachment:pa.attachedsticker,photo_comment:pa.attachedphoto,timestamp:{time:Date.now(),text:"a few seconds ago"}},va={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:true,entidentifier:ma};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[ua],actions:[va]});var wa=null;if(pa.replyid)wa=(p.getComment(pa.replyid)).fbid;var xa=j.getCLParamsForTarget(pa.target,wa),ya={};ya[g.PARAMETER_ACTOR]=qa.actorforpost;s.trySend('/ajax/ufi/add_comment.php',v({ft_ent_identifier:qa.entidentifier,comment_text:oa,source:pa.source,client_id:sa,reply_fbid:wa,parent_comment_id:pa.replyid,timeline_log_data:pa.timelinelogdata,rootid:pa.rootid,clp:xa,attached_sticker_fbid:pa.attachedsticker?pa.attachedsticker.fbid:0,attached_photo_fbid:pa.attachedphoto?pa.attachedphoto.fbid:0,giftoccasion:pa.giftoccasion,recommendation_ids:pa.recommendationIDs?pa.recommendationIDs:[]},ra,ya));});},_hasCommentTextChanged:function(ma,na){return ma.body&&ma.body.text!=na;},_hasCommentPhotoChanged:function(ma,na){return ((ma||na)&&!(ma&&na))||(ma&&na&&(ma.fbid!=na.fbid));},_hasCommentStickerChanged:function(ma,na){return ((ma||na)&&!(ma&&na))||(ma&&(ma.type=="sticker")&&na&&(ma.fbid!=na.fbid));},editComment:function(ma,na,oa,pa){var qa=aa(pa.target),ra=p.getComment(ma),sa=this._hasCommentTextChanged(ra,na)||this._hasCommentPhotoChanged(ra.photo_comment,pa.attachedPhoto)||this._hasCommentStickerChanged(ra.attachment,pa.attachedSticker);ra=l.set(ra,{status:q.UFIStatus.PENDING_EDIT,body:{text:na},editnux:null,attachment:pa.attachedSticker,photo_comment:pa.attachedPhoto});if(sa)ra=l.set(ra,{originalTimestamp:ra.timestamp.time,timestamp:{time:Date.now(),text:"a few seconds ago"}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[ra]});r.getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[g.PARAMETER_ACTOR]=ta.actorforpost;s.trySend('/ajax/ufi/edit_comment.php',v({ft_ent_identifier:ra.ftentidentifier,comment_text:oa,source:pa.source,comment_id:ra.id,parent_comment_id:ra.parentcommentid,attached_sticker_fbid:pa.attachedSticker?pa.attachedSticker.fbid:0,attached_photo_fbid:pa.attachedPhoto?pa.attachedPhoto.fbid:0},qa,ua));});},translateComment:function(ma,na){s.trySend('/ajax/ufi/translate_comment.php',{ft_ent_identifier:ma.ftentidentifier,comment_ids:[ma.id],source:na.source});},setHideAsSpam:function(ma,na,oa){var pa=aa(oa.target),qa=p.getComment(ma),ra={commentid:ma,actiontype:q.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:na};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});s.trySend('/ajax/ufi/comment_spam.php',v({comment_id:ma,spam_action:na,ft_ent_identifier:qa.ftentidentifier,source:oa.source},pa));},removeComment:function(ma,na){var oa=aa(na.target),pa=p.getComment(ma),qa={actiontype:q.UFIActionType.DELETE_COMMENT,commentid:ma,oneclick:na.oneclick};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[qa]});r.getFeedbackTarget(pa.ftentidentifier,function(ra){var sa={};sa[g.PARAMETER_ACTOR]=ra.actorforpost;s.trySend('/ajax/ufi/delete_comment.php',v({comment_id:pa.id,comment_legacyid:pa.legacyid,ft_ent_identifier:pa.ftentidentifier,one_click:na.oneclick,source:na.source,client_id:k.getNewClientID(),timeline_log_data:na.timelinelogdata},oa,sa));});},banUser:function(ma,na,oa,pa){var qa=oa?y.BAN:y.UNDO_BAN;s.trySend('/ajax/ufi/ban_user.php',{page_id:na,commenter_id:ma.author,action:qa,comment_id:ma.id,client_side:true});},changeLike:function(ma,na,oa){r.getFeedbackTarget(ma,function(pa){var qa=aa(oa.target);if(pa.hasviewerliked!==na){var ra=na?1:-1,sa={actiontype:q.UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:na,likecount:pa.likecount+ra,entidentifier:ma,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[sa]});var ta={};ta[g.PARAMETER_ACTOR]=pa.actorforpost;s.trySend('/ajax/ufi/like.php',v({like_action:na,ft_ent_identifier:ma,source:oa.source,client_id:k.getNewClientID(),rootid:oa.rootid,giftoccasion:oa.giftoccasion},qa,ta));}});},changeSubscribe:function(ma,na,oa){r.getFeedbackTarget(ma,function(pa){var qa=aa(oa.target);if(pa.hasviewersubscribed!==na){var ra={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:na,entidentifier:ma};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});var sa={};sa[g.PARAMETER_ACTOR]=pa.actorforpost;s.trySend('/ajax/ufi/subscribe.php',v({subscribe_action:na,ft_ent_identifier:ma,source:oa.source,client_id:k.getNewClientID(),rootid:oa.rootid,comment_expand_mode:oa.commentexpandmode},qa,sa));}});},fetchSpamComments:function(ma,na,oa,pa){s.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ma,viewas:pa,comment_ids:na,parent_comment_id:oa,source:null});},removePreview:function(ma,na){var oa=aa(na.target),pa={commentid:ma.id,actiontype:q.UFIActionType.REMOVE_PREVIEW};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[pa]});s.trySend('/ajax/ufi/remove_preview.php',v({comment_id:ma.id,ft_ent_identifier:ma.ftentidentifier,source:na.source},oa));}};function aa(ma){if(!ma)return {ft:{}};var na={ft:u(ma,['ft']).ft};m.addModuleData(na,ma);return na;}function ba(ma){var na=ma.request.data;if(!ma.isBlockedAction())h.defaultErrorHandler(ma);var oa=na.client_id||na.comment_id,pa=p.getComment(oa),qa=(pa.status===q.UFIStatus.PENDING_EDIT)?q.UFIStatus.FAILED_EDIT:q.UFIStatus.FAILED_ADD;pa=l.setDeep(pa,{status:qa,allowRetry:ca(ma),body:{mentionstext:na.comment_text,mentionsphoto:pa.photo_comment}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function ca(ma){var na=ma.getError();if(ma.isBlockedAction())return false;if(ma.silentError)return true;if(na===1357012||na===1357006)return false;return true;}function da(ma){var na=ma.request.data,oa=na.comment_id,pa=p.getComment(oa);pa=l.set(pa,{status:pa.priorstatus||null,priorstatus:undefined});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function ea(ma){var na=ma.request.data,oa=na.comment_id,pa=p.getComment(oa);if(na.like_action===pa.hasviewerliked){var qa=pa.hasviewerliked?-1:1,ra={commentid:oa,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:!pa.hasviewerliked,likecount:pa.likecount+qa};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}h.defaultErrorHandler(ma);}function fa(ma){var na=ma.request.data,oa=na.ft_ent_identifier;r.getFeedbackTarget(oa,function(pa){if(pa.hasviewerliked===na.like_action){var qa=pa.hasviewerliked?-1:1,ra={actiontype:q.UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:!pa.hasviewerliked,likecount:pa.likecount+qa,entidentifier:oa,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}});h.defaultErrorHandler(ma);}function ga(ma){var na=ma.request.data,oa=na.ft_ent_identifier;r.getFeedbackTarget(oa,function(pa){if(pa.hasviewersubscribed===na.subscribe_action){var qa={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:!pa.hasviewersubscribed,entidentifier:oa};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[qa]});}});h.defaultErrorHandler(ma);}var ha={'/ajax/ufi/actor_change.php':{mode:s.IMMEDIATE},'/ajax/ufi/comment_like.php':{mode:s.BATCH_CONDITIONAL,error_handler:ea,batch_if:ia,batch_function:la},'/ajax/ufi/comment_spam.php':{mode:s.IMMEDIATE,error_handler:da},'/ajax/ufi/add_comment.php':{mode:s.IMMEDIATE,error_handler:ba},'/ajax/ufi/delete_comment.php':{mode:s.IMMEDIATE,error_handler:da},'/ajax/ufi/ban_user.php':{mode:s.IMMEDIATE},'/ajax/ufi/edit_comment.php':{mode:s.IMMEDIATE,error_handler:ba},'/ajax/ufi/like.php':{mode:s.BATCH_CONDITIONAL,error_handler:fa,batch_if:ja,batch_function:la},'/ajax/ufi/subscribe.php':{mode:s.BATCH_CONDITIONAL,error_handler:ga,batch_if:ka,batch_function:la},'/ajax/ufi/id_comment_fetch.php':{mode:s.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:s.IMMEDIATE},'/ajax/ufi/translate_comment.php':{mode:s.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:s.IMMEDIATE}};ha[(new t()).getURI()]={mode:s.IMMEDIATE};s.registerEndpoints(ha);function ia(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier&&ma.comment_id==na.comment_id;}function ja(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function ka(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function la(ma,na){return na;}e.exports=z;},null);
__d("UFIActionLinkController",["ActorURI","Arbiter","ClickPointIdentifiersDEPRECATED","CSS","DOMQuery","Parent","React","TrackingNodes","UFIBlingBox.react","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","UFILikeLink.react","UFIShareLink.react","UFISubscribeLink.react","UFITimelineBlingBox.react","UFIToplevelCommentList","UFIUserActions","UFIUIEvents","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function aa(ca,da,ea){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var fa=k.scry(ca,da)[0];if(fa){var ga=document.createElement('span');fa.parentNode.replaceChild(ga,fa);ga.appendChild(fa);if(typeof ea==="function")ea(ga);}else var ha=h.subscribe('PhotoSnowlift.DATA_CHANGE',function(){h.unsubscribe(ha);aa(ca,da,ea);},h.SUBSCRIBE_NEW);}var ba=function(ca,da,ea){this._id=da.ftentidentifier;this._ftFBID=ea.targetfbid;this._source=da.source;this._contextArgs=da;this._ufiRoot=ca;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ea.viewercanlike||ea.hasviewerliked)this._attemptInitializeLike();if(ea.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();p.subscribe('feedback-updated',function(fa,ga){var ha=ga.updates;if(this._id in ha)this.render();}.bind(this));p.subscribe('feedback-id-changed',function(fa,ga){var ha=ga.updates;if(this._id in ha)this._id=ha[this._id];}.bind(this));};z(ba.prototype,{_attemptInitializeBling:function(){aa(this._ufiRoot,'^form .uiBlingBox',function(ca){this._blingRoot=ca;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ca=k.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions span')[0];if(ca){j.addClass(ca,"UFIBlingBoxTimeline");var da=k.scry(ca,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=da?true:false;var ea=k.scry(ca,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ea?true:false;}this._blingTimelineRoot=ca;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){aa(this._ufiRoot,'^form .like_link',function(ca){this._likeRoot=ca;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeSubscribe:function(){aa(this._ufiRoot,'^form .unsub_link',function(ca){this._subscribeRoot=ca;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeShare:function(){aa(this._ufiRoot,'^form .share_action_link',function(ca){this._shareRoot=ca;var da=k.scry(this._shareRoot,'.share_action_link')[0];this._shareURI=da?da.getAttribute('href'):null;if(this._dataReady)this._renderShare();}.bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderSubscribe();this._renderShare();},_renderBling:function(){if(this._blingRoot)r.getFeedbackTarget(this._id,function(ca){var da=function(event){if(this._contextArgs.blingtogglescomments){var ha=l.byTag(event.target,"form");j.toggleClass(ha,"collapsed_comments");j.toggleClass(ha,"hidden_add_comment");}event.preventDefault();}.bind(this),ea=n.getTrackingInfo(n.types.BLINGBOX),fa=w.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),ga=m.createDescriptor(o,{likes:ca.likecount,comments:fa,reshares:ca.sharecount,nfb:ca.nfbcount,permalink:ca.permalink,contextArgs:this._contextArgs,onClick:da,'data-ft':ea});this._blingBox=m.renderComponent(ga,this._blingRoot);}.bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)r.getFeedbackTarget(this._id,function(ca){var da=n.getTrackingInfo(n.types.BLINGBOX),ea=i.getUserActionID(i.types.TIMELINE_SEE_LIKERS),fa=function(event){var ia=l.byTag(event.target,"form");j.removeClass(ia,"collapsed_comments");var ja=k.scry(ia,'a.UFIPagerLink');if(ja.length)ja[0].click();event.preventDefault();}.bind(this),ga=w.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),ha=m.createDescriptor(v,{comments:ga,commentOnClick:fa,contextArgs:this._contextArgs,'data-ft':da,'data-gt':ea,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:ca.likecount,reshares:ca.sharecount,actorid:ca.actorid});m.renderComponent(ha,this._blingTimelineRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)r.getFeedbackTarget(this._id,function(ca){var da=!ca.hasviewerliked,ea=function(event){var ga=da?y.UFIActionLinkLike:y.UFIActionLinkUnlike;h.inform(ga,{ft_id:this._id,like_action:da,target:event.target});x.changeLike(this._id,da,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,giftoccasion:this._contextArgs.giftoccasion});event.preventDefault();}.bind(this),fa=m.createDescriptor(s,{onClick:ea,likeAction:da});this._likeLink=m.renderComponent(fa,this._likeRoot);}.bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)r.getFeedbackTarget(this._id,function(ca){var da=!ca.hasviewersubscribed,ea=function(event){x.changeSubscribe(this._id,da,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:ca.commentexpandmode});event.preventDefault();}.bind(this),fa=m.createDescriptor(u,{onClick:ea,subscribeAction:da});this._subscribeLink=m.renderComponent(fa,this._subscribeRoot);}.bind(this));},_renderShare:function(){if(this._shareRoot&&this._shareURI)r.getFeedbackTarget(this._id,function(ca){var da=ca.actorforpost,ea=m.createDescriptor(t,{href:g.create(this._shareURI,da)});this._shareLink=m.renderComponent(ea,this._shareRoot);}.bind(this));},_isRenderingOnTimeline:function(){if(this._source===q.UFIFeedbackSourceType.PROFILE){var ca=k.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions span');return (ca.length>0);}return false;}});e.exports=ba;},null);
__d("ClipboardPhotoUploader",["ArbiterMixin","AsyncRequest","mixin"],function(a,b,c,d,e,f,g,h,i){var j=i(g);for(var k in j)if(j.hasOwnProperty(k))m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(n,o){"use strict";this.uploadURIString=n;this.data=o;}m.prototype.handlePaste=function(event){"use strict";if(!event.clipboardData)return;var n=event.clipboardData.items;if(!n)return;for(var o=0;o<n.length;++o){var p=n[o];if(p.kind==='file'&&p.type.indexOf('image/')!==-1){var q=new FormData();q.append('pasted_file',p.getAsFile());var r=new h();r.setURI(this.uploadURIString).setData(this.data).setRawData(q).setHandler(function(s){this.inform('upload_success',s);}.bind(this)).setErrorHandler(function(s){this.inform('upload_error',s);}.bind(this));this.inform('upload_start');r.send();break;}}};e.exports=m;},null);
__d("CloseButton.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:'CloseButton',render:function(){var l=this.props,m=l.size||'medium',n=l.appearance||'normal',o=m==='small',p=m==='huge',q=n==='dark',r=n==='inverted',s=l.ajaxify||null,t=l.rel||null,u=(("uiCloseButton")+(o?' '+"uiCloseButtonSmall":'')+(p?' '+"uiCloseButtonHuge":'')+(o&&q?' '+"uiCloseButtonSmallDark":'')+(o&&r?' '+"uiCloseButtonSmallInverted":'')+(!o&&q?' '+"uiCloseButtonDark":'')+(!o&&r?' '+"uiCloseButtonInverted":''));return (g.createDescriptor(g.DOM.a,Object.assign({},this.props,{ajaxify:s,href:"#",role:"button",'aria-label':l.tooltip,'data-hover':l.tooltip&&'tooltip','data-tooltip-alignh':l.tooltip&&'center',className:j(this.props.className,u),rel:t}),g.createDescriptor(h,{className:"uiCloseButtonHighContrast",src:"/images/chat/tab/close.png"})));}});e.exports=k;},null);
__d("LegacyMentionsInput.react",["Bootloader","CLogConfig","TypeaheadMetricsConfig","Event","Keys","React","ReactPropTypes","cx","PlaceholderListener"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b('PlaceholderListener');var o=l.createClass({displayName:'ReactLegacyMentionsInput',propTypes:{initialData:m.object,placeholder:m.string,datasource:m.object,ref:m.string,viewOptionsTypeObjects:m.object,viewOptionsTypeObjectsOrder:m.array,hashtags:m.bool,autoflip:m.bool,onEnterSubmit:m.func,onFocus:m.func,onBlur:m.func,onTypingStateChange:m.func,onPaste:m.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(this.getDOMNode());},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},submitComment:function(event){var p;if(event){p=event.target.value&&event.target.value.trim();}else{var q=this.refs.textarea.getDOMNode();if(q.value&&q.value!==q.placeholder)p=q.value;}p=p||'';var r={visibleValue:p,encodedValue:p};if(this._mentionsInput)r.encodedValue=this._mentionsInput.getRawValue().trim();var s=this.props.onEnterSubmit(r,event);if(s&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var p=event.nativeEvent,q=j.getKeyCode(p)==k.RETURN&&!j.$E(p).getModifiers().any,r=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&q&&!r)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(this.refs.root.getDOMNode());},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(p){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;g.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],function(q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){var ea=this.refs.textarea.getDOMNode();new v(ea);if(h.gkResults){var fa=da.getComment(this.props.replyCommentID),ga=fa?fa.fbid:null;s.trackMentionsInput(ea,ga);}if(this.props.onTypingStateChange){var ha=new ca(ea);ha.init();ha.subscribe('change',this.props.onTypingStateChange);}var ia={autoSelect:true,renderer:q,causalElement:ea,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)ia.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)ia.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ja=new w(this.props.datasource,{ctor:r,options:ia},{ctor:x},this.refs.typeahead.getDOMNode()),ka=[y,z];if(i.gkResults){var la=new ba({extraData:{event_name:'mention_metric_x'}});la.init(ja);}var ma=new aa({extraData:{event_name:'mentions',from_location:'comments'}});w.initNow(ja,ka,ma);this._mentionsInput=new u(p,ja,ea,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)t.set(ea,ea.value.length);if(this.props.onPaste)j.listen(ea,'paste',this.props.onPaste);this._bootloadingMentions=false;}.bind(this));},focus:function(){try{this.refs.textarea.getDOMNode().focus();}catch(p){}},render:function(){var p=(("textInput")+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput")+(' '+"DOMControl_placeholder"));return (l.createDescriptor(l.DOM.div,{ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput"},l.createDescriptor(l.DOM.div,{className:"highlighter"},l.createDescriptor(l.DOM.div,null,l.createDescriptor(l.DOM.span,{className:"highlighterContent hidden_elem"}))),l.createDescriptor(l.DOM.div,{ref:"typeahead",className:"uiTypeahead mentionsTypeahead"},l.createDescriptor(l.DOM.div,{className:"wrap"},l.createDescriptor(l.DOM.input,{type:"hidden",autoComplete:"off",className:"hiddenInput"}),l.createDescriptor(l.DOM.div,{className:"innerWrap"},l.createDescriptor(l.DOM.textarea,{ref:"textarea",name:"add_comment_text",className:p,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown,defaultValue:this.props.placeholder})))),l.createDescriptor(l.DOM.input,{type:"hidden",autoComplete:"off",className:"mentionsHidden",defaultValue:""})));}});e.exports=o;},null);
__d("LoadingIndicator.react",["React","Image.react","cx","keyMirror","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=j({white:true,blue:true,black:true}),n=j({small:true,medium:true,large:true}),o={white:{large:k('/images/loaders/indicator_blue_large.gif'),medium:k('/images/loaders/indicator_blue_medium.gif'),small:k('/images/loaders/indicator_blue_small.gif')},blue:{large:k('/images/loaders/indicator_white_large.gif'),small:k('/images/loaders/indicator_white_small.gif')},black:{large:k('/images/loaders/indicator_black.gif')}},p=g.createClass({displayName:'LoadingIndicator',render:function(){var q=this.props.color,r=this.props.size;if(!o[q])return g.createDescriptor(g.DOM.span,null);if(!o[q][r])return g.createDescriptor(g.DOM.span,null);var s=((this.props.showonasync?"uiLoadingIndicatorAsync":'')),t=o[q][r];return (g.createDescriptor(h,Object.assign({},this.props,{src:t,className:l(this.props.className,s)})));}});p.SIZES=n;p.COLORS=m;e.exports=p;},null);
__d("SnowflakePermalinkUtils",["URI"],function(a,b,c,d,e,f,g){var h=/\/[^/]+\/(albums\/([^/]+)|posts\/([a-zA-Z]+[^/]+))\/([^/]+\/)?/,i=/\/[^/]+\/(albums|posts)\/([^/]+)\/([^/]+\/)?/,j={isPermalinkURI:function(k){k=g(k);return h.test(k.getPath());},parseURI:function(k){if(!this.isPermalinkURI(k))return {};k=g(k);var l=k.getPath().match(i);return {setToken:l[2],entIdentifierToken:l[3],photoID:k.getQueryData().photo_id};}};e.exports=j;},null);
__d("StickerConstants",["keyMirror"],function(a,b,c,d,e,f,g){'use strict';var h={MOBILE_LIKE_STICKER_PACK_ID:227877430692340,GRAVEYARD_PACK_ID:604597256247273,LIKE_STICKER_ID:227878347358915,HOT_LIKE_SMALL_STICKER_ID:369239263222822,HOT_LIKE_MEDIUM_STICKER_ID:369239343222814,HOT_LIKE_LARGE_STICKER_ID:369239383222810,MRU_STICKER_PACK:599061016853145,SEARCH_PACK_ID:'680229632032514',SPRITE_PADDING:24,PayloadSource:{VIEW_ACTION:'view-action'},ActionTypes:g({ADD_PACK:null,REMOVE_PACK:null,SELECT_PACK:null,RESET_NUM_NEW_PACKS:null})};e.exports=h;},null);
__d("UFIClassNames",["cx"],function(a,b,c,d,e,f,g){e.exports={ACTOR_IMAGE:"img UFIActorImage _54ru",ROW:"UFIRow",UNSEEN_ITEM:"UFIUnseenItem"};},null);
__d("ImageBlock.react",["LeftRight.react","React","cloneWithProps","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(p){k(p.children&&(p.children.length===2||p.children.length===3));}function n(p){return (("img")+(' '+"_8o")+(p==='small'?' '+"_8r":'')+(p==='medium'?' '+"_8s":'')+(p==='large'?' '+"_8t":''));}var o=h.createClass({displayName:'ImageBlock',render:function(){m(this.props);var p=this.props.children[0],q=this.props.children[1],r=this.props.children[2],s=this.props.spacing||'small';p=i(p,{className:l(n(s),this.props.imageClassName)});var t=l(this.props.contentClassName,(("_42ef")+(s==='small'?' '+"_8u":'')));if(p.type===h.DOM.img.type){if(p.props.alt===undefined)p.props.alt='';}else if((p.type===h.DOM.a.type||p.type===h.DOM.link.type)&&p.props.tabIndex===undefined&&p.props.title===undefined&&p.props['aria-label']===undefined){p.props.tabIndex='-1';p.props['aria-hidden']='true';}var u;if(!r){u=h.createDescriptor(h.DOM.div,{className:t},q);}else u=h.createDescriptor(g,{className:t,direction:g.DIRECTION.right},q,r);return (h.createDescriptor(g,Object.assign({},this.props,{direction:g.DIRECTION.left}),p,u));}});e.exports=o;},null);
__d("UFIImageBlock.react",["ImageBlock.react","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:'UFIImageBlock',render:function(){return (h.createDescriptor(g,Object.assign({},this.props,{imageClassName:"UFIImageBlockImage",contentClassName:"UFIImageBlockContent"}),this.props.children));}});e.exports=j;},null);
__d("ReactLayeredComponentMixin",["ExecutionEnvironment","ReactCurrentOwner","React"],function(a,b,c,d,e,f,g,h,i){"use strict";var j={componentWillMount:function(){if(g.canUseDOM)this._layersContainer=document.createElement('div');},componentDidMount:function(){this._renderLayersIntoContainer();},componentDidUpdate:function(){this._renderLayersIntoContainer();},componentWillUnmount:function(){i.unmountComponentAtNode(this._layersContainer);},_renderLayersIntoContainer:function(){h.current=this;var k=this.renderLayers()||{};h.current=null;i.renderComponent(i.createDescriptor(i.DOM.div,null,k),this._layersContainer);}};e.exports=j;},null);
__d("UFIStickerButton.react",["Bootloader","ContextualLayerAutoFlip","React","ReactLayeredComponentMixin","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:'UFIStickerButton',propTypes:{onStickerSelected:i.PropTypes.func.isRequired},mixins:[j],getInitialState:function(){return {renderFlyout:null,flyoutShown:false,packID:null};},render:function(){var n="Attach a Sticker";return (i.createDescriptor(i.DOM.div,{'aria-label':n,className:"UFICommentStickerButton",'data-hover':"tooltip",'data-tooltip-alignh':"center",onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,ref:"link"},i.createDescriptor(i.DOM.div,{className:"UFICommentStickerIcon"})));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){!this._clickGuard&&this.setState({flyoutShown:true});return;}g.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],function(n,o){this.setState({flyoutShown:true,renderFlyout:function(){return {contextualDialog:i.createDescriptor(n,{alignment:"right",behaviors:{flip:h},className:"_5e-r",contextRef:"link",onBlur:this._hideFlyout,position:"above",shown:this.state.flyoutShown,width:278},i.createDescriptor(i.DOM.div,null,i.createDescriptor(o,{onPackSelect:function(p){this.setState({packID:p});}.bind(this),onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,isComments:true,packID:this.state.packID,shown:this.state.flyoutShown})))};}.bind(this)});}.bind(this));},_onStickerSelected:function(n,event){this.props.onStickerSelected(n,event);},_onEmoticonSelected:function(n){this.props.onEmoticonSelected(n);}});e.exports=m;},null);
__d("UFIAddComment.react",["ActorURI","AsyncRequest","Bootloader","ClipboardPhotoUploader","CloseButton.react","DOM","DOMContainer.react","getActiveElement","Event","Focus","HTML","Keys","LegacyMentionsInput.react","LitestandStoryInsertionStatus","LoadingIndicator.react","React","Run","SnowflakePermalinkUtils","Sticker.react","TrackingNodes","UFIClassNames","UFIImageBlock.react","UFIStickerButton.react","URI","cx","fbt","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){var ia="Write a comment...",ja="Write a reply...",ka="fcg fss UFICommentTip",la=19,ma='/ajax/ufi/upload/',na=80,oa='/ajax/ufi/sticker_preview/',pa=v.createClass({displayName:'UFIAddComment',propTypes:{contextArgs:v.PropTypes.object.isRequired,viewerActor:v.PropTypes.object.isRequired,allowPhotoAttachments:v.PropTypes.bool,allowStickerAttachments:v.PropTypes.bool,attachedPhoto:v.PropTypes.object,attachedSticker:v.PropTypes.object,hide:v.PropTypes.bool,initialData:v.PropTypes.object,isEditing:v.PropTypes.bool,isFirstComponent:v.PropTypes.bool,isLastComponent:v.PropTypes.bool,isQAndA:v.PropTypes.bool,mentionsDataSource:v.PropTypes.object,onCancel:v.PropTypes.func,onCommentSubmit:v.PropTypes.func,onTypingStateChange:v.PropTypes.func,replyCommentID:v.PropTypes.string,showSendOnEnterTip:v.PropTypes.bool,subtitle:v.PropTypes.any,targetID:v.PropTypes.string,withoutSeparator:v.PropTypes.bool},getInitialState:function(){if(this.props.attachedPhoto)this.props.contextArgs.attachedphoto=this.props.attachedPhoto;if(this.props.attachedSticker)this.props.contextArgs.attachedsticker=this.props.attachedSticker;return {attachedPhoto:this.props.attachedPhoto?this.props.attachedPhoto:null,attachedSticker:this.props.attachedSticker?this.props.attachedSticker:null,broadcastRequestTokenizer:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,isRecommending:false,recommendationEntries:[],searchSource:null};},_onKeyDown:function(event){if(this.props.isEditing&&o.getKeyCode(event.nativeEvent)===r.ESC)this.props.onCancel();if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){w.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var qa=n();if(o.getKeyCode(event.nativeEvent)===r.ESC)qa.blur();},_handleUnsavedChanges:function(){var qa=a.PageTransitions;if(qa){var ra=da.getNextURI(),sa=qa.getMostRecentURI();if(ra.getQueryData().hasOwnProperty('theater')||sa.getQueryData().hasOwnProperty('theater')||x.isPermalinkURI(ra)||x.isPermalinkURI(sa))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return "You haven't finished your comment yet. Do you want to leave without finishing?";},_blur:function(){if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var qa=new j(ma,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[qa.subscribe('upload_start',this._prepareForAttachedPhotoPreview),qa.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),qa.subscribe('upload_success',function(ra,sa){this._onPhotoUploadComplete(sa);}.bind(this))];qa.handlePaste(event);},_onEnterSubmit:function(qa,event){var ra=this.state.attachedPhoto||this.state.attachedSticker||this.state.recommendationEntries.length,sa=this.props.isEditing||ra;if(this.state.isLoadingPhoto){return false;}else if(!qa.encodedValue.trim()&&!sa)return false;if(ra){if(this.state.recommendationEntries.length){var ta=[],ua=[];this.state.recommendationEntries.forEach(function(va){ta.push(va.getUniqueID());ua.push(va.getTitle());});qa.recommendationIDs=ta;if(ua.length)qa.visibleValue+=' \u2014 '+ua.join(', ');}this.setState({isLoadingPhoto:false,isRecommending:false,attachedPhoto:null,attachedSticker:null,recommendationEntries:[]});qa.attachedPhoto=this.props.contextArgs.attachedphoto;qa.attachedSticker=this.props.contextArgs.attachedsticker;}else{qa.attachedPhoto=null;qa.attachedSticker=null;}this.props.onCommentSubmit(qa,event);return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(qa){qa.unsubscribe();});},componentWillMount:function(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=t.registerBlocker(function(){return this.state.isCommenting;}.bind(this));i.loadModules(["BroadcastRequestTokenizer.react","BroadcastRequestParam","WebAsyncSearchSource","XBroadcastRequestSearchSourceControllerURIBuilder"],function(qa,ra,sa,ta){var ua=new ta().setString(ra.SOURCE_OBJ_ID,this.props.contextArgs.ftentidentifier).getURI(),va=new sa({bootstrapRequests:[{uri:ua}],getAllForEmptyQuery:true,queryRequests:[{uri:ua}]});this.setState({broadcastRequestTokenizer:qa,searchSource:va});}.bind(this));},componentWillUnmount:function(){this._cancelCurrentSubscriptions();this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},focus:function(){if(this.refs&&this.refs.mentionsinput)this.refs.mentionsinput.focus();},render:function(){var qa=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,ra=null;if(this.props.isEditing){ra=v.createDescriptor(v.DOM.span,{className:ka},"Press Esc to cancel.");}else if(this.props.showSendOnEnterTip){ra=v.createDescriptor(v.DOM.span,{className:ka},"Press Enter to post.");}else if(this.props.subtitle)ra=v.createDescriptor(v.DOM.span,{className:ka},this.props.subtitle);var sa=null,ta=null,ua=this.state.attachedPhoto||this.state.attachedSticker,va=null;if(this.props.allowStickerAttachments&&!ua){var wa=this.props.isEditing?this._prepareForAttachedStickerPreview:this.onStickerSelected;ta=v.createDescriptor(ca,{onStickerSelected:wa,onEmoticonSelected:this._insertEmoticonIntoCommentText});}if(this.props.allowPhotoAttachments){va=this._onPaste;var xa=ua?"UFICommentPhotoAttachedIcon":"UFICommentPhotoIcon",ya="UFIPhotoAttachLinkWrapper _m";sa=v.createDescriptor(v.DOM.div,{ref:"PhotoInputContainer",className:ya,'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':"Attach a Photo"},v.createDescriptor(v.DOM.i,{ref:"PhotoInputControl",className:xa}));}var za=z.getTrackingInfo(z.types.ADD_COMMENT_BOX),ab=ga(aa.ACTOR_IMAGE,((!qa?"hidden_elem":''))),bb=v.createDescriptor(v.DOM.div,{className:"UFIReplyActorPhotoWrapper",onClick:this.focus},v.createDescriptor(v.DOM.img,{className:ab,src:this.props.viewerActor.thumbSrc,alt:this.props.viewerActor.name})),cb=ga(aa.ROW,((this.props.hide?"noDisplay":'')+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),db;if(!!this.props.replyCommentID){db=ja;}else if(this.props.isQAndA){db="Ask a question...";}else db=ia;var eb=this.props.contextArgs.entstream?this._blur:null,fb=this.props.contextArgs.viewoptionstypeobjects,gb=this.props.contextArgs.viewoptionstypeobjectsorder,hb=null;if(this.state.attachedSticker){var ib=this._getScaledDimensions(ua.metadata.height,ua.metadata.width);hb=v.createDescriptor(y,{animationTrigger:"load_and_hover",frameCount:ua.metadata.frameCount,framesPerCol:ua.metadata.framesPerCol,framesPerRow:ua.metadata.framesPerRow,spriteURI:ua.metadata.sprite_uri,sourceHeight:ib.height,sourceURI:ua.metadata.source_uri,sourceWidth:ib.width});}else if(this.state.attachedPhoto){var jb=ua.markupPreview;if(q.isHTML(jb.markup))jb=q.replaceJSONWrapper(jb.markup).getRootNode();hb=v.createDescriptor(m,null,jb);ra=null;}else if(this.state.isLoadingPhoto)hb=v.createDescriptor(u,{color:"white",className:"UFICommentPhotoAttachedPreviewLoadingIndicator",size:"medium"});var kb,lb=this.state.attachedPhoto?this._onRemoveAttachedPhotoPreviewClicked:this._onRemoveAttachedStickerPreviewClicked;if(hb!=null){var mb=null;if(this.state.attachedSticker){mb="Remove Sticker";}else if(this.state.attachedPhoto)mb="Remove Photo";kb=v.createDescriptor(v.DOM.div,{className:"UFICommentPhotoAttachedPreview pas"},hb,v.createDescriptor(k,{tooltip:mb,onClick:lb}));}var nb=this.props.allowStickerAttachments?ga("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",ob,pb,qb;if(this.props.contextArgs.mentionsinput){var rb=this.props.contextArgs.mentionsinput;if(rb.hasOwnProperty('inputComponent')){ob=rb.inputComponent;pb=rb.viewComponent;qb=rb.viewProps;}else ob=rb;}else ob=s;var sb=null;if(this.props.contextArgs.canaddrecommendation)if(this.state.broadcastRequestTokenizer){var tb=this.state.broadcastRequestTokenizer;sb=(v.createDescriptor(tb,{active:this.state.isRecommending,entries:this.state.recommendationEntries,onBlur:this._onRecommendationInputBlur,onSubmitAttempt:this._onRecommendationTokenizerSubmit,onTokenChange:this._onRecommendationTokenizerUpdate,onTriggerClick:this._onRecommendationTriggerClick,placeHolder:this.props.contextArgs.broadcastrequestplaceholder,searchSource:this.state.searchSource,sourceID:this.props.contextArgs.ftentidentifier}));}return (v.createDescriptor(v.DOM.li,{className:cb,onKeyDown:this._onKeyDown,'data-ft':za},v.createDescriptor(ba,{className:nb},bb,v.createDescriptor(v.DOM.div,{className:"UFICommentContainer"},v.createDescriptor(v.DOM.div,{className:"UFIInputContainer"},v.createDescriptor(ob,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:db,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:pb,viewProps:qb,viewOptionsTypeObjects:fb,viewOptionsTypeObjectsOrder:gb,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,onEnterSubmit:this._onEnterSubmit,onFocus:this.setState.bind(this,{isCommenting:true},null),onBlur:eb,onTypingStateChange:this.props.onTypingStateChange,onPaste:va}),v.createDescriptor(v.DOM.div,{className:"UFICommentAttachmentButtons clearfix"},sa,ta)),kb,sb,ra))));},_onRecommendationInputBlur:function(){if(!this.state.recommendationEntries.length)this.setState({isRecommending:false});},_onRecommendationTokenizerSubmit:function(event){this.refs.mentionsinput.submitComment(event);},_onRecommendationTokenizerUpdate:function(qa){this.setState({recommendationEntries:qa});},_onRecommendationTriggerClick:function(){this.setState({isRecommending:true});},componentDidUpdate:function(qa,ra,sa){if(!ra.attachedPhoto&&this.state.attachedPhoto||!ra.attachedSticker&&this.state.attachedSticker)this.refs.mentionsinput.focus();if(qa.viewerActor.id!==this.props.viewerActor.id){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;var qa=this.refs.PhotoInputContainer.getDOMNode(),ra=this.refs.PhotoInputControl.getDOMNode(),sa="Choose a file to upload",ta=l.create('input',{accept:'image/*',className:"_n",name:'file',type:'file',title:sa,'aria-label':sa});l.appendContent(ra,ta);var ua=o.listen(qa,'click',function(event){i.loadModules(["FileInput","FileInputUploader","Input"],function(va,wa,xa){var ya=new va(qa,ra,ta),za=new wa(undefined,qa).setURI(ma).setData(this._getPhotoUploadData());ya.subscribe('change',function(event){if(ya.getValue()){this._prepareForAttachedPhotoPreview();za.setInput(ya.getInput()).send();}}.bind(this));za.subscribe('success',function(ab,bb){ya.clear();this._onPhotoUploadComplete(bb.response);}.bind(this));za.subscribe('failure',function(ab,bb){ya.clear();this._onPhotoUploadComplete(bb.response);}.bind(this));p.setWithoutOutline(ra);this.setState({fileInput:ya,fileUploader:za});}.bind(this));ua.remove();}.bind(this));},_getScaledDimensions:function(qa,ra){var sa,ta,ua;if(ra>qa){ua=na/ra;sa=qa*ua;ta=ra*ua;}else{ua=na/qa;sa=qa*ua;ta=ra*ua;}return {height:Math.round(sa),width:Math.round(ta)};},_getPhotoUploadData:function(){var qa=this.props.viewerActor.id,ra={profile_id:qa,target_id:this.props.targetID,source:la};ra[g.PARAMETER_ACTOR]=qa;return ra;},_onPhotoUploadComplete:function(qa){if(!this.state.isLoadingPhoto)return;var ra=qa.getPayload();if(ra&&ra.fbid){this.props.contextArgs.attachedphoto=ra;this.setState({attachedPhoto:ra,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(qa){if(!this.state.isLoadingPhoto)return;var ra=qa.getPayload();if(ra&&ra.fbid){this.props.contextArgs.attachedsticker=ra;this.setState({attachedSticker:ra,isLoadingPhoto:false});}else{i.loadModules(["Dialog"],function(sa){var ta="Sticker Failed",ua="There was a problem attaching the sticker.";new sa().setTitle(ta).setBody(ua).setButtons(sa.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:false});},_prepareForAttachedStickerPreview:function(qa){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:true});new h(oa).setData({sticker_id:qa}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},onStickerSelected:function(qa,event){var ra={encodedValue:'',visibleValue:''};this.props.contextArgs.attachedsticker={fbid:qa};this.props.onCommentSubmit(ra,event);},_insertEmoticonIntoCommentText:function(qa){i.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(ra,sa,ta,ua){if(!this._selectionPosition)this._selectionPosition=new ua(this.refs.mentionsinput.refs.textarea.getDOMNode());var va=ra.symbols[qa];if(!va)return;var wa=this.refs.mentionsinput.refs.textarea.getDOMNode(),xa=ta.getInstance(wa),ya=xa.getValue(),za=sa.insertEmoticon(va,ya,this._selectionPosition.getPos());xa.setValue(za.result);this._selectionPosition.setPos(za.start,za.end);}.bind(this));}});e.exports=pa;},null);
__d("UFIAddCommentController",["Arbiter","copyProperties","MentionsInputUtils","Parent","UFIAddComment.react","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUserActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._replyCommentID=v;if(t){this.root=t;if(!this._contextArgs.rootid)this._contextArgs.rootid=t.id;this.render();n.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));n.subscribe('feedback-updated',function(x,y){var z=y.updates;if(this.id in z)this.render();}.bind(this));}n.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}h(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,timelinelogdata:this._contextArgs.timelinelogdata,rootid:this._contextArgs.rootid,attachedphoto:this._contextArgs.attachedphoto,attachedsticker:this._contextArgs.attachedsticker,giftoccasion:this._contextArgs.giftoccasion,recommendationIDs:t.recommendationIDs});this._contextArgs.attachedphoto=null;this._contextArgs.attachedsticker=null;p.getFeedbackTarget(this.id,function(u){var v=j.byTag(this.root,'form');if(v)g.inform('ufi/comment',{form:v,isranked:u.isranked});}.bind(this));return false;},_onTypingStateChange:function(t,u){},renderAddComment:function(t,u,v,w,x,y,z,aa,ba,ca){var da=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,ea=null,fa=q.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;return (l.createDescriptor(k,{hide:fa,replyCommentID:this._replyCommentID,viewerActor:t,targetID:u,initialData:ea,ref:x,withoutSeparator:y,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:v,onTypingStateChange:da,showSendOnEnterTip:w,allowPhotoAttachments:aa,allowStickerAttachments:ba,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:z,isQAndA:ca}));},renderEditComment:function(t,u,v,w,x,y,z,aa,ba){var ca=o.getComment(v),da;if(ca.attachment)da=ca.attachment.type=='sticker'?ca.attachment:null;var ea=i.generateDataFromTextWithEntities(ca.body);return (l.createDescriptor(k,{viewerActor:t,targetID:u,initialData:ea,onCommentSubmit:x,onCancel:y,mentionsDataSource:w,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true,editingCommentID:v,attachedPhoto:ca.photo_comment,attachedSticker:da,allowPhotoAttachments:z,allowStickerAttachments:aa,isQAndA:ba}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');p.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)m.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.ownerid,t.mentionsdatasource,t.showsendonentertip,null,null,t.subtitle,t.allowphotoattachments,t.allowstickerattachments,t.isqanda);this._addComment=l.renderComponent(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;},null);
__d("LegacyScrollableArea.react",["Bootloader","React","Style","cx","joinClasses","Scrollable"],function(a,b,c,d,e,f,g,h,i,j,k){b('Scrollable');var l="uiScrollableArea native",m="uiScrollableAreaWrap scrollable",n="uiScrollableAreaBody",o="uiScrollableAreaContent",p=h.createClass({displayName:'ReactLegacyScrollableArea',render:function(){var q={height:this.props.height};return (h.createDescriptor(h.DOM.div,Object.assign({},this.props,{className:k(this.props.className,l),ref:"root",style:Object.assign({},(this.props.style||{}),q)}),h.createDescriptor(h.DOM.div,{className:m},h.createDescriptor(h.DOM.div,{className:n,ref:"body"},h.createDescriptor(h.DOM.div,{className:o},this.props.children)))));},getArea:function(){return this._area;},componentDidMount:function(){g.loadModules(["ScrollableArea"],this._loadScrollableArea);},_loadScrollableArea:function(q){this._area=q.fromNative(this.refs.root.getDOMNode(),{fade:this.props.fade,persistent:this.props.persistent,shadow:this.props.shadow===undefined?true:this.props.shadow});var r=this.refs.body.getDOMNode();i.set(r,'width',this.props.width+'px');this.props.onScroll&&this._area.subscribe('scroll',this.props.onScroll);}});e.exports=p;},null);
__d("UFIAddCommentLink.react",["React","UFIClassNames","cx","fbt","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':g.PropTypes.string,isFirstCommentComponent:g.PropTypes.bool,isFirstComponent:g.PropTypes.bool,isLastCommentComponent:g.PropTypes.bool,isLastComponent:g.PropTypes.bool,isQAndA:g.PropTypes.bool,onClick:g.PropTypes.func},render:function(){var n=k(h.ROW,(("UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),o;if(this.props.isQAndA){o="Ask a question...";}else o="Write a comment...";return (g.createDescriptor(g.DOM.li,{className:n,'data-ft':this.props['data-ft']},g.createDescriptor(g.DOM.a,{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},o)));}});e.exports=m;},null);
__d("Badge.react",["BadgeHelper","React"],function(a,b,c,d,e,f,g,h){var i=h.createClass({displayName:'Badge',propTypes:{size:h.PropTypes.oneOf(g.sizes),type:h.PropTypes.oneOf(['verified','topcommenter','work'])},getDefaultProps:function(){return {size:'xsmall',type:'verified'};},render:function(){return (h.createDescriptor(h.DOM.span,{className:g.getClasses(this.props.size,this.props.type)}));}});e.exports=i;},null);
__d("HovercardLink",["Bootloader","URI"],function(a,b,c,d,e,f,g,h){var i={getBaseURI:function(){return h('/ajax/hovercard/hovercard.php');},constructEndpoint:function(j,k){return i.constructEndpointWithGroupAndLocation(j,k,null);},constructEndpointWithLocation:function(j,k){return i.constructEndpointWithGroupAndLocation(j,null,k);},constructEndpointWithGroupAndLocation:function(j,k,l){g.loadModules(["Hovercard"],function(){});var m=new h(i.getBaseURI()).setQueryData({id:j.id}),n={};if(j.weakreference&&k)n.group_id=k;if(l)n.hc_location=l;m.addQueryData({extragetparams:JSON.stringify(n)});return m;}};e.exports=i;},null);
__d("UntrustedLink",["DOM","Event","URI","UserAgent","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m,n,o,p){this.dom=m;this.url=m.href;this.hash=n;this.func_get_params=p||function(){return {};};h.listen(this.dom,'click',this.onclick.bind(this));h.listen(this.dom,'mousedown',this.onmousedown.bind(this));h.listen(this.dom,'mouseup',this.onmouseup.bind(this));h.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown(h.$E(o));}l.bootstrap=function(m,n,o,p){if(m.__untrusted)return;m.__untrusted=true;new l(m,n,o,p);};l.prototype.getRewrittenURI=function(){var m=k({u:this.url,h:this.hash},this.func_get_params(this.dom)),n=new i('/l.php').setSubdomain('www');if(new i(this.url).getProtocol()=='https'){return n.setQueryData(m).setProtocol('https');}else return n.setQueryData(m).setProtocol('http');};l.prototype.onclick=function(){setTimeout((function(){this.setHref(this.url);}).bind(this),100);this.setHref(this.getRewrittenURI());};l.prototype.onmousedown=function(m){if(m.button==2)this.setHref(this.getRewrittenURI());};l.prototype.onmouseup=function(){this.setHref(this.getRewrittenURI());};l.prototype.onmouseout=function(){this.setHref(this.url);};l.prototype.setHref=function(m){if(j.ie()<9){var n=g.create('span');g.appendContent(this.dom,n);this.dom.href=m;g.remove(n);}else this.dom.href=m;};e.exports=l;},null);
__d("Link.react",["React","UntrustedLink","URI","invariant","keyOf"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=k({url:null}),m=g.createClass({displayName:'Link',propTypes:{href:function(n,o,p){var q=n[o],r=typeof q;j(q==null||r==='string'||q instanceof i||(r==='object'&&l in q));}},getURIData:function(){var n=this.props.href,o=null;if(n instanceof i){n=n.toString();}else if(n&&typeof n==='object'){var p=n;n=p.url;o=p.shimhash;}return {href:n||'#',shimhash:o};},render:function(){var n=this.getURIData(),o=this.props.rel;if(n.shimhash)o=o?(o+' nofollow'):'nofollow';return (g.createDescriptor(g.DOM.a,Object.assign({},this.props,{href:n.href,rel:o,onMouseDown:this._handleMouseDown}),this.props.children));},_handleMouseDown:function(event){var n=this.getURIData();if(n.shimhash)h.bootstrap(this.getDOMNode(),n.shimhash);this.props.onMouseDown&&this.props.onMouseDown(event);}});e.exports=m;},null);
__d("URITruncator",["URI","tx"],function(a,b,c,d,e,f,g,h){var i=3;function j(k,l){var m="...",n=m.length;if(!k||l===undefined||k.length<=l||l<=n||k.toString().length<=n)return k;if(!g.isValidURI(k))return k.substring(0,l-n)+m;var o=new g(k),p=o.getOrigin();if(p.length>l-n)return p.substring(0,l-n)+m;var q=false;if(!!o.getFragment()){q=true;o.setFragment('');if(o.toString().length<=l-n)return o.toString()+m;}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=l-n)return o.toString()+m;}}}var u=o.getPath()+(q?m:''),v=u.split('/'),w=(p.length+u.length)-l,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+n+i<=z.length){var aa=z.length-1,ba=z.length-w-n,ca=/[a-zA-Z0-9]/;w+=n;while(w>0){while(aa>0&&ca.test(z[aa])){aa--;w--;}while(aa>0&&!ca.test(z[aa])){aa--;w--;}}if(aa===0)aa=ba-1;v[y]=z.substring(0,aa+1)+m;}else{x++;w-=z.length;if(x===1){w+=n;}else w--;}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,m);}var da=p+v.join('/');if(da.length>l)da=da.substring(0,l-n)+m;return da;}e.exports=j;},null);
__d("isRTL",["UnicodeBidi","UnicodeBidiDirection"],function(a,b,c,d,e,f,g,h){function i(j){return g.getDirection(j)===h.RTL;}e.exports=i;},null);
__d("Newline.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:'Newline',render:function(){return g.createDescriptor(g.DOM.br,Object.assign({},this.props));}});e.exports=h;},null);
__d("Text.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:'Text',render:function(){return (g.createDescriptor(g.DOM.span,Object.assign({},this.props),this.props.children));}});e.exports=h;},null);
__d("ES6StringUtils",[],function(a,b,c,d,e,f){var g={fromCodePoint:function(){var h=Array.prototype.slice.call(arguments,0);if(String.fromCodePoint)return String.fromCodePoint.apply(this,h);var i=[];for(var j=0;j<h.length;j++){var k=Number(h[j]);if(!isFinite(k)||k<0||1114111<k||Math.floor(k)!=k)throw RangeError('Invalid code point: '+h[j]);if(k<65536){i.push(String.fromCharCode(k));}else{k-=65536;i.push(String.fromCharCode((k>>10)+55296),String.fromCharCode((k%1024)+56320));}}return i.join('');},codePointAt:function(h){"use strict";if(String.prototype.codePointAt)return String.prototype.codePointAt.call(this,h);if(this===null||this===undefined)throw TypeError('Invalid context: '+this);var i=String(this),j=i.length;h=h?Number(h):0;if(h!=h)h=0;if(h<0||j<=h)return undefined;var k=i.charCodeAt(h);if(55296<=k&&k<=56319&&j>h+1){var l=i.charCodeAt(h+1);if(56320<=l&&l<=57343)return (k-55296)*1024+l-56320+65536;}return k;}};e.exports=g;},null);
__d("UnicodeUtils",["ES6StringUtils"],function(a,b,c,d,e,f,g){"use strict";var h=55296,i=57343,j=/[\uD800-\uDFFF]/;function k(s){return h<=s&&s<=i;}function l(s){return j.test(s);}function m(s,t){return 1+k(s.charCodeAt(t));}function n(s){if(!l(s))return s.length;var t=0;for(var u=0;u<s.length;u+=m(s,u))t++;return t;}function o(s,t,u){t=t||0;u=(u===undefined)?Infinity:(u||0);if(!l(s))return s.substr(t,u);var v=s.length;if(v<=0||t>v||u<=0)return '';var w=0;if(t>0){for(;t>0&&w<v;t--)w+=m(s,w);if(w>=v)return '';}else if(t<0){for(w=v;t<0&&0<w;t++)w-=m(s,w-1);if(w<0)w=0;}var x=v;if(u<v)for(x=w;u>0&&x<v;u--)x+=m(s,x);return s.substring(w,x);}function p(s,t,u){t=t||0;u=(u===undefined)?Infinity:(u||0);if(t<0)t=0;if(u<0)u=0;var v=Math.abs(u-t);t=(t<u)?t:u;return o(s,t,v);}function q(s){var t=[];for(var u=0;u<s.length;u+=m(s,u)){var v=g.codePointAt.call(s,u);t.push(v);}return t;}var r={isCodeUnitInSurrogateRange:k,getUTF16Length:m,strlen:n,substr:o,substring:p,getCodePoints:q};e.exports=r;},null);
__d("BaseTextWithEntities.react",["Newline.react","React","Text.react","UnicodeUtils"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(o,p){return o.offset-p.offset;}var l=/(\r\n|[\r\n])/,m=h.PropTypes.shape({length:h.PropTypes.number.isRequired,offset:h.PropTypes.number.isRequired}),n=h.createClass({displayName:'BaseTextWithEntities',statics:{propTypes:{aggregatedRanges:h.PropTypes.array,imageRanges:h.PropTypes.array,ranges:h.PropTypes.arrayOf(m),rangeRenderer:h.PropTypes.func.isRequired,text:h.PropTypes.string.isRequired,textRenderer:h.PropTypes.func.isRequired}},_getSortedRanges:function(){var o=[];[this.props.ranges,this.props.aggregatedRanges,this.props.imageRanges].filter(function(p){return p!=null;}).forEach(function(p){return o=o.concat(p);});return o.sort(k);},_renderText:function(o){var p=o.split(l),q={};for(var r=0;r<p.length;r++){var s=p[r];if(s)if(r%2===1){q[r]=h.createDescriptor(g,null);}else q[r]=this.props.textRenderer(p[r]);}return q;},render:function(){var o=0,p=this.props.text,q=this._getSortedRanges(),r={},s=q.length;for(var t=0,u=s;t<u;t++){var v=q[t];if(v.offset<o)continue;if(v.offset>o)r['text'+t]=this._renderText(j.substring(p,o,v.offset));var w=j.substr(p,v.offset,v.length);r['range'+t]=this.props.rangeRenderer(w,v);o=v.offset+v.length;}if(p.length>o)r.end=this._renderText(j.substr(p,o));return (h.createDescriptor(i,{className:this.props.className,style:this.props.style},r));}});e.exports=n;},null);
__d("TransformTextToDOMMixin",["DOMQuery","createArrayFrom","flattenArray"],function(a,b,c,d,e,f,g,h,i){var j=3,k={transform:function(l,m){return i(l.map(function(n){if(!g.isElementNode(n)){var o=n,p=[],q=this.MAX_ITEMS||j;while(q--){var r=m?[o].concat(m):[o],s=this.match.apply(this,r);if(!s)break;p.push(o.substring(0,s.startIndex));p.push(s.element);o=o.substring(s.endIndex);}o&&p.push(o);return p;}return n;}.bind(this)));},params:function(){var l=this;return {__params:true,obj:l,params:h(arguments)};}};e.exports=k;},null);
__d("Utf16",[],function(a,b,c,d,e,f){var g={decode:function(h){switch(h.length){case 1:return h.charCodeAt(0);case 2:return 65536|((h.charCodeAt(0)-55296)*1024)|(h.charCodeAt(1)-56320);}},encode:function(h){if(h<65536){return String.fromCharCode(h);}else return String.fromCharCode(55296+((h-65536)>>10))+String.fromCharCode(56320+(h%1024));}};e.exports=g;},null);
__d("SupportedEmoji",["cx","Utf16"],function(a,b,c,d,e,f,g,h){var i=new RegExp("([\u203C\u2049\u2100-\u21FF\u2300-\u27FF"+"\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|"+"\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])([\uFE00-\uFE0F])?"),j={126980:"_4_o0",127378:"_4_o1",127385:"_4_o2",127386:"_4_o3",127489:"_4_o4",127490:"_4_o5",127514:"_4_o6",127535:"_4_o7",127539:"_4_o8",127541:"_4_o9",127542:"_4_oa",127543:"_4_ob",127544:"_4_oc",127545:"_4_od",127546:"_4_oe",127568:"_4_of",127744:"_2b_",127746:"_2c0",127747:"_4_og",127748:"_4_oh",127749:"_4_oi",127750:"_4_oj",127751:"_4_ok",127752:"_4_ol",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127813:"_4_om",127814:"_4_on",127817:"_4_oo",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127832:"_4_op",127833:"_4_oq",127834:"_4_or",127835:"_4_os",127836:"_4_ot",127837:"_4_ou",127838:"_4_ov",127839:"_4_ow",127841:"_4_ox",127842:"_4_oy",127843:"_4_oz",127846:"_4_o-",127847:"_4_o_",127856:"_4_p0",127857:"_4_p1",127858:"_4_p2",127859:"_4_p3",127860:"_4_p4",127861:"_4_p5",127862:"_4_p6",127864:"_2cl",127866:"_2cm",127867:"_4_p7",127872:"_4_p8",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127884:"_4_p9",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127890:"_4_pa",127891:"_2cx",127905:"_4_pb",127906:"_4_pc",127908:"_4_pd",127909:"_4_pe",127910:"_4_pf",127911:"_4_pg",127912:"_4_ph",127913:"_4_pi",127915:"_4_pj",127916:"_4_pk",127917:"_4_pl",127919:"_4_pm",127921:"_4_pn",127925:"_2cy",127926:"_2cz",127927:"_4_po",127928:"_4_pp",127930:"_4_pq",127932:"_2c-",127934:"_4_pr",127935:"_4_ps",127936:"_4_pt",127937:"_4_pu",127942:"_4_pv",127944:"_4_pw",127968:"_4_px",127969:"_4_py",127970:"_4_pz",127971:"_4_p-",127973:"_4_p_",127974:"_4_q0",127975:"_4_q1",127976:"_4_q2",127977:"_4_q3",127978:"_4_q4",127979:"_4_q5",127980:"_4_q6",127981:"_4_q7",127983:"_4_q8",127984:"_4_q9",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128081:"_4_qa",128082:"_4_qb",128084:"_4_qc",128085:"_4_qd",128087:"_4_qe",128088:"_4_qf",128089:"_4_qg",128092:"_4_qh",128095:"_4_qi",128096:"_4_qj",128097:"_4_qk",128098:"_4_ql",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128132:"_4_qm",128133:"_2ey",128136:"_4_qn",128137:"_4_qo",128138:"_4_qp",128139:"_2ez",128140:"_4_qq",128141:"_4_qr",128142:"_4_qs",128143:"_2e-",128144:"_2e_",128145:"_2f0",128146:"_4_qt",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128158:"_4_qu",128159:"_4_qv",128160:"_4_qw",128161:"_4_qx",128162:"_2fb",128163:"_4_qy",128164:"_2fc",128166:"_2fd",128167:"_4_qz",128168:"_2fe",128169:"_2ff",128170:"_2fg",128176:"_4_q-",128178:"_4_q_",128180:"_4_r0",128181:"_4_r1",128186:"_4_r2",128187:"_2fh",128188:"_4_r3",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128214:"_4_r4",128221:"_4_r5",128222:"_2fm",128224:"_2fn",128225:"_4_r6",128226:"_4_r7",128227:"_4_r8",128232:"_4_r9",128233:"_4_ra",128234:"_4_rb",128235:"_4_rc",128236:"_4_rd",128237:"_4_re",128238:"_4_rf",128241:"_2fo",128242:"_2fp",128243:"_4_rg",128244:"_4_rh",128246:"_4_ri",128247:"_4_rj",128250:"_2fq",128251:"_4_rk",128252:"_4_rl",128264:"_4_rm",128269:"_4_rn",128270:"_4_ro",128271:"_4_rp",128272:"_4_rq",128273:"_4_rr",128274:"_4_rs",128275:"_4_rt",128276:"_2fr",128286:"_4_ru",128293:"_492",128296:"_4_rv",128299:"_4_rw",128304:"_4_rx",128305:"_4_ry",128306:"_4_rz",128307:"_4_r-",128308:"_4_r_",128309:"_4_s0",128310:"_4_s1",128311:"_4_s2",128312:"_4_s3",128313:"_4_s4",128507:"_4_s5",128508:"_4_s6",128509:"_4_s7",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128522:"_1q3y",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",128640:"_4_s8",128643:"_4_s9",128644:"_4_sa",128645:"_4_sb",128649:"_4_sc",128652:"_4_sd",128655:"_4_se",128657:"_4_sf",128658:"_4_sg",128659:"_4_sh",128661:"_4_si",128663:"_4_sj",128665:"_4_sk",128666:"_4_sl",128674:"_4_sm",128676:"_4_sn",128677:"_4_so",128679:"_4_sp",128684:"_4_sq",128685:"_4_sr",128690:"_4_ss",128697:"_4_st",128698:"_4_su",128699:"_4_sv",128700:"_4_sw",128701:"_4_sx",128702:"_4_sy",128704:"_4_sz",9642:"_4_s-",9643:"_4_s_",9723:"_4_t0",9724:"_4_t1",9725:"_4_t2",9726:"_4_t3",9742:"_4_t4",9757:"_2h0",9786:"_2h1",9855:"_4_t5",9888:"_4_t6",9889:"_2h2",9898:"_4_t7",9899:"_4_t8",9917:"_4_t9",9918:"_4_ta",9924:"_2h3",9940:"_4_tb",9962:"_4_tc",9970:"_4_td",9971:"_4_te",9973:"_4_tf",9978:"_4_tg",9981:"_4_th",9994:"_2h4",9995:"_2h5",9996:"_2h6",10060:"_4_ti",10062:"_4_tj",10145:"_4_tk",10175:"_4_tl",11013:"_4_tm",11014:"_4_tn",11015:"_4_to",11035:"_4_tp",11036:"_4_tq",11088:"_4_tr",11093:"_4_ts",12349:"_4_tt",8598:"_4_tu",8599:"_4_tv",8600:"_4_tw",8601:"_4_tx",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",9824:"_4_ty",9827:"_4_tz",9829:"_4_t-",9830:"_4_t_",9832:"_4_u0",9986:"_4_u1",9992:"_4_u2",9993:"_4_u3",10006:"_4_u4",10024:"_2hb",10035:"_4_u5",10036:"_4_u6",10067:"_4_u7",10068:"_4_u8",10069:"_4_u9",10071:"_4_ua",10084:"_2hc",10548:"_4_ub",10549:"_4_uc",12951:"_4_ud",12953:"_4_ue"},k=function(l){var m=0;while(l.length>0){var n=i.exec(l);if(!n||!n.length)return false;var o=n[1],p=n.index,q=h.decode(o),r=j[q];if(!r){m+=p+1;l=l.substr(p+1);continue;}n.index+=m;n.emoji=r;return n;}return false;};e.exports={findEmoji:k,emoji:j,_utf16Regex:i};},null);
__d("DOMEmoji",["CSS","JSXDOM","TransformTextToDOMMixin","SupportedEmoji","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={MAX_ITEMS:40,match:function(n){var o=j.findEmoji(n);if(!o||!o.length)return false;var p=o[0],q=o.index,r=o.emoji;return {startIndex:q,endIndex:q+p.length,element:this._element(r)};},_element:function(n){var o=h.span(null);g.addClass(o,"_1az");g.addClass(o,"_1a-");g.addClass(o,n);return o;}};e.exports=k(m,i);},null);
__d("EmoticonsList",[],function(a,b,c,d,e,f){e.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile","(:":"smile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","":"heart","^_^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin",":putnam:":"putnam","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like",":poop:":"poop"},symbols:{smile:":)",frown:":(",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",putnam:":putnam:",shark:"(^^^)",like:"(y)",poop:":poop:"},regexp:/(^|[\s'".])(:\)|:\-\)|:\]|=\)|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)|;\-\)|8\-\)|B\-\)|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)|3:\-\)|O:\)|O:\-\)|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)|:putnam:|\(\^\^\^\)|\(y\)|:like:|\(Y\)|:poop:)([\s'".,!?]|<br>|$)/};},null);
__d("DOMEmote",["CSS","EmoticonsList","JSXDOM","TransformTextToDOMMixin","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){var l={MAX_ITEMS:40,match:function(m){var n=h.regexp.exec(m);if(!n||!n.length)return false;var o=n[2],p=n.index+n[1].length;return {startIndex:p,endIndex:p+o.length,element:this._element(o,h.emotes[o])};},_element:function(m,n){var o=i.span({className:"emoticon_text",'aria-hidden':"true"},m),p=i.span({title:m,className:"emoticon"});g.addClass(p,'emoticon_'+n);return [o,p];}};e.exports=k(l,j);},null);
__d("transformTextToDOM",["createArrayFrom"],function(a,b,c,d,e,f,g){function h(i,j){var k=[i];j=g(j);j.forEach(function(l){var m,n=l;if(l.__params){m=l.params;n=l.obj;}k=n.transform(k,m);});return k;}e.exports=h;},null);
__d("emojiAndEmote",["DOMEmoji","DOMEmote","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i){var j=function(k){var l=[g,h];return i(k,l);};e.exports=j;},null);
__d("Emoji",["DOMEmoji","JSXDOM","emojiAndEmote","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i,j){var k={htmlEmojiAndEmote:function(l,m){return (h.span(null,i(l))).innerHTML;},htmlEmojiAndEmoteWithoutFBID:function(l,m){return (h.span(null,i(l,false))).innerHTML;},htmlEmoji:function(l){return (h.span(null,j(l,g))).innerHTML;}};e.exports=k;},null);
__d("Emote",["DOMEmote","JSXDOM","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i){var j={htmlEmoteWithoutFBID:function(k,l){return (h.span(null,i(k,g))).innerHTML;},htmlEmote:function(k,l){return (h.span(null,i(k,[g]))).innerHTML;}};e.exports=j;},null);
__d("TextWithEmoticons.react",["Emoji","Emote","React"],function(a,b,c,d,e,f,g,h,i){var j=i.createClass({displayName:'ReactTextWithEmoticons',render:function(){if(!this.props.renderEmoticons&&!this.props.renderEmoji)return i.createDescriptor(i.DOM.span,null,this.props.text);var k;if(this.props.renderEmoticons&&this.props.renderEmoji){k=g.htmlEmojiAndEmoteWithoutFBID(this.props.text);}else if(this.props.renderEmoticons){k=h.htmlEmoteWithoutFBID(this.props.text);}else k=g.htmlEmoji(this.props.text);return i.createDescriptor(i.DOM.span,{dangerouslySetInnerHTML:{__html:k}});}});e.exports=j;},null);
__d("TextWithEntities.react",["Link.react","React","BaseTextWithEntities.react","TextWithEmoticons.react"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(m){return (m).replace(/<3\b|&hearts;/g,'\u2665');}var l=h.createClass({displayName:'TextWithEntities',_renderText:function(m){if(this.props.renderEmoticons||this.props.renderEmoji){return (h.createDescriptor(j,{text:m,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));}else return k(m);},_renderRange:function(m,n){if(this.props.interpolator){return this.props.interpolator(m,n);}else return (h.createDescriptor(g,{href:n.entity},m));},render:function(){return (h.createDescriptor(i,Object.assign({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text})));}});e.exports=l;},null);
__d("SeeMore.react",["React","cx","tx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'SeeMore',getInitialState:function(){return {isCollapsed:true};},handleClick:function(){this.setState({isCollapsed:false});},render:function(){var k=this.state.isCollapsed,l=k?g.createDescriptor(g.DOM.span,{className:"_5uzb"},"..."):null,m=this.props.children[0],n=k?null:g.createDescriptor(g.DOM.span,null,this.props.children[1]),o=!k?null:g.createDescriptor(g.DOM.a,{className:"_5v47 fss",onClick:this.handleClick,href:"#",role:"button"},"See More");return (g.createDescriptor(g.DOM.span,{className:this.props.className},m,l,o,n));}});e.exports=j;},null);
__d("findSplitPointForText",[],function(a,b,c,d,e,f){function g(h,i,j){var k=null,l=h.split('\n');if(i&&h.length>i)k=i;if(j&&l.length>j){var m=l.slice(0,j).join('\n').length;if(k!==null){k=Math.min(m,k);}else k=m;}return k;}e.exports=g;},null);
__d("partitionTextAndRanges",[],function(a,b,c,d,e,f){function g(j,k){var l=j.offset+j.length;return k>j.offset&&k<l;}function h(j,k){for(var l=0;l<j.length;l++){var m=j[l];if(g(m,k))return m.offset;}return k;}var i=function(j,k,l){var m=[],n=[],o=h(k,l);for(var p=0;p<k.length;p++){var q=k[p];if(q.offset<o){m.push(q);}else n.push({offset:q.offset-o,length:q.length,entity:q.entity});}return {before:{ranges:m,text:j.substr(0,o)},after:{ranges:n,text:j.substr(o)}};};e.exports=i;},null);
__d("TruncatedTextWithEntities.react",["React","TextWithEntities.react","SeeMore.react","findSplitPointForText","partitionTextAndRanges"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:'TruncatedTextWithEntities',render:function(){var m=this.props.text||'',n=this.props.ranges||[];m=m.replace(/\s*$/,'');var o=this.props.maxLines,p=this.props.maxLength;if(p&&m.length>p){var q=this.props.truncationPercent||.6;p=Math.floor(q*p);}var r=j(m,p,o);if(r!==null){while(m[r-1]==='\n')r--;var s=k(m,n,r);return (g.createDescriptor(g.DOM.span,{'data-ft':this.props['data-ft'],dir:this.props.dir},g.createDescriptor(i,{className:this.props.className},g.createDescriptor(h,{interpolator:this.props.interpolator,ranges:s.before.ranges,aggregatedRanges:this.props.aggregatedRanges,text:s.before.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),g.createDescriptor(h,{interpolator:this.props.interpolator,ranges:s.after.ranges,aggregatedRanges:this.props.aggregatedRanges,text:s.after.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}))));}else return (g.createDescriptor(g.DOM.span,{'data-ft':this.props['data-ft'],dir:this.props.dir},g.createDescriptor(h,{className:this.props.className,interpolator:this.props.interpolator,ranges:n,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:m,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})));}});e.exports=l;},null);
__d("UFIActor.react",["Badge.react","Focus","HovercardLink","Locale","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=" \u00b7 ",n=k.createClass({displayName:'UFIActor',propTypes:{author:k.PropTypes.object.isRequired,'data-ft':k.PropTypes.string,focusOnMount:k.PropTypes.bool,showHovercard:k.PropTypes.bool},componentDidMount:function(){if(this.props.focusOnMount)h.setWithoutOutline(this.refs.authorName.getDOMNode());},render:function(){var o=this.props.author,p=j.isRTL()?'rtl':'ltr',q=o.uri?k.createDescriptor(k.DOM.a,{className:"UFICommentActorName",'data-hovercard':this.props.showHovercard?i.constructEndpointWithLocation(o,'ufi').toString():null,'data-ft':this.props['data-ft'],dir:p,href:o.uri,ref:"authorName"},o.name):k.createDescriptor(k.DOM.span,{className:"UFICommentActorName",dir:p,ref:"authorName"},o.name);return (k.createDescriptor(k.DOM.span,null,q,k.Children.map(this.props.children,function(r){return r?[r instanceof g?"":m,r]:null;})));}});e.exports=n;},null);
__d("UFICommentLikeCount.react",["NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=function(o,p){var q=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:o.fbid,comment_from:o.author,comment_likecount:o.likecount||0,comment_id:o.id,cache_buster:o.likeconfirmhash||0});if(p)q.addQueryData({viewas:p});return q;},n=j.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:j.PropTypes.object.isRequired,contextArgs:j.PropTypes.object.isRequired},render:function(){var o=this.props.comment,p=g.formatIntegerWithDelimiter(o.likecount||0,this.props.contextArgs.numberdelimiter),q=i.LIKES,r={id:o.fbid},s=m(this.props.comment,this.props.contextArgs.viewas),t=j.createDescriptor(j.DOM.i,{className:"UFICommentLikeIcon"}),u=j.createDescriptor(j.DOM.span,null,p),v=(("UFICommentLikeButton")+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''));return (j.createDescriptor(j.DOM.a,{ajaxify:h.constructDialogURI(q,r).toString(),className:v,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':s.toString(),href:h.constructPageURI(q,r).toString(),rel:"dialog",role:"button"},t,u));}});e.exports=n;},null);
__d("Timestamp.react",["LiveTimer","joinClasses","React"],function(a,b,c,d,e,f,g,h,i){var j=i.createClass({displayName:'Timestamp',render:function(){var k=g.renderRelativeTimeToServer(this.props.time,this.props.shorten);return (i.createDescriptor(i.DOM.abbr,Object.assign({},this.props,{className:h(this.props.className,"livetimestamp"),title:this.props.verbose,'data-utime':this.props.time,'data-shorten':this.props.shorten?true:null}),k.text||this.props.text));}});e.exports=j;},null);
__d("TooltipMixin",["React","Tooltip","DOM"],function(a,b,c,d,e,f,g,h,i){var j={propTypes:{tooltip:g.PropTypes.oneOfType([g.PropTypes.component,g.PropTypes.string]).isRequired,position:g.PropTypes.oneOf(['above','below','left','right']),alignH:g.PropTypes.oneOf(['left','center','right'])},componentDidMount:function(){this._setTooltip();},componentDidUpdate:function(){this._setTooltip();},_setTooltip:function(){var k=this.props.tooltip;if(typeof k!=='string'){k=i.create('div');g.renderComponent(this.props.tooltip,k);}h.set(this.getDOMNode(),k,this.props.position,this.props.alignH);}};e.exports=j;},null);
__d("TooltipLink.react",["React","TooltipMixin"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'TooltipLink',mixins:[h],render:function(){return g.createDescriptor(g.DOM.a,Object.assign({},this.props),this.props.children);}});e.exports=i;},null);
__d("HelpLink.react",["React","joinClasses","TooltipLink.react"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'HelpLink',render:function(){return (g.createDescriptor(i,Object.assign({},this.props,{className:h(this.props.className,"uiHelpLink mls")}),undefined));}});e.exports=j;},null);
__d("UFICreatorInfo.react",["HelpLink.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=h.createClass({displayName:'UFICreatorInfo',propTypes:{creatorID:h.PropTypes.number.isRequired,creatorType:h.PropTypes.string.isRequired,creatorName:h.PropTypes.string.isRequired,labelType:h.PropTypes.string.isRequired,pageID:h.PropTypes.number.isRequired,profileURI:h.PropTypes.string},render:function(){var m,n=this.getCreatorLink();switch(this.props.labelType){case 'commented':m=k._("Commented on by {creator}",[k.param("creator",n)]);break;case 'edited_comment':m=k._("Edited by {creator}",[k.param("creator",n)]);break;case 'sent_message':m=k._("Sent by {creator}",[k.param("creator",n)]);break;default:return;}return (h.createDescriptor(h.DOM.span,null,m,h.createDescriptor(g,{tooltip:this.getHelpText()})));},getCreatorLink:function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (h.createDescriptor(h.DOM.a,{className:"uiLinkSubtle",'aria-label':this.getTooltipText(),'data-hover':"tooltip"},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (h.createDescriptor(h.DOM.span,{className:"uiLinkSubtle"},h.createDescriptor(h.DOM.img,{src:"/images/privacy/cant-see.png",width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (h.createDescriptor(h.DOM.span,{className:"uiLinkSubtle"},this.props.creatorName));}},getTooltipText:function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}},getProfileLinkWithHovercard:function(){if(!this.props.profileURI)return h.createDescriptor(h.DOM.span,null,this.props.creatorName);var m=new i('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (h.createDescriptor(h.DOM.a,{className:"uiLinkSubtle",'data-hovercard':m,href:this.props.profileURI},this.props.creatorName));},getApplicationText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'edited_comment':return (k._("This was edited by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'sent_message':return (k._("This was sent by someone using {application}.",[k.param("application",this.props.creatorName)]));}},getIndirectAdminText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'edited_comment':return (k._("This was edited by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'sent_message':return (k._("This was sent by someone from {page}.",[k.param("page",this.props.creatorName)]));}},getGrayAccountText:function(){switch(this.props.labelType){case 'commented':return ("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return ("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return ("This was sent by someone who doesn't have a personal Facebook account.");}},getHelpText:function(){switch(this.props.labelType){case 'commented':return ("Only people who manage this Page can see who posted a comment");case 'edited_comment':return ("Only people who manage this Page can see who edited a comment");case 'sent_message':return ("Only people who manage this Page can see who sent a message");}}});e.exports=l;},null);
__d("UFICommentMetadata.react",["Bootloader","React","Timestamp.react","TrackingNodes","UFIConstants","URI","UFICreatorInfo.react","cx","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";var p=k.UFIStatus,q=' \u00b7 ',r="UFIFailureMessageIcon",s="UFIFailureMessage",t="uiLinkSubtle",u=function(w){var x=w.status;return x===p.FAILED_ADD||x===p.FAILED_EDIT;},v=h.createClass({displayName:'UFICommentMetadata',propTypes:{comment:h.PropTypes.object.isRequired,onRetrySubmit:h.PropTypes.func,permalink:h.PropTypes.string,shortenTimestamp:h.PropTypes.bool,showPermalink:h.PropTypes.bool},render:function(){var w=this.props.comment,x=this.props.permalink,y=this.props.onRetrySubmit,z,aa;if(u(w)){z=[h.createDescriptor(h.DOM.span,{key:"failure",className:s},h.createDescriptor(h.DOM.i,{className:r}),"Unable to post comment."),w.allowRetry&&y?[' ',h.createDescriptor(h.DOM.a,{key:"rety-submit",onClick:y,href:"#",role:"button"},"Try Again")]:null];}else{var ba=this.props.showPermalink?x:null,ca=j.getTrackingInfo(j.types.SOURCE);aa=h.createDescriptor(h.DOM.a,{key:"timestamp-message",className:t,href:ba,'data-ft':ca},h.createDescriptor(i,{shorten:this.props.shortenTimestamp,time:w.timestamp.time,text:w.timestamp.text,verbose:w.timestamp.verbose}));}var da=null;if(w.originalTimestamp){var ea=new l('/ajax/edits/browser/comment').addQueryData({comment_token:w.id}).toString();da=[q,h.createDescriptor(h.DOM.a,{ajaxify:ea,'aria-label':"Show edit history",className:"uiLinkSubtle",'data-hover':"tooltip",href:"#",key:"edit-link",ref:"EditLink",rel:"dialog",role:"button",title:"Show edit history"},"Edited")];}var fa=null;if(w.creator_data)fa=[h.createDescriptor(m,{creatorID:w.creator_data.creatorID,creatorType:w.creator_data.creatorType,creatorName:w.creator_data.creatorName,labelType:w.creator_data.labelType,pageID:w.creator_data.pageID,profileURI:w.creator_data.profileURI}),q];return (h.createDescriptor(h.DOM.span,null,fa,aa,z,da));},componentWillUpdate:function(w){var x=this.props.comment,y=w.comment;if(!x.editnux&&!!y.editnux)g.loadModules(["LegacyContextualDialog"],function(z){var aa=new z();aa.init(y.editnux).setContext(this.refs.EditLink.getDOMNode()).setWidth(300).setPosition('below').show();}.bind(this));}});e.exports=v;},null);
__d("UFIReplyLink.react",["React","tx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'UFIReplyLink',propTypes:{onClick:g.PropTypes.func},render:function(){return (g.createDescriptor(g.DOM.a,{className:"UFIReplyLink",href:"#",onClick:this.props.onClick},"Reply"));}});e.exports=i;},null);
__d("UFISpamCount",["UFISpamCountImpl"],function(a,b,c,d,e,f){e.exports=b('UFISpamCountImpl').module||{enabled:false};},null);
__d("UFICommentActions.react",["React","TrackingNodes","UFICommentLikeCount.react","UFICommentMetadata.react","UFIConstants","UFIReplyLink.react","UFISpamCount","cx","fbt","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q=k.UFIStatus,r=' \u00b7 ',s="fsm fwn fcg UFICommentActions",t="UFIDeletedMessageIcon",u="UFIDeletedMessage",v=g.createClass({displayName:'UFICommentActions',propTypes:{comment:g.PropTypes.object.isRequired,contextArgs:g.PropTypes.object.isRequired,feedback:g.PropTypes.object.isRequired,hideAsSpamForPageAdmin:g.PropTypes.bool,markedAsSpamHere:g.PropTypes.bool,onAlsoRecommendToggle:g.PropTypes.func,onCommentLikeToggle:g.PropTypes.func,onCommentReply:g.PropTypes.func,onMarkAsNotSpam:g.PropTypes.func,onPreviewRemove:g.PropTypes.func,onRetrySubmit:g.PropTypes.func,permalink:g.PropTypes.string,shortenTimestamp:g.PropTypes.bool,showPermalink:g.PropTypes.bool,showReplyLink:g.PropTypes.bool,viewerCanMarkNotSpam:g.PropTypes.bool},render:function(){var w=this.props,x=w.comment,y=w.permalink,z=w.feedback,aa=w.markedAsSpamHere,ba=x.status===q.SPAM_DISPLAY,ca=w.showReplyLink,da=w.hideAsSpamForPageAdmin,ea,fa,ga,ha,ia,ja,ka,la=!x.islocal&&x.status!==q.LIVE_DELETED;if(la){if(ba&&!aa){if(w.viewerCanMarkNotSpam)ea=g.createDescriptor(g.DOM.a,{onClick:w.onMarkAsNotSpam,className:"UFICommentNotSpamLink",href:"#",role:"button"},"Unhide");if(da&&z.isthreaded&&x.cancomment&&ca)ia=g.createDescriptor(l,{comment:x,onClick:w.onCommentReply,contextArgs:w.contextArgs});}else{if(x.viewercanlike){var ma=h.getTrackingInfo(x.hasviewerliked?h.types.UNLIKE_LINK:h.types.LIKE_LINK),na=x.hasviewerliked?"Unlike this comment":"Like this comment";fa=g.createDescriptor(g.DOM.a,{className:"UFILikeLink",'data-ft':ma,href:"#",onClick:w.onCommentLikeToggle,role:"button",title:na},x.hasviewerliked?"Unlike":"Like");}if(z.isthreaded&&x.cancomment&&ca)ia=g.createDescriptor(l,{comment:x,contextArgs:w.contextArgs,onClick:w.onCommentReply});if(x.likecount>0)ga=g.createDescriptor(i,{comment:x,contextArgs:w.contextArgs});if(x.spamcount&&m.enabled)ha=g.createDescriptor(m,{count:x.spamcount});}if(w.contextArgs.canaddrecommendation&&x.hasrecommendation){var oa=("Also recommend the recommendations in this comment");if(x.hasviewerrecommended){ka=g.createDescriptor(g.DOM.span,null,"Recommended");}else ka=g.createDescriptor(g.DOM.a,{className:"UFIRecommendLink",href:"#",onClick:w.onAlsoRecommendToggle,role:"button",title:oa},"Recommend");}if(x.attachment&&x.attachment.type=="share"&&x.canremove)ja=g.createDescriptor(g.DOM.a,{href:"#",onClick:w.onPreviewRemove,role:"button"},"Remove Preview");}var pa=g.createDescriptor(j,{comment:x,onRetrySubmit:w.onRetrySubmit,permalink:y,shortenTimestamp:w.shortenTimestamp,showPermalink:w.showPermalink}),qa;if(z.isqanda){qa={likeCount:ga,spamCount:ha,likeToggle:fa,commentReply:ia,spamToggle:ea,metadata:pa,removePreview:ja};}else if(w.contextArgs.entstream){qa={metadata:pa,likeToggle:fa,likeCount:ga,alsoRecommend:ka,commentReply:ia,spamCount:ha,spamToggle:ea,removePreview:ja};}else if(z.isthreaded){qa={likeToggle:fa,commentReply:ia,spamToggle:ea,removePreview:ja,likeCount:ga,spamCount:ha,metadata:pa};}else qa={metadata:pa,likeToggle:fa,likeCount:ga,alsoRecommend:ka,spamCount:ha,commentReply:ia,spamToggle:ea,removePreview:ja};if(x.status===q.LIVE_DELETED){var ra=g.createDescriptor(g.DOM.span,{className:u},g.createDescriptor(g.DOM.i,{className:t,'data-hover':"tooltip",'aria-label':"Comment deleted"}));qa.deletionWarning=ra;}var sa=true,ta={};for(var ua in qa){var va=qa[ua];if(va){ta[ua]=sa?va:{MIDDOT:r,action:va};sa=false;}}return (g.createDescriptor(g.DOM.div,{className:s},ta));}});e.exports=v;},null);
__d("UFICommentAttachment.react",["DOM","HTML","React","Sticker.react"],function(a,b,c,d,e,f,g,h,i,j){var k=80,l=i.createClass({displayName:'UFICommentAttachment',propTypes:{comment:i.PropTypes.object.isRequired},_attachmentFromCommentData:function(m){return m.photo_comment||m.attachment;},_getScaledDimensions:function(m,n){var o,p,q;if(n>m){q=k/n;o=m*q;p=n*q;}else{q=k/m;o=m*q;p=n*q;}return {height:Math.round(o),width:Math.round(p)};},componentDidMount:function(){var m=this._attachmentFromCommentData(this.props.comment);if(m)this.renderAttachment(m);},shouldComponentUpdate:function(m,n){var o=this._attachmentFromCommentData(this.props.comment),p=this._attachmentFromCommentData(m.comment);if(!o&&!p)return false;if(!o||!p||o.markup!=p.markup){return true;}else return false;},componentDidUpdate:function(m){var n=this._attachmentFromCommentData(this.props.comment);if(n.type!=='sticker')this.renderAttachment(n);},renderAttachment:function(m){if(m&&this.refs&&this.refs.contents&&m.markup){var n=m.markup;if(h.isHTML(n.markup))n=h.replaceJSONWrapper(n.markup).getRootNode();var o=n.parentNode,p=this.refs.contents.getDOMNode();if(o&&o!==p)n=n.cloneNode(true);g.setContent(p,n);}},renderSticker:function(m){var n=this._getScaledDimensions(m.metadata.height,m.metadata.width);return (i.createDescriptor(j,{animationTrigger:"load_and_hover",frameCount:m.metadata.frameCount,framesPerCol:m.metadata.framesPerCol,framesPerRow:m.metadata.framesPerRow,spriteURI:m.metadata.sprite_uri,sourceHeight:n.height,sourceURI:m.metadata.source_uri,sourceWidth:n.width}));},render:function(){var m=this._attachmentFromCommentData(this.props.comment);if(m)if(m&&m.type==='sticker'){return this.renderSticker(m);}else return i.createDescriptor(i.DOM.div,{ref:"contents"});return i.createDescriptor(i.DOM.span,null);}});e.exports=l;},null);
__d("XUIAbstractGlyphButton.react",["AbstractButton.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:'XUIAbstractGlyphButton',render:function(){return (h.createDescriptor(g,Object.assign({},this.props,{className:j(this.props.className,"_5upp")})));}});e.exports=k;},null);
__d("XUICloseButton.react",["XUIAbstractGlyphButton.react","React","cx","tx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'XUICloseButton',getDefaultProps:function(){return {size:'medium',shade:'dark'};},render:function(){var m=this.props.size,n=this.props.shade,o=(("_50zy")+(m==='small'?' '+"_50zz":'')+(m==='medium'?' '+"_50-0":'')+(n==='light'?' '+"_50z_":'')+(n==='dark'?' '+"_50z-":'')),p=this.props.label,q=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!p)p="Remove";q=p;}return (h.createDescriptor(g,Object.assign({},this.props,{label:p,title:q,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:k(this.props.className,o)})));}});e.exports=l;},null);
__d("XUIEditButton.react",["XUIAbstractGlyphButton.react","React","cx","tx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'XUIEditButton',render:function(){var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!m)m="Edit";n=m;}return (h.createDescriptor(g,Object.assign({},this.props,{label:m,title:n,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:k(this.props.className,"_5upq _5upr")})));}});e.exports=l;},null);
__d("UFICommentMenu.react",["Bootloader","React","XUICloseButton.react","XUIEditButton.react","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m,n,o,p=k({EDIT:true,CLOSE:true}),q=h.createClass({displayName:'UFICommentMenu',propTypes:{menuData:h.PropTypes.array,menuType:h.PropTypes.oneOf(Object.keys(p)).isRequired,onAction:h.PropTypes.func,onClick:h.PropTypes.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});g.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(r,s,t){l=r,m=s;n=t;o=n.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(r,s,t){if(this.state.needsExpand&&!s.needsExpand)return false;return true;},render:function(){var r=null;if(this.props.menuType===p.EDIT){r=j;}else r=i;if(this.props.menuData&&this.state.bootloaded){var s=this.props.menuData.map(function(u){return (h.createDescriptor(o,{value:u.value},u.label));}),t=h.createDescriptor(n,{onItemClick:this.props.onAction},s);return (h.createDescriptor(m,Object.assign({},this.props,{alignh:"right",layerBehaviors:[l],menu:t,ref:"menu"}),h.createDescriptor(r,{href:"#",onClick:this.onClickGuard})));}return h.createDescriptor(r,Object.assign({},this.props,{href:"#",onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});q.MenuType=p;e.exports=q;},null);
__d("UFISocialContext.react",["HovercardLink","ProfileBrowserLink","ProfileBrowserTypes","React","URI","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=27,n=j.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:j.PropTypes.object.isRequired,otherMutualCount:j.PropTypes.number.isRequired,topMutualFriend:j.PropTypes.object.isRequired},render:function(){var o=this.props.topMutualFriend,p=this.props.otherMutualCount,q=this.props.commentAuthor,r=g.constructEndpoint(o).toString(),s=j.createDescriptor(j.DOM.a,{href:o.uri,'data-hovercard':r,key:"top"},o.name),t=q.name.length+o.name.length,u;if(p===0){u=l._("Friends with {name}",{name:s});}else if(t<m){var v;if(p==1){v="1 other";}else v=l._("{count} others",{count:p});u=l._("Friends with {name} and {others}",{name:s,others:this.getOthersLink(v,q,o)});}else{var w=l._("{count} mutual friends",{count:p+1});u=this.getOthersLink(w,q);}return (j.createDescriptor(j.DOM.span,{className:"UFICommentSocialContext"},u));},getOthersLink:function(o,p,q){var r=i.MUTUAL_FRIENDS,s={uid:p.id},t=new k('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:p.id});if(q)t.addQueryData({exclude_id:q.id});var u=h.constructDialogURI(r,s).toString();return (j.createDescriptor(j.DOM.a,{ajaxify:u,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':t.toString(),href:h.constructPageURI(r,s).toString(),key:"others",rel:"dialog"},o));}});e.exports=n;},null);
__d("UFIComment.react",["Badge.react","Bootloader","HovercardLink","HovercardLinkInterpolator","Locale","React","TrackingNodes","TruncatedTextWithEntities.react","UFIActor.react","UFIClassNames","UFICommentActions.react","UFICommentAttachment.react","UFICommentMenu.react","UFIConfig","UFIConstants","UFIImageBlock.react","UFISocialContext.react","UnicodeBidi","URI","XUICloseButton.react","cx","joinClasses","keyMirror","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){"use strict";var ea=u.UFIStatus,fa=ca({edit:true,hide:true,remove:true}),ga="UFITranslateLink",ha="UFITranslatedText",ia="pls",ja="fcg",ka=null,la=function(oa){var pa=oa.status;return pa===ea.FAILED_ADD||pa===ea.FAILED_EDIT;};function ma(oa){return oa.commenterIsFOF!==undefined&&oa.userIsMinor!==undefined&&oa.reportLink!==undefined;}var na=l.createClass({displayName:'UFIComment',propTypes:{authorProfiles:l.PropTypes.object.isRequired,comment:l.PropTypes.object.isRequired,contextArgs:l.PropTypes.object.isRequired,feedback:l.PropTypes.object.isRequired,'data-ft':l.PropTypes.string,focusOnMount:l.PropTypes.bool,hasPartialBorder:l.PropTypes.bool,hideAsSpamForPageAdmin:l.PropTypes.bool,isFeatured:l.PropTypes.bool,isFirst:l.PropTypes.bool,isFirstCommentComponent:l.PropTypes.bool,isFirstComponent:l.PropTypes.bool,isLast:l.PropTypes.bool,isLastCommentComponent:l.PropTypes.bool,isLastComponent:l.PropTypes.bool,isLocallyComposed:l.PropTypes.bool,isReply:l.PropTypes.bool,onAlsoRecommendToggle:l.PropTypes.func,onBlingBoxClick:l.PropTypes.func,onCommentLikeToggle:l.PropTypes.func,onCommentReply:l.PropTypes.func,onCommentTranslate:l.PropTypes.func,onEdit:l.PropTypes.func,onHideAsSpam:l.PropTypes.func,onInlineBan:l.PropTypes.func,onMarkAsNotSpam:l.PropTypes.func,onPreviewRemove:l.PropTypes.func,onRemove:l.PropTypes.func,onRetrySubmit:l.PropTypes.func,onUndoInlineBan:l.PropTypes.func,permalink:l.PropTypes.string,shortenTimestamp:l.PropTypes.bool,showPermalink:l.PropTypes.bool,showRemoveReportMenu:l.PropTypes.bool,showReplies:l.PropTypes.bool,showReplyLink:l.PropTypes.bool,viewerIsAuthor:l.PropTypes.bool},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onRemove(event);this.setState({isInlinePageDeleted:true});},_onInlineBan:function(event){this.props.onInlineBan(event);this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.setState({isInlineBanned:false});},_onAction:function(event,oa){var pa=oa.item,qa=pa.getValue();setTimeout(function(){if(qa===fa.remove){this.props.onRemove(event);}else if(qa===fa.edit){this.props.onEdit(event);}else if(qa===fa.hide)this._onHideAsSpam(event);}.bind(this),0);},_createRemoveReportMenuData:function(){return [{value:fa.remove,label:"Delete Comment..."},{value:fa.hide,label:"Hide Comment"}];},_createEditDeleteMenuData:function(){return [{value:fa.edit,label:"Edit..."},{value:fa.remove,label:"Delete..."}];},_renderCloseButton:function(){var oa=this.props.comment,pa=this.props.feedback,qa=null,ra=null,sa=null,ta=false;if(oa.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor){if(oa.canedit){sa="Edit or Delete";ra=this._createEditDeleteMenuData();ta=true;}else{sa="Remove";qa=this.props.onRemove;}}else if(pa.canremoveall)if(this.props.showRemoveReportMenu){sa="Remove or Report";ra=this._createRemoveReportMenuData();}else{sa="Remove";qa=this.props.onRemove;}}else if(oa.canreport){sa="Hide";qa=this._onHideAsSpam;}var ua=(("UFICommentCloseButton")+(qa===null&&ra===null?' '+"hdn":'')),va=null,wa=null;if(this.props.contextArgs.viewas){va="/ajax/profile/link_disabled_in_viewas.php";wa="dialog";qa=null;}var xa=ta?s.MenuType.EDIT:s.MenuType.CLOSE;return (l.createDescriptor(s,{ajaxify:va,className:ua,onClick:qa,rel:wa,tooltip:sa,menuData:ra,menuType:xa,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (l.createDescriptor(z,{className:"UFICommentCloseButtonFake",tabIndex:"-1"}));},componentDidMount:function(){if(this.state.isHighlighting){var oa=this.getDOMNode();h.loadModules(["UFIScrollHighlight"],function(pa){setTimeout(pa.actOn.bind(null,oa),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(oa,pa){var qa=this.props,ra=this.state;return (oa.comment!==qa.comment||oa.showReplyLink!==qa.showReplyLink||oa.showReplies!==qa.showReplies||oa.isFirst!==qa.isFirst||oa.isLast!==qa.isLast||oa.isFirstCommentComponent!==qa.isFirstCommentComponent||oa.isLastCommentComponent!==qa.isLastCommentComponent||oa.isFirstComponent!==qa.isFirstComponent||oa.isLastComponent!==qa.isLastComponent||oa.isFeatured!==qa.isFeatured||oa.hasPartialBorder!==qa.hasPartialBorder||pa.wasHighlighted!==ra.wasHighlighted||pa.isHighlighting!==ra.isHighlighting||pa.markedAsSpamHere!==ra.markedAsSpamHere||pa.isInlinePageDeleted!==ra.isInlinePageDeleted||pa.isInlineBanned!==ra.isInlineBanned);},render:function(){var oa=this.props.comment,pa=this.props.feedback,qa=oa.status===ea.DELETED,ra=oa.status===ea.LIVE_DELETED,sa=oa.status===ea.SPAM_DISPLAY,ta=this.state.markedAsSpamHere,ua=this.state.isInlinePageDeleted,va=this.props.hideAsSpamForPageAdmin,wa=this.state.isInlineBanned,xa=ma(oa),ya=!oa.status&&(oa.isunseen||oa.islocal);if(!oa.status&&pa.lastseentime){var za=oa.originalTimestamp||oa.timestamp.time;ya=ya||za>pa.lastseentime;}var ab=this.props.contextArgs.markedcomments;if(ab&&ab[oa.legacyid])ya=true;var bb=((this.props.isFirst?"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));if(xa)if(ka){var cb,db=null,eb=null,fb=null;if(va){eb=wa?this._onUndoInlineBan:this._onInlineBan;if(ua){cb="You've deleted this comment so no one can see it.";}else if(ta){cb="Now this is only visible to the person who wrote it and their friends.";fb=this._onDeleteSpam;db=this._onMarkAsNotSpam;}}else if(ta){cb="This comment has been hidden.";fb=this._onDeleteSpam;db=this._onMarkAsNotSpam;}if(cb)return (l.createDescriptor(l.DOM.li,{className:ba(p.ROW,bb,"UFIHide")},l.createDescriptor(ka,{notice:cb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:db,onBanAction:eb,onDeleteAction:fb,isInlineBanned:wa,hideAsSpamForPageAdmin:va,pageID:this.props.feedback.ownerid})));}else h.loadModules(["UFICommentRemovalControls.react"],function(jb){ka=jb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this));var gb=!qa,hb=ba(p.ROW,bb,(("UFIComment")+(la(oa)?' '+"UFICommentFailed":'')+(qa||ra||sa?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!gb?' '+"noDisplay":'')+(gb?' '+"display":'')+(' '+"UFIComponent")+(this.props.isFeatured&&!this.props.contextArgs.showverified?' '+"UFIFeaturedComment":'')+(this.props.hasPartialBorder?' '+"UFIPartialBorder":''))),ib=this.renderComment();if(ya)hb=ba(hb,p.UNSEEN_ITEM);return (l.createDescriptor(l.DOM.li,{className:hb,'data-ft':this.props['data-ft']},ib));},renderComment:function(){var oa=this.props,pa=oa.comment,qa=oa.permalink,ra=oa.feedback,sa=oa.authorProfiles[pa.author],ta=pa.status===ea.SPAM_DISPLAY,ua=pa.status===ea.LIVE_DELETED,va=!(ta||ua),wa=ra.canremoveall||pa.hiddenbyviewer,xa=null,ya=null;if(!oa.isLocallyComposed&&!this.state.wasHighlighted&&!pa.fromfetch){ya=u.commentTruncationLength;xa=u.commentTruncationMaxLines;}var za=m.getTrackingInfo(m.types.SMALL_ACTOR_PHOTO),ab=m.getTrackingInfo(m.types.USER_NAME),bb=m.getTrackingInfo(m.types.USER_MESSAGE),cb=null,db=null;if(pa.istranslatable&&(pa.translatedtext===undefined))cb=l.createDescriptor(l.DOM.a,{href:"#",role:"button",title:"Translate this comment",className:ga,onClick:oa.onCommentTranslate},"See Translation");if(pa.translatedtext){var eb=new y('http://bing.com/translator').addQueryData({text:pa.body.text});db=l.createDescriptor(l.DOM.span,{className:ha},pa.translatedtext,l.createDescriptor(l.DOM.span,{className:ia},' ',"(",l.createDescriptor(l.DOM.a,{href:eb.toString(),target:"_blank",className:ja},"Translated by Bing"),")"));}var fb=x.isDirectionLTR(pa.body.text),gb=!fb,hb=fb&&k.isRTL()?'ltr':gb&&!k.isRTL()?'rtl':null,ib=function(qb,rb){return j(qb,rb,'_blank',ra.grouporeventid,'ufi',u.commentURLTruncationLength);},jb=l.createDescriptor(n,{key:"comment-body",className:(("UFICommentBody")+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":'')),interpolator:ib,ranges:pa.body.ranges,text:pa.body.text,truncationPercent:u.commentTruncationPercent,maxLength:ya,maxLines:xa,renderEmoticons:t.renderEmoticons,renderEmoji:t.renderEmoji,'data-ft':bb,dir:hb});if(pa.socialcontext){jb=l.createDescriptor(l.DOM.div,{key:"body"},jb);}else{var kb=((fb&&k.isRTL()?"_5wjy":'')+(fb&&k.isRTL()?' '+"_5wjz":'')+(gb&&!k.isRTL()?' '+"_5wj-":'')+(gb&&!k.isRTL()?' '+"_5wj_":''));jb=kb?l.createDescriptor(l.DOM.div,{key:"body",className:kb},jb):[' ',jb];}var lb=oa.contextArgs.viewas?null:i.constructEndpointWithLocation(sa,'ufi').toString(),mb=l.createDescriptor(o,{author:sa,showHovercard:!!lb,key:"author",focusOnMount:oa.focusOnMount,'data-ft':ab},oa.isFeatured&&oa.contextArgs.showverified?l.createDescriptor(g,{key:"badge",size:"xsmall",type:"verified"}):null,pa.socialcontext?l.createDescriptor(w,{topMutualFriend:oa.authorProfiles[pa.socialcontext.topmutualid],otherMutualCount:pa.socialcontext.othermutualcount,commentAuthor:sa}):null),nb=null;if(pa.photo_comment_status)nb=l.createDescriptor(l.DOM.div,{className:"_50f8"},pa.photo_comment_status);var ob=null;if(pa.sticker_attachment_status)ob=l.createDescriptor(l.DOM.div,{className:"_50f8"},pa.sticker_attachment_status);var pb=null;if(pa.status!==ea.DELETED)pb=l.createDescriptor(r,{comment:oa.comment});return (l.createDescriptor(v,{spacing:"medium"},l.createDescriptor(l.DOM.a,{href:sa.uri,'data-hovercard':lb,'data-ft':za},l.createDescriptor(l.DOM.img,{src:sa.thumbSrc,className:p.ACTOR_IMAGE,alt:""})),l.createDescriptor(l.DOM.div,{className:"UFICommentContentBlock"},l.createDescriptor(l.DOM.div,{className:"UFICommentContent"},mb,jb,cb,db,pb),nb,ob,l.createDescriptor(q,{comment:pa,feedback:ra,onBlingBoxClick:oa.onBlingBoxClick,onAlsoRecommendToggle:oa.onAlsoRecommendToggle,onCommentLikeToggle:oa.onCommentLikeToggle,onCommentReply:oa.onCommentReply,onPreviewRemove:oa.onPreviewRemove,onRetrySubmit:oa.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam,permalink:qa,viewerCanMarkNotSpam:wa,shortenTimestamp:oa.shortenTimestamp,showPermalink:oa.showPermalink,showReplyLink:oa.showReplyLink,showReplies:oa.showReplies,contextArgs:oa.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:oa.hideAsSpamForPageAdmin}),va?this._renderCloseButton():null),va?this._renderFakeCloseButton():null));}});e.exports=na;},null);
__d("UFIContainer.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'UFIContainer',render:function(){var j=null;if(this.props.hasNub)j=g.createDescriptor(g.DOM.li,{className:"UFIArrow"},g.createDescriptor(g.DOM.i,null));var k=((!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (g.createDescriptor(g.DOM.ul,{className:k},j,this.props.children));}});e.exports=i;},null);
__d("UFILikeSentenceText.react",["ActorURI","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(p,q,r,s){if(s.count!=null){var t=j.LIKES,u={id:p.targetfbid,actorid:p.actorid},v=[],w;for(var x=0;x<q.length;x++)if(!q[x].count){w=q[x];var y=w.entity;v.push(y.id);}var z=new m('/ajax/like/tooltip.php').setQueryData({comment_fbid:p.targetfbid,comment_from:p.actorforpost,seen_user_fbids:v.length?v:true});z=g.create(z,p.actorforpost);return (k.createDescriptor(k.DOM.a,{rel:"dialog",ajaxify:i.constructDialogURI(t,u).toString(),href:i.constructPageURI(t,u).toString(),'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':z.toString(),role:"button"},r));}else return h(r,s,null,null,'ufi');}var o=k.createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:k.PropTypes.object.isRequired,feedback:k.PropTypes.object.isRequired,likeSentenceData:k.PropTypes.object.isRequired},render:function(){var p=this.props.feedback,q=this.props.likeSentenceData,r;r=n;r=r.bind(null,p,q.ranges);return (k.createDescriptor(l,{interpolator:r,ranges:q.ranges,aggregatedRanges:q.aggregatedranges,text:q.text}));}});e.exports=o;},null);
__d("UFILikeSentence.react",["Bootloader","LeftRight.react","ProfileBrowserLink","ProfileBrowserTypes","React","UFIClassNames","UFIImageBlock.react","UFILikeSentenceText.react","URI","cx","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=k.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:k.PropTypes.object.isRequired,feedback:k.PropTypes.object.isRequired,isFirstComponent:k.PropTypes.bool,isLastComponent:k.PropTypes.bool,onOrderingModeChange:k.PropTypes.func,onTargetLikeToggle:k.PropTypes.func,orderingMode:k.PropTypes.string,showOrderingModeSelector:k.PropTypes.bool},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(t){this._bootloadSelectorModule(t);},_bootloadSelectorModule:function(t){if(t.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var u=function(v){this.setState({selectorModule:v});}.bind(this);if(t.contextArgs.entstream){g.loadModules(["UFIEntStreamOrderingModeSelector.react"],u);}else g.loadModules(["UFIOrderingModeSelector.react"],u);this.setState({bootloadedSelectorModule:true});}},render:function(){var t=this.props.feedback,u=t.likesentences.current,v=this.props.contextArgs.entstream,w=q(l.ROW,t.likesentences.isunseen?l.UNSEEN_ITEM:'',(("UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),x=null,y=null;if(u.text)y=k.createDescriptor(k.DOM.div,{className:"UFILikeSentenceText"},k.createDescriptor(n,{contextArgs:this.props.contextArgs,feedback:t,likeSentenceData:u}));if(y&&!v){x=k.createDescriptor(k.DOM.i,{className:"UFILikeIcon"});if(t.viewercanlike&&!t.hasviewerliked)x=k.createDescriptor(k.DOM.a,{className:"UFILikeThumb",href:"#",tabIndex:"-1",title:"Like this",onClick:this.props.onTargetLikeToggle,role:"button",'aria-label':"Like this"},x);}var z=y,aa=null;if(t.seencount>0&&!v){var ba=j.GROUP_MESSAGE_VIEWERS,ca={id:t.targetfbid},da=i.constructDialogURI(ba,ca),ea=i.constructPageURI(ba,ca),fa=new o('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:t.entidentifier,displayed_count:t.seencount}),ga;if(t.seenbyall){ga="Seen by everyone";}else ga=t.seencount==1?"Seen by 1":r._("Seen by {count}",{count:t.seencount});aa=k.createDescriptor(k.DOM.a,{rel:"dialog",ajaxify:da.toString(),href:ea.toString(),'data-hover':"tooltip",'data-tooltip-alignh':"left",'data-tooltip-uri':fa.toString(),className:(("UFISeenCount")+(!!u.text?' '+"UFISeenCountRight":''))},k.createDescriptor(k.DOM.span,{className:"UFISeenCountIcon"}),ga);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var ha=this.state.selectorModule;aa=k.createDescriptor(ha,{currentOrderingMode:this.props.orderingMode,entstream:v,orderingmodes:t.orderingmodes,onOrderChanged:this.props.onOrderingModeChange});if(!z)z=k.createDescriptor(k.DOM.div,null);}var ia=null;if(x&&y){ia=k.createDescriptor(m,null,x,y,aa);}else if(z){ia=k.createDescriptor(h,{direction:h.DIRECTION.right},z,aa);}else ia=aa;return (k.createDescriptor(k.DOM.li,{className:w},ia));}});e.exports=s;},null);
__d("UFIPager.react",["LeftRight.react","React","UFIClassNames","UFIImageBlock.react","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=h.createClass({displayName:'UFIPager',propTypes:{contextArgs:h.PropTypes.object.isRequired,pagerLabel:h.PropTypes.string.isRequired,'data-ft':h.PropTypes.string,countSentence:h.PropTypes.string,isFirstCommentComponent:h.PropTypes.bool,isFirstComponent:h.PropTypes.bool,isLastCommentComponent:h.PropTypes.bool,isLastComponent:h.PropTypes.bool,isLoading:h.PropTypes.bool,isUnseen:h.PropTypes.bool,onPagerClick:h.PropTypes.func},onPagerClick:function(o){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();o.nativeEvent.prevent();},render:function(){var o=this.onPagerClick,p=m(i.ROW,this.props.isUnseen?i.UNSEEN_ITEM:'',(("UFIPagerRow")+(' '+"UFIComponent")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),q=null;if(this.props.isLoading)q=h.createDescriptor(k,{className:"mls",background:"light",size:"small"});var r=h.createDescriptor(h.DOM.a,{className:"UFIPagerLink",onClick:o,href:"#",role:"button"},this.props.pagerLabel,q),s=(("fcg")+(' '+"UFIPagerCount")),t=h.createDescriptor(h.DOM.span,{className:s},this.props.countSentence),u;if(this.props.contextArgs.entstream){u=(h.createDescriptor(g,{direction:g.DIRECTION.right},r,t));}else u=(h.createDescriptor(j,null,h.createDescriptor(h.DOM.a,{className:"UFIPagerIcon",onClick:o,href:"#",role:"button"}),r,t));return (h.createDescriptor(h.DOM.li,{className:p,'data-ft':this.props['data-ft']},u));}});e.exports=n;},null);
__d("UFIPagerLabel",["fbt","tx"],function(a,b,c,d,e,f,g,h){var i={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',getReplyLabel:function(j,k){switch(j){case i.VIEW_ONE:return "View 1 reply";case i.VIEW_ONE_MORE:return "View 1 more reply";case i.VIEW_ALL:return h._("View all {count} replies",{count:k.count});case i.VIEW_MORE_EXPLICIT:return h._("View {count} more replies",{count:k.count});case i.VIEW_MORE:return "View more replies";case i.VIEW_PREVIOUS:return "View previous replies";default:return null;}},getCommentLabel:function(j,k){switch(j){case i.VIEW_ONE:return "View 1 comment";case i.VIEW_ONE_MORE:return "View 1 more comment";case i.VIEW_ALL:return h._("View all {count} comments",{count:k.count});case i.VIEW_MORE_EXPLICIT:return h._("View {count} more comments",{count:k.count});case i.VIEW_MORE:return "View more comments";case i.VIEW_PREVIOUS:return "View previous comments";default:return null;}},getQuestionLabel:function(j,k){switch(j){case i.VIEW_ONE:return "View 1 question";case i.VIEW_ONE_MORE:return "View 1 more question";case i.VIEW_ALL:return g._("View all {count} questions",[g.param("count",k.count)]);case i.VIEW_MORE_EXPLICIT:return g._("View {count} more questions",[g.param("count",k.count)]);case i.VIEW_MORE:return "View more questions";case i.VIEW_PREVIOUS:return "View previous questions";default:return null;}},getLabel:function(j,k,l,m){if(k){return i.getReplyLabel(j,m);}else if(l){return i.getQuestionLabel(j,m);}else return i.getCommentLabel(j,m);}};e.exports=i;},null);
__d("UFIReplySocialSentence.react",["Badge.react","LiveTimer","React","Timestamp.react","UFIClassNames","UFIConstants","UFIImageBlock.react","cx","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=' \u00b7 ',r=43200,s=i.createClass({displayName:'UFIReplySocialSentence',propTypes:{authors:i.PropTypes.object.isRequired,'data-ft':i.PropTypes.string,isExpanded:i.PropTypes.bool,isFirstComponent:i.PropTypes.bool,isLastComponent:i.PropTypes.bool,isLoading:i.PropTypes.bool,onClick:i.PropTypes.func,orderingMode:i.PropTypes.string,replies:i.PropTypes.number,shortenTimestamp:i.PropTypes.bool,showVerified:i.PropTypes.bool,timestamp:i.PropTypes.object},render:function(){var t=((this.props.isLoading?"UFIReplySocialSentenceLoading":'')),u=o(k.ROW,(("UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),v,w;if(this.props.isExpanded){v=this.props.replies>1?p._("Hide {count} Replies",{count:this.props.replies}):"Hide 1 Reply";}else{v=this.props.replies>1?p._("{count} Replies",{count:this.props.replies}):"1 Reply";if(this.props.timestamp){var x=h.getApproximateServerTime()/1000-this.props.timestamp.time;if(x<r||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)w=i.createDescriptor(i.DOM.span,{className:"fcg"},q,i.createDescriptor(j,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var y=Object.keys(this.props.authors),z=y.length&&!this.props.isExpanded,aa=null,ba;if(z){var ca=this.props.authors[y[0]];aa=i.createDescriptor(i.DOM.img,{alt:"",src:ca.thumbSrc,className:k.ACTOR_IMAGE});var da=ca.name;if(this.props.showVerified)da=[ca.name,i.createDescriptor(g,{size:"xsmall",type:"verified"})];ba=[p._("{author} replied",{author:da}),q,v];}else ba=v;var ea=null,fa=false;if(!z||this.props.contextArgs.feedcarded){if(z)fa=true;ea=i.createDescriptor(i.DOM.i,{className:((!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(fa?' '+"UFIFeedCardedIconWithActor":''))});}return (i.createDescriptor(i.DOM.li,{className:u,'data-ft':this.props['data-ft']},i.createDescriptor(i.DOM.a,{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},i.createDescriptor(m,null,i.createDescriptor(i.DOM.div,{className:((z?"UFIReplyActorPhotoWrapper":'')+(fa?' '+"UFIFeedCardedReplyActor":''))},ea,aa),i.createDescriptor(i.DOM.span,{className:t},i.createDescriptor(i.DOM.span,{className:(("UFIReplySocialSentenceLinkText")+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":''))},ba),w)))));}});e.exports=s;},null);
__d("UFIShareRow.react",["NumberFormat","React","UFIClassNames","UFIImageBlock.react","URI","cx","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:h.PropTypes.object.isRequired,shareCount:h.PropTypes.number.isRequired,targetID:h.PropTypes.any.isRequired,isFirstComponent:h.PropTypes.bool,isLastComponent:h.PropTypes.bool},render:function(){var p=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),q=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),r;if(this.props.shareCount>1){var s=g.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');r=n._("{count} shares",{count:s});}else r="1 share";var t=m(i.ROW,(("UFIShareRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')));return (h.createDescriptor(h.DOM.li,{className:t},h.createDescriptor(j,null,h.createDescriptor(h.DOM.a,{className:"UFIShareIcon",rel:"dialog",ajaxify:p.toString(),href:q.toString()}),h.createDescriptor(h.DOM.a,{className:"UFIShareLink",rel:"dialog",ajaxify:p.toString(),href:q.toString()},r))));}});e.exports=o;},null);
__d("UFISpamPlaceholder.react",["React","UFIClassNames","XUISpinner.react","fbt","tx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:g.PropTypes.number.isRequired,isLoading:g.PropTypes.bool,onClick:g.PropTypes.func},render:function(){if(this.props.isLoading)return (g.createDescriptor(g.DOM.li,{className:h.ROW},g.createDescriptor(g.DOM.span,{className:"UFISpamCommentWrapper"},g.createDescriptor(i,{className:"mls",background:"light",size:"small"}))));return (g.createDescriptor(g.DOM.li,{className:h.ROW},g.createDescriptor(g.DOM.a,{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,'aria-label':"Show comments marked as spam"},g.createDescriptor(g.DOM.span,{'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':k._("{count} hidden",{count:this.props.numHidden}),className:"UFISpamCommentWrapper"},g.createDescriptor(g.DOM.i,{className:"placeholderIcon"})))));}});e.exports=l;},null);
__d("UFI.react",["DOMScroll","Event","NumberFormat","React","LegacyScrollableArea.react","ScrollAwareDOM","TrackingNodes","UFIAddCommentController","UFIAddCommentLink.react","UFIComment.react","UFIConstants","UFIContainer.react","UFIInstanceState","UFILikeSentence.react","UFIPager.react","UFIPagerLabel","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholder.react","copyProperties","getUnboundedScrollPosition","isEmpty","throttle","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){"use strict";var ea={TOP:'top',BOTTOM:'bottom',ALL:'all'},fa=j.createClass({displayName:'UFI',getInitialState:function(){return {instanceShowRepliesMap:{},instanceShowReplySocialSentenceMap:{},loadingSpamIDs:{},isActiveLoading:{},commentIDToFocusOnMount:null,replyComposerIDToFocusOnMount:null,hasPagedToplevel:false};},componentDidMount:function(){this.suppressScrolls=0;this.scrollSubscription=l.subscribe('scroll',function(){if(this.suppressScrolls>0){this.suppressScrolls--;return false;}return true;}.bind(this));if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var ga=ca(this.loadMoreComments,20);this._scrollEventListener=h.listen(window,'scroll',ga);this._resizeEventListener=h.listen(window,'resize',ga);}},componentWillUnmount:function(){if(this.scrollSubscription){l.unsubscribe(this.scrollSubscription);this.scrollSubscription=null;}if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentWillReceiveProps:function(ga){var ha=z({},this.state.isActiveLoading),ia;for(ia in this.state.isActiveLoading){var ja=this.props.ranges[this.props.id],ka=ga.ranges[this.props.id];if(ja.getOffset()!=ka.getOffset()||ja.getLength()!=ka.getLength()){var la=(ka.getOffset()<ja.getOffset())?0:ja.getLength();if(la<ga.availableComments.length)this.setState({commentIDToFocusOnMount:ga.availableComments[la].id});}delete ha[ia];}this.setState({isActiveLoading:ha});},componentDidUpdate:function(ga,ha,ia){var ja=this.state.replyComposerIDToFocusOnMount;if(this.refs&&ja in this.refs){this.refs[ja].focus();this.setState({replyComposerIDToFocusOnMount:null});}},componentWillUpdate:function(ga,ha,ia){var ja,ka;for(ja in this.state.isActiveLoading){ka=this.state.isActiveLoading[ja];if(ka!==ea.TOP)this.suppressScrolls++;}},render:function(){var ga=this.props,ha=ga.feedback,ia=ga.contextArgs,ja=ga.source!=q.UFIFeedbackSourceType.ADS,ka=!ga.hideOrderingModeSelector&&ha.orderingmodes&&ga.commentCounts[ga.id]>=q.minCommentsForOrderingModeSelector,la=(!ba(ha.likesentences.current)||(ha.seencount>0&&!ia.entstream)||ka)&&ia.search!==true&&ja,ma=null;if(la)ma=j.createDescriptor(t,{contextArgs:ia,feedback:ha,onTargetLikeToggle:ga.onTargetLikeToggle,onOrderingModeChange:ga.onOrderingModeChange,orderingMode:ga.orderingMode,showOrderingModeSelector:ka});var na=ga.availableComments&&ga.availableComments.length&&ja,oa=null;if(na)oa=this.renderCommentMap(ga.availableComments,ga.ranges[ga.id].getOffset());var pa=null,qa=ha.cancomment,ra=qa&&ia.showaddcomment&&ha.actorforpost&&ga.canAddCommentMap[ga.id];if(ra){var sa=new n(null,ga.id,null,ia),ta=ga.authorProfiles[ha.actorforpost];pa=sa.renderAddComment(ta,ha.ownerid,ha.mentionsdatasource,ha.showsendonentertip,'toplevelcomposer',null,ha.subtitle,ha.allowphotoattachments,ha.allowstickerattachments,ha.isqanda);}var ua=null,va=ia.showshares&&ha.sharecount&&ja;if(va&&!ia.entstream)ua=j.createDescriptor(x,{targetID:ha.targetfbid,shareCount:ha.sharecount,contextArgs:ia});var wa=la||va||na||qa,xa=this.renderPagers();this.applyToUFIComponents([xa.topPager],oa,[xa.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});var ya=ha.isranked?pa:null,za=ha.isranked?null:pa,ab=null;if(ra&&ha.isranked&&this.state.hasPagedToplevel)ab=j.createDescriptor(o,{onClick:this.onComment,isQAndA:ha.isqanda});this.applyToUFIComponents([ma,ua,ya,xa.topPager],oa,[xa.bottomPager,za,ab],{isFirstComponent:true},{isLastComponent:true});var bb=[xa.topPager,oa,xa.bottomPager];if(ia.scrollcomments&&ia.scrollwidth)bb=j.createDescriptor(j.DOM.li,null,j.createDescriptor(k,{width:ia.scrollwidth},j.createDescriptor(j.DOM.ul,null,bb)));return (j.createDescriptor(r,{hasNub:ia.shownub&&wa},ma,ua,ya,bb,za,ab));},applyToUFIComponents:function(ga,ha,ia,ja,ka){var la=Object.keys(ha||{}).map(function(na){return ha[na];}).filter(function(na){return (na&&na.props.comment&&this._shouldRenderComment(na.props.comment));}.bind(this)),ma=[].concat(ga,la,ia);this._applyToFirstComponent(ma,ja);ma.reverse();this._applyToFirstComponent(ma,ka);},_shouldRenderComment:function(ga){return ga.status!==q.UFIStatus.DELETED;},_applyToFirstComponent:function(ga,ha){for(var ia=0;ia<(ga||[]).length;ia++)if(ga[ia]){z(ga[ia].props,ha);return;}},renderCommentMap:function(ga,ha){var ia=this.props,ja={},ka=ga.length;if(!ka)return ja;var la=ga[0].parentcommentid,ma=[],na=function(){if(ma.length>0){var va=function(wa,xa){this.state.loadingSpamIDs[wa[0]]=true;this.forceUpdate();ia.onSpamFetch(wa,xa);}.bind(this,ma,la);ja['spam'+ma[0]]=j.createDescriptor(y,{onClick:va,numHidden:ma.length,isLoading:!!this.state.loadingSpamIDs[ma[0]]});ma=[];}}.bind(this),oa=ia.instanceid,pa=s.getKeyForInstance(oa,'editcommentid'),qa=!!ga[0].parentcommentid;for(var ra=0;ra<ka;ra++)if(ga[ra].status==q.UFIStatus.SPAM){ma.push(ga[ra].id);}else{na();var sa=Math.max(ia.loggingOffset-ra-ha,0),ta=ga[ra],ua;if(ta.id==pa){ua=this.renderEditCommentBox(ta);}else{ua=this.renderComment(ta,sa);ua.props.isFirst=ra===0;ua.props.isLast=ra===ka-1;if(!qa)ua.props.showReplyLink=true;}ja['comment'+ta.id]=ua;if(ta.status!==q.UFIStatus.DELETED)ja['replies'+ta.id]=this.renderReplyContainer(ta);}na();return ja;},renderReplyContainer:function(ga){var ha=this.props,ia={};for(var ja=0;ja<(ga.replyauthors||[]).length;ja++){var ka=ha.authorProfiles[ga.replyauthors[ja]];if(ka)ia[ka.id]=ka;}var la=ha.repliesMap&&ha.repliesMap[ga.id]&&this._shouldShowCommentReplies(ga.id),ma,na=ha.commentCounts[ga.id],oa=Math.max(na-ga.spamreplycount,0);if(oa&&this._shouldShowReplySocialSentence(ga.id)){var pa=this._shouldShowCommentReplies(ga.id)&&(this.isLoadingPrev(ga.id)||this.isLoadingNext(ga.id));ma=j.createDescriptor(w,{contextArgs:ha.contextArgs,authors:ia,replies:oa,shortenTimestamp:ha.shortenTimestamp,timestamp:ga.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,ga),isLoading:pa,isExpanded:la,showVerified:this.props.contextArgs.showverified&&this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var qa,ra,sa,ta;if(la){var ua=this.renderPagers(ga.id);qa=ua.topPager;sa=ua.bottomPager;ra=this.renderCommentMap(ha.repliesMap[ga.id],ha.ranges[ga.id].getOffset());var va=Object.keys(ra);for(var wa=0;wa<va.length;wa++){var xa=ra[va[wa]];if(xa)xa.props.hasPartialBorder=wa!==0;}if(ga.cancomment&&ha.canAddCommentMap[ga.id]){var ya=false,za=Object.keys(ra);for(var ja=za.length-1;ja>=0;ja--){var ab=za[ja];if(ab&&ra[ab]){ya=ra[ab].props.isAuthorReply;break;}}ta=this.renderReplyComposer(ga,!ya);}}var bb;if(ma||qa||ra||sa||ta){this.applyToUFIComponents([ma,qa],ra,[sa,ta],{isFirstComponent:true},{isLastComponent:true});var cb=ga.status===q.UFIStatus.LIVE_DELETED;bb=j.createDescriptor(r,{isParentLiveDeleted:cb,isReplyList:true},ma,qa,ra,sa,ta);}return bb;},renderReplyComposer:function(ga,ha){var ia=this.props;return (new n(null,ia.id,ga.id,ia.contextArgs)).renderAddComment(ia.authorProfiles[ia.feedback.actorforpost],ia.feedback.ownerid,ia.feedback.mentionsdatasource,false,'replycomposer-'+ga.id,ha,null,ia.feedback.allowphotoattachments,ia.feedback.allowstickerattachments,ia.feedback.isqanda);},renderEditCommentBox:function(ga){var ha=new n(null,this.props.id,null,{mentionsinput:this.props.contextArgs.mentionsinput}),ia=ha.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],this.props.feedback.ownerid,ga.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,ga),this.props.onCancelEdit,this.props.feedback.allowphotoattachments,this.props.feedback.allowstickerattachments,this.props.feedback.isqanda);return ia;},_shouldShowCommentReplies:function(ga){if(ga in this.state.instanceShowRepliesMap){return this.state.instanceShowRepliesMap[ga];}else if(ga in this.props.showRepliesMap)return this.props.showRepliesMap[ga];return false;},_shouldShowReplySocialSentence:function(ga){if(ga in this.state.instanceShowReplySocialSentenceMap){return this.state.instanceShowReplySocialSentenceMap[ga];}else if(ga in this.props.showReplySocialSentenceMap)return this.props.showReplySocialSentenceMap[ga];return false;},renderComment:function(ga,ha){var ia=this.props,ja=ia.feedback,ka=ja.actorforpost===ga.author,la=s.getKeyForInstance(this.props.instanceid,'locallycomposed'),ma=ga.islocal||la&&la[ga.id],na=ja.showremovemenu||(ja.viewerid===ga.author),oa=ja.canremoveall&&ja.isownerpage&&!ka,pa=ia.source!=q.UFIFeedbackSourceType.INTERN,qa=m.getTrackingInfo(m.types.COMMENT,ha),ra=!!ga.parentcommentid,sa=this._shouldShowCommentReplies(ga.id),ta=!!ga.isfeatured;return (j.createDescriptor(p,{comment:ga,authorProfiles:this.props.authorProfiles,viewerIsAuthor:ka,feedback:ja,'data-ft':qa,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:oa,isLocallyComposed:ma,isReply:ra,isFeatured:ta,permalink:ia.commentPermalinks[ga.id],shortenTimestamp:ia.shortenTimestamp,showPermalink:pa,showRemoveReportMenu:na,showReplies:sa,focusOnMount:ga.id===this.state.commentIDToFocusOnMount,onAlsoRecommendToggle:ia.onAlsoRecommendToggle.bind(null,ga),onCommentLikeToggle:ia.onCommentLikeToggle.bind(null,ga),onCommentReply:this.onCommentReply.bind(this,ga),onCommentTranslate:ia.onCommentTranslate.bind(null,ga),onEdit:ia.onCommentEdit.bind(null,ga),onHideAsSpam:ia.onCommentHideAsSpam.bind(null,ga),onInlineBan:ia.onCommentInlineBan.bind(null,ga),onMarkAsNotSpam:ia.onCommentMarkAsNotSpam.bind(null,ga),onPreviewRemove:ia.onPreviewRemove.bind(null,ga),onRemove:ia.onCommentRemove.bind(null,ga),onRetrySubmit:ia.onRetrySubmit.bind(null,ga),onUndoInlineBan:ia.onCommentUndoInlineBan.bind(null,ga)}));},_updateRepliesState:function(ga,ha,ia){var ja=this.state.instanceShowRepliesMap;ja[ga]=ha;var ka=this.state.instanceShowReplySocialSentenceMap;ka[ga]=ia;this.setState({instanceShowRepliesMap:ja,instanceShowReplySocialSentenceMap:ka,replyComposerIDToFocusOnMount:ha?'replycomposer-'+ga:null});},onToggleReplies:function(ga){var ha=!this._shouldShowCommentReplies(ga.id),ia=this.props.commentCounts[ga.id],ja=this._shouldShowReplySocialSentence(ga.id)&&!(ha&&ia<=this.props.replySocialSentenceMaxReplies);this._updateRepliesState(ga.id,ha,ja);var ka=this.props.ranges[ga.id].getRequestedLength();ka-=this.props.deletedCounts[ga.id];if(ha&&ka===0){var la=this.props.commentCounts[ga.id],ma=Math.min(la,this.props.pageSize);this.onPage(ga.id,ea.BOTTOM,{offset:la-ma,length:ma});}},onPage:function(ga,ha,ia){var ja=this.state.hasPagedToplevel||ga===this.props.id,ka=z({},this.state.isActiveLoading);ka[ga]=ha;this.setState({isActiveLoading:ka,hasPagedToplevel:ja});this.props.onChangeRange(ga,ia);},isLoadingPrev:function(ga){var ha=this.props;ga=ga||ha.id;var ia=ha.ranges[ga].getRequestedOffset(),ja=ha.ranges[ga].getOffset();return ia<ja;},isLoadingNext:function(ga){var ha=this.props;ga=ga||ha.id;var ia=ha.ranges[ga].getRequestedOffset(),ja=ha.ranges[ga].getRequestedLength(),ka=ha.ranges[ga].getOffset(),la=ha.ranges[ga].getLength();return ia+ja>ka+la;},renderPagers:function(ga){var ha=this.props;ga=ga||ha.id;var ia=ha.ranges[ga].getOffset(),ja=ha.ranges[ga].getLength(),ka=ha.deletedCounts[ga],la=ha.commentCounts[ga],ma=la-ka,na=ja-ka,oa=ha.contextArgs.numberdelimiter||',',pa=ga!==ha.id,qa={topPager:null,bottomPager:null};if(ha.source==q.UFIFeedbackSourceType.ADS)return qa;var ra=this.isLoadingPrev(ga),sa=this.isLoadingNext(ga);if(ja==la)return qa;var ta=(ia+ja)==la;if((la<ha.pageSize&&ta)||na===0){var ua=Math.min(la,ha.pageSize),va=this.onPage.bind(this,ga,ha.feedback.isranked&&!pa?ea.BOTTOM:ea.TOP,{offset:la-ua,length:ua}),wa,xa;if(na===0){if(ma==1){wa=v.VIEW_ONE;}else{xa=i.formatIntegerWithDelimiter(ma,oa);wa=v.VIEW_ALL;}}else if(ma-na==1){wa=v.VIEW_ONE_MORE;}else{wa=v.VIEW_MORE_EXPLICIT;xa=i.formatIntegerWithDelimiter(ma-na,oa);}var ya=m.getTrackingInfo(m.types.VIEW_ALL_COMMENTS),za=ha.feedback.isranked&&!pa,ab=v.getLabel(wa,pa,ha.feedback.isqanda,{count:xa}),bb=j.createDescriptor(u,{key:"allPager",ref:za?"bottomPager":"topPager",contextArgs:ha.contextArgs,isUnseen:ha.feedback.hasunseencollapsed,isLoading:ra,pagerLabel:ab,onPagerClick:va,'data-ft':ya});if(za){qa.bottomPager=bb;}else qa.topPager=bb;return qa;}var cb=v.getLabel(v.VIEW_MORE,pa,ha.feedback.isqanda),db=v.getLabel(v.VIEW_PREVIOUS,pa,ha.feedback.isqanda);if(ia>0){var eb=Math.max(ia-ha.pageSize,0),ua=ia+ja-eb,fb=i.formatIntegerWithDelimiter(na,oa),gb=i.formatIntegerWithDelimiter(ma,oa),hb=da._("{countshown} of {totalcount}",{countshown:fb,totalcount:gb}),ib;if(ha.feedback.isranked&&!pa){ib=this.onPage.bind(this,ga,ea.BOTTOM,{offset:eb,length:ua});qa.bottomPager=j.createDescriptor(u,{key:"bottomPager",ref:"bottomPager",contextArgs:ha.contextArgs,isLoading:ra,pagerLabel:cb,onPagerClick:ib,countSentence:hb});}else{ib=this.onPage.bind(this,ga,ea.TOP,{offset:eb,length:ua});qa.topPager=j.createDescriptor(u,{key:"topPager",ref:"topPager",contextArgs:ha.contextArgs,isLoading:ra,pagerLabel:db,onPagerClick:ib,countSentence:hb});}}if(ia+ja<la){var jb=Math.min(ja+ha.pageSize,la-ia),kb;if(ha.feedback.isranked&&!pa){kb=this.onPage.bind(this,ga,ea.TOP,{offset:ia,length:jb});qa.topPager=j.createDescriptor(u,{key:"topPager",ref:"topPager",contextArgs:ha.contextArgs,isLoading:sa,pagerLabel:db,onPagerClick:kb});}else{kb=this.onPage.bind(this,ga,ea.BOTTOM,{offset:ia,length:jb});qa.bottomPager=j.createDescriptor(u,{key:"bottomPager",ref:"bottomPager",contextArgs:ha.contextArgs,isLoading:sa,pagerLabel:cb,onPagerClick:kb});}}return qa;},loadMoreComments:function(){if(this.scrollSubscription&&this.refs.bottomPager&&!(this.props.id in this.state.isActiveLoading)){var ga=this.refs.bottomPager.getDOMNode(),ha=aa(window).y,ia=ha+document.documentElement.clientHeight+q.infiniteScrollRangeForQANDAPermalinks;if(ga.offsetHeight&&ga.offsetTop<ia)this.refs.bottomPager.props.onPagerClick();}},onCommentReply:function(ga){var ha=ga.parentcommentid||ga.id;if(!this._shouldShowCommentReplies(ha)){this.onToggleReplies(ga);}else if(this.refs&&this.refs['replycomposer-'+ha])this.refs['replycomposer-'+ha].focus();},onComment:function(){if(this.refs&&this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();var ga=this.refs.toplevelcomposer.getDOMNode(),ha=60;if(ga.getBoundingClientRect().top<ha)g.scrollTo(ga,true,true);}}});e.exports=fa;},null);
__d("UFIFeaturedReplyCommentList",["UFIReplyCommentList"],function(a,b,c,d,e,f,g){"use strict";for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;j.getCommentList=function(k,l){};function j(k,l,m,n){g.call(this,k,l);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){var s=q[r];this.addComment(s.id,s.clientid,s.legacyid);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};e.exports=j;},null);
__d("UFIFeaturedToplevelCommentList",["UFIConstants","UFIToplevelCommentList"],function(a,b,c,d,e,f,g,h){"use strict";for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;k.getCommentList=function(l,m){};k.getCommentListsForFeedbackTargetID=function(l){};k.getCommentListForFeedbackTargetID_UNSAFE=function(l){};k.resetCommentListsForFeedbackTargetID=function(l){};function k(l,m,n){h.call(this,l,g.UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){var s=q[r];this.addComment(s.id,s.clientid,s.legacyid);}.bind(this));}k.prototype.fetchComments=function(l,m,n){};e.exports=k;},null);
__d("UFIRange",[],function(a,b,c,d,e,f){"use strict";function g(h,i){this.offset=h||0;this.length=i||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}g.prototype.getOffset=function(){return this.offset;};g.prototype.getLength=function(){return this.length;};g.prototype.updateRange=function(h,i){this.offset=h;this.length=i;if(this.requestedLength>0){var j=Math.min(this.offset,this.requestedOffset),k=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=j;this.requestedLength=k-j;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};g.prototype.getRequestedOffset=function(){return this.requestedOffset;};g.prototype.getRequestedLength=function(){return this.requestedLength;};g.prototype.updateRequestedRange=function(h,i){this.requestedOffset=h;this.requestedLength=i;};e.exports=g;},null);
__d("onEnclosingPageletDestroy",["Arbiter","DOMQuery"],function(a,b,c,d,e,f,g,h){function i(j,k){var l=g.subscribe('pagelet/destroy',function(m,n){if(h.contains(n.root,j)){l.unsubscribe();k();}});return l;}e.exports=i;},null);
__d("UFIController",["Arbiter","Bootloader","CSS","DOM","LayerRemoveOnHide","LiveTimer","Parent","React","ReactMount","ShortProfiles","UFI.react","UFIActionLinkController","UFICentralUpdates","UFIFeaturedReplyCommentList","UFIFeaturedToplevelCommentList","UFICommentTemplates","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFIRange","UFIReplyCommentList","UFIToplevelCommentList","UFIUserActions","URI","isEmpty","onEnclosingPageletDestroy","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){"use strict";var ha=function(la,ma,na,oa,pa){var qa=la+ma===na;return {offset:la,length:(qa&&ia(pa))?oa-la:ma};},ia=function(la){return la==w.UFIPayloadSourceType.USER_ACTION||la==w.UFIPayloadSourceType.LIVE_SEND;},ja=function(la,ma){for(var na=0;na<ma.length;na++){var oa=ma[na];if(oa.author)la.push(oa.author);if(oa.socialcontext)la.push(oa.socialcontext.topmutualid);if(oa.replyauthors&&oa.replyauthors.length)for(var pa=0;pa<oa.replyauthors.length;pa++)la.push(oa.replyauthors[pa]);}};function ka(la,ma,na){this.root=la;this.id=ma.ftentidentifier;this.source=ma.source;this.$UFIController0=ma.instanceid;this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController1=ma;this.$UFIController1.rootid=this.root.id;this.$UFIController2=false;var oa=na.feedbacktargets[0];this.actionLink=new r(la,this.$UFIController1,oa);this.orderingMode=oa.defaultcommentorderingmode;var pa=null;if(na.featuredcommentlists&&na.featuredcommentlists.comments&&na.featuredcommentlists.comments[this.id]){pa=na.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new u(this.id,pa.values,na.comments);}else pa=na.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.showRepliesMap={};this.showReplySocialSentenceMap={};this.shortenTimestamp=ma.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();var qa=oa.orderingmodes||[{value:this.orderingMode}];qa.forEach(function(ua){this.ranges[ua.value]=new z(pa.range.offset,pa.range.length);}.bind(this));var ra,sa,ta;if(na.commentlists.replies)for(ra=0;ra<pa.values.length;ra++){sa=pa.values[ra];ta=na.commentlists.replies[sa];if(ta){this.commentcounts[sa]=this.getReplyCommentList(sa).getCommentCount();this.getReplyRange(sa).updateRange(ta.range.offset,ta.range.length);}}if(na.featuredcommentlists)if(na.featuredcommentlists.replies)for(ra=0;ra<pa.values.length;ra++){sa=pa.values[ra];ta=na.featuredcommentlists.replies[sa];if(ta){this.featuredReplyCommentLists[sa]=new t(this.id,sa,ta.values,na.comments);this.commentcounts[sa]=this.getReplyCommentList(sa).getCommentCount();this.getReplyRange(sa).updateRange(ta.range.offset,ta.range.length);}}this.$UFIController3=null;this.$UFIController4=null;this.ufiCentralUpdatesSubscriptions=[s.subscribe('feedback-updated',function(ua,va){var wa=va.updates,xa=va.payloadSource;if(xa!=w.UFIPayloadSourceType.COLLAPSED_UFI&&this.id in wa)this.fetchAndUpdate(this.render.bind(this),xa);}.bind(this)),s.subscribe('feedback-id-changed',function(ua,va){var wa=va.updates;if(this.id in wa)this.id=wa[this.id];}.bind(this)),s.subscribe('instance-updated',function(ua,va){var wa=va.updates;if(this.$UFIController0 in wa){var xa=wa[this.$UFIController0];if(xa.editcommentid)this.render(va.payloadSource);}}.bind(this))];this.clearPageletSubscription=fa(this.root,this.$UFIController6.bind(this));this.clearPageSubscription=g.subscribe('ufi/page_cleared',this.$UFIController7.bind(this));s.handleUpdate(w.UFIPayloadSourceType.INITIAL_SERVER,na);if(this.$UFIController1.viewas)this.viewasUFICleanSubscription=g.subscribe('pre_page_transition',function(ua,va){if(this.$UFIController1.viewas!==da(va.to).getQueryData('viewas'))ba.resetCommentListsForFeedbackTargetID(this.id);}.bind(this));h.loadModules(["ScrollAwareDOM"],function(ua){o.scrollMonitor=ua.monitor;});if(ma.notifyonload)g.inform('inlineStory/ufiLoaded');g.inform('notifStory/ufiLoaded');}ka.prototype.$UFIController8=function(){if(!this.$UFIController9)this.$UFIController9=m.byTag(this.root,'form');return this.$UFIController9;};ka.prototype.$UFIControllera=function(event){var la=!this.feedback.hasviewerliked;ca.changeLike(this.id,la,{source:this.source,target:event.target,rootid:this.$UFIController1.rootid});event.preventDefault();};ka.prototype.$UFIControllerb=function(la,event){var ma=!la.hasviewerliked;ca.changeCommentLike(la.id,ma,{source:this.source,target:event.target});};ka.prototype.$UFIControllerc=function(la,event){ca.changeAlsoRecommend(la,!la.hasviewerrecommended);};ka.prototype.$UFIControllerd=function(la){y.updateState(this.$UFIController0,'isediting',true);y.updateState(this.$UFIController0,'editcommentid',la.id);};ka.prototype.$UFIControllere=function(la,ma,event){if(!ma.visibleValue&&!ma.attachedPhoto&&!ma.attachedSticker){this.$UFIControllerf(la,event);}else ca.editComment(la.id,ma.visibleValue,ma.encodedValue,{source:this.$UFIController1.source,target:event.target,attachedPhoto:ma.attachedPhoto,attachedSticker:ma.attachedSticker});y.updateStateField(this.$UFIController0,'locallycomposed',la.id,true);this.$UFIControllerg();};ka.prototype.$UFIControllerg=function(){y.updateState(this.$UFIController0,'isediting',false);y.updateState(this.$UFIController0,'editcommentid',null);};ka.prototype.$UFIControllerf=function(la,event){this.$UFIControllerh(la,false,event);};ka.prototype.$UFIControllerh=function(la,ma,event){var na=v[':fb:ufi:hide-dialog-template'].build();j.setContent(na.getNode('body'),"Are you sure you want to delete this comment?");j.setContent(na.getNode('title'),"Delete Comment");h.loadModules(["DialogX"],function(oa){var pa=new oa({modal:true,width:465,addedBehaviors:[k]},na.getRoot());pa.subscribe('confirm',function(){ca.removeComment(la.id,{source:this.source,oneclick:ma,target:event.target,timelinelogdata:this.$UFIController1.timelinelogdata});pa.hide();}.bind(this));pa.show();}.bind(this));};ka.prototype.$UFIControlleri=function(la,event){ca.setHideAsSpam(la.id,true,{source:this.source,target:event.target});};ka.prototype.$UFIControllerj=function(la,event){ca.setHideAsSpam(la.id,false,{source:this.source,target:event.target});};ka.prototype.$UFIControllerk=function(la,event){ca.translateComment(la,{source:this.source,target:event.target});};ka.prototype.$UFIControllerl=function(la,ma,event){ca.banUser(la,this.feedback.ownerid,ma,{source:this.source,target:event.target});};ka.prototype.$UFIControllerm=function(la,event){this.$UFIControllerl(la,true,event);};ka.prototype.$UFIControllern=function(la,event){this.$UFIControllerl(la,false,event);};ka.prototype.$UFIControllero=function(la,ma){ca.fetchSpamComments(this.id,la,ma,this.$UFIController1.viewas);};ka.prototype.$UFIControllerp=function(la,event){ca.removePreview(la,{source:this.source,target:event.target});};ka.prototype.$UFIControllerq=function(la){h.loadModules(["UFIRetryActions"],function(ma){ma.retrySubmit(la,{source:this.source});}.bind(this));};ka.prototype.$UFIControllerr=function(){if(this.$UFIController2)return;var la=m.byTag(this.root,'form');if(la){i.removeClass(la,'collapsed_comments');this.$UFIController2=true;}};ka.prototype.setRange=function(la){this.getRange().updateRange(la.offset,la.length);};ka.prototype.setReplyRange=function(la,ma){this.getReplyRange(la).updateRange(ma.offset,ma.length);};ka.prototype.render=function(la){var ma=this.comments.length||!ea(this.feedback.likesentences.current);if(ma&&ia(la))this.$UFIControllerr();var na=this.getRange();if(this.$UFIController3===null)this.$UFIController3=na.getOffset()+na.getLength()-1;var oa=this.feedback.replysocialsentencemaxreplies||-1,pa={};pa[this.id]=this.getToplevelCommentList().getDeletedCount();var qa={},ra={};ra[this.id]=!this.featuredToplevelCommentList;this.comments.forEach(function(wa){var xa=wa.id;pa[xa]=this.getReplyCommentList(xa).getDeletedCount();qa[xa]=this.getToplevelCommentList().getPermalinkForComment(xa);ra[xa]=!this.featuredReplyCommentLists[xa];if(this.repliesMap[xa])this.repliesMap[xa].forEach(function(ya){var za=ya.id;qa[za]=aa.getCommentList(this.id,xa).getPermalinkForComment(za);}.bind(this));}.bind(this));var sa={};sa[this.id]=na;for(var ta in this.replyRanges)sa[ta]=this.replyRanges[ta];var ua=!!this.featuredToplevelCommentList,va=n.createDescriptor(q,{feedback:this.feedback,id:this.id,onTargetLikeToggle:this.$UFIControllera.bind(this),onAlsoRecommendToggle:this.$UFIControllerc.bind(this),onCommentLikeToggle:this.$UFIControllerb.bind(this),onCommentRemove:this.$UFIControllerf.bind(this),onCommentHideAsSpam:this.$UFIControlleri.bind(this),onCommentMarkAsNotSpam:this.$UFIControllerj.bind(this),onCommentEdit:this.$UFIControllerd.bind(this),onCommentTranslate:this.$UFIControllerk.bind(this),onCommentInlineBan:this.$UFIControllerm.bind(this),onCommentUndoInlineBan:this.$UFIControllern.bind(this),onEditAttempt:this.$UFIControllere.bind(this),onCancelEdit:this.$UFIControllerg.bind(this),onChangeRange:this.$UFIControllers.bind(this),onSpamFetch:this.$UFIControllero.bind(this),onPreviewRemove:this.$UFIControllerp.bind(this),onRetrySubmit:this.$UFIControllerq.bind(this),onOrderingModeChange:this.$UFIControllert.bind(this),contextArgs:this.$UFIController1,repliesMap:this.repliesMap,showRepliesMap:this.showRepliesMap,showReplySocialSentenceMap:this.showReplySocialSentenceMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:pa,availableComments:this.comments,source:this.source,ranges:sa,pageSize:w.defaultPageSize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController0,loggingOffset:this.$UFIController3,replySocialSentenceMaxReplies:oa,orderingMode:this.orderingMode,hideOrderingModeSelector:ua,commentPermalinks:qa,canAddCommentMap:ra});this.$UFIController4=n.renderComponent(va,this.root);l.updateTimeStamps();if(this.$UFIController8())g.inform('ufi/changed',{form:this.$UFIController8()});if(la!=w.UFIPayloadSourceType.INITIAL_SERVER&&la!=w.UFIPayloadSourceType.COLLAPSED_UFI)g.inform('reflow');};ka.prototype.deferredCallback=function(la,ma,na,oa){la.callbackCount++;if(la.callbackCount<la.expectedCallbackCount)return;p.getMulti(ma,function(pa){this.authorProfiles=pa;oa(na);if(na==w.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)g.inform('CommentUFI.Pager');}.bind(this));};ka.prototype.fetchAndUpdate=function(la,ma){x.getFeedbackTarget(this.id,function(na){this.feedback=na;var oa=this.getToplevelCommentList(this.orderingMode).getCommentCount(),pa=this.getRange(),qa=ha(pa.getRequestedOffset(),pa.getRequestedLength(),this.commentcounts[this.id],oa,ma),ra=[];if(this.feedback.actorforpost)ra.push(this.feedback.actorforpost);var sa={expectedCallbackCount:0,callbackCount:0},ta=qa.offset,ua=qa.length,va;if(this.$UFIController1.viewas)va=this.$UFIController1.viewas+'';this.getToplevelCommentList().getComments(ta,ua,va,function(wa,xa,ya){this.commentcounts[this.id]=xa;this.setRange(wa);this.comments=[];for(var za in ya)this.comments.push(ya[za]);ja(ra,this.comments);if(this.feedback.isthreaded&&this.comments.length){sa.expectedCallbackCount=this.comments.length;}else sa.expectedCallbackCount=1;for(var ab in ya){var bb=ya[ab],cb=bb.id;if(this.feedback.isthreaded){var db=this.getReplyCommentList(cb).getCommentCount(),eb;if(this.replyRanges[cb]){var fb=this.getReplyRange(cb);eb=ha(fb.getRequestedOffset(),fb.getRequestedLength(),this.commentcounts[cb],db,ma);}else eb={offset:0,length:Math.min(db,2)};var gb=eb.offset,hb=eb.length;this.getReplyCommentList(cb).getComments(gb,hb,null,function(ib,jb,kb,lb){this.commentcounts[ib]=kb;this.setReplyRange(ib,jb);this.repliesMap[ib]=[];for(var mb in lb)this.repliesMap[ib].push(lb[mb]);ja(ra,this.repliesMap[ib]);this.showRepliesMap[ib]=jb.length>0;if(this.showReplySocialSentenceMap[ib]===undefined&&this.commentcounts[ib]>0)this.showReplySocialSentenceMap[ib]=!this.showRepliesMap[ib];this.deferredCallback(sa,ra,ma,la);}.bind(this,cb,eb,db));}}if(!this.feedback.isthreaded||!this.comments.length)this.deferredCallback(sa,ra,ma,la);}.bind(this,qa,oa));}.bind(this));};ka.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return ba.getCommentList(this.id,this.orderingMode);};ka.prototype.getReplyCommentList=function(la){if(la in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[la];return aa.getCommentList(this.id,la);};ka.prototype.getRange=function(){if(!(this.orderingMode in this.ranges))this.ranges[this.orderingMode]=new z();return this.ranges[this.orderingMode];};ka.prototype.getReplyRange=function(la){if(!(la in this.replyRanges))this.replyRanges[la]=new z();return this.replyRanges[la];};ka.prototype.$UFIControllers=function(la,ma){if(la==this.id){this.getRange().updateRequestedRange(ma.offset,ma.length);}else this.replyRanges[la].updateRequestedRange(ma.offset,ma.length);this.fetchAndUpdate(this.render.bind(this),w.UFIPayloadSourceType.USER_ACTION);};ka.prototype.$UFIController6=function(){n.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(s.unsubscribe.bind(s));g.unsubscribe(this.clearPageSubscription);this.viewasUFICleanSubscription&&g.unsubscribe(this.viewasUFICleanSubscription);};ka.prototype.$UFIController7=function(){this.$UFIController6();g.unsubscribe(this.clearPageletSubscription);};ka.prototype.$UFIControllert=function(la){this.orderingMode=la;this.fetchAndUpdate(this.render.bind(this),w.UFIPayloadSourceType.USER_ACTION);};e.exports=ka;},null);
__d("BanzaiNectar",["Banzai"],function(a,b,c,d,e,f,g){function h(j){return {log:function(k,l,m){var n={e:l,a:m};g.post('nectar:'+k,n,j);}};}var i=h();i.create=h;e.exports=i;},null);
__d("concatMap",[],function(a,b,c,d,e,f){function g(h,i){var j=-1,k=i.length,l=[],m;while(++j<k){m=h(i[j],j,i);Array.isArray(m)?Array.prototype.push.apply(l,m):Array.prototype.push.call(l,m);}return l;}e.exports=g;},null);
__d("UnicodeCJK",[],function(a,b,c,d,e,f){"use strict";var g='a-zA-Z',h='\uFF21-\uFF3A\uFF41-\uFF5A',i=g+h,j='\u3040-\u309F',k='\u30A0-\u30FF',l='\u31F0-\u31FF',m='\uFF65-\uFF9F',n=k+l+m,o=j+n,p=[12352,12447],q=[12448,12543],r=q[0]-p[0],s='\u4E00-\u9FCF',t='\u3400-\u4DBF',u=s+t,v='\uAC00-\uD7AF',w=u+o+v,x=null,y=null,z=null,aa=null;function ba(ja){y=y||new RegExp('['+o+']');return y.test(ja);}function ca(ja){x=x||new RegExp('['+u+']');return x.test(ja);}function da(ja){z=z||new RegExp('['+w+']');return z.test(ja);}function ea(ja){var ka=ja.charCodeAt(0);return String.fromCharCode((ka<p[0]||ka>p[1])?ka:ka+r);}function fa(ja){if(!ba(ja))return ja;return ja.split('').map(ea).join('');}function ga(ja){aa=aa||new RegExp('^'+'['+o+']+'+'['+i+']'+'$');return aa.test(ja);}function ha(ja){if(ga(ja))return ja.substr(0,ja.length-1);return ja;}var ia={hasKana:ba,hasIdeograph:ca,hasIdeoOrSyll:da,hiraganaToKatakana:fa,isKanaWithTrailingLatin:ga,kanaRemoveTrailingLatin:ha};e.exports=ia;},null);
__d("UnicodeHangulKorean",[],function(a,b,c,d,e,f){"use strict";var g=/[\u3130-\u318F\uAC00-\uD7AF]/;function h(aa){return g.test(aa);}var i=[4352,4353,4522,4354,4524,4525,4355,4356,4357,4528,4529,4530,4531,4532,4533,4378,4358,4359,4360,4385,4361,4362,4363,4364,4365,4366,4367,4368,4369,4370,4449,4450,4451,4452,4453,4454,4455,4456,4457,4458,4459,4460,4461,4462,4463,4464,4465,4466,4467,4468,4469,4448,4372,4373,4551,4552,4556,4558,4563,4567,4569,4380,4573,4575,4381,4382,4384,4386,4387,4391,4393,4395,4396,4397,4398,4399,4402,4406,4416,4423,4428,4593,4594,4439,4440,4441,4484,4485,4488,4497,4498,4500,4510,4513],j=12593,k=i.length,l=j+k;function m(aa){return String.fromCharCode(i[aa-j]);}var n=4352,o=4449,p=4519,q=44032,r=19,s=21,t=28,u=(s*t),v=(r*u),w=q+v;function x(aa){var ba=aa-q,ca=ba%t;return String.fromCharCode(n+ba/u)+String.fromCharCode(o+(ba%u)/t)+((ca>0)?String.fromCharCode(p+ca):'');}function y(aa){if(!h(aa))return aa;var ba=[];for(var ca=0;ca<aa.length;ca++){var da=aa.charAt(ca),ea=da.charCodeAt(0);ba.push((j<=ea&&ea<l)?m(ea):(q<=ea&&ea<w)?x(ea):da);}return ba.join('');}var z={toConjoiningJamo:y};e.exports=z;},null);
__d("UnicodeMatch",["UnicodeHangulKorean","UnicodeCJK","invariant","createObjectFrom","mapObject","startsWith"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=['prefix_hangul_conjoining_jamo','prefix_kana_drop_trailing_latin','prefix_kana_hiragana_to_katakana'];function n(o){this.config=j(m,false);this.setConfigs(o||{});}n.prototype.setConfigs=function(o){k(o,function(p,q){return this.setConfig(q,p);}.bind(this),this);};n.prototype.setConfig=function(o,p){i(o in this.config);this.config[o]=p;};n.prototype.prefixMatchPrepare=function(o){if(o){if(this.config.prefix_hangul_conjoining_jamo)o=g.toConjoiningJamo(o);if(this.config.prefix_kana_drop_trailing_latin)o=h.kanaRemoveTrailingLatin(o);if(this.config.prefix_kana_hiragana_to_katakana)o=h.hiraganaToKatakana(o);}return o;};n.prototype.prefixMatch=function(o,p){o=this.prefixMatchPrepare(o);p=this.prefixMatchPrepare(p);return l(o,p);};e.exports=n;},null);
__d("LitestandEllipsis",["DOM","DOMDimensions","concatMap","createArrayFrom","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k){var l,m={add:function(p,q,r){r=r||p;g.scry(p,'br').forEach(g.remove);var s=h.getElementDimensions(r).height;if(s<=q)return p;var t,u='...',v=o(p),w=v.length-1,x=k(v[w]);while(w>=0&&s>q){t=Math.max(x.lastIndexOf(' '),x.lastIndexOf('\n'));if(t===-1)t=x.length-u.length-1;if(t<=0){n(v[w],'');w--;x=k(v[w]);}else{x=x.substr(0,t).trim()+u;n(v[w],x);}s=h.getElementDimensions(r).height-1;}}};function n(p,q){l=l||(p.textContent!=null?'textContent':'innerText');p[l]=q;}function o(p){if(g.isTextNode(p))return [p];return i(o,j(p.childNodes));}e.exports=m;},null);
__d("LitestandShareAttachment",["CSS","DOM","LitestandEllipsis","csx","cx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=16,n=22,o=5,p=3,q=2,r=5,s=5,t={init:function(w){var x,y,z,aa=u(w);l(function(){x=h.find(w,"._6m6");y=h.scry(w,"._6m7")[0];z=v(w,x,aa);},function(){if(!z){y&&g.hide(y);i.add(x,aa*n);}else if(y&&z){g.show(y);i.add(y,z*m);}});},getNumDescriptionLines:function(w){return v(w,h.find(w,"._6m6"),u(w));},getDescriptionLineHeight:function(){return m;}};function u(w){var x=g.hasClass(w,"_59ap"),y=h.scry(w,"^div._4rtc").length>0,z;if(y){z=q;}else if(x){z=p;}else z=o;return z;}function v(w,x,y){var z=h.find(w,"._6m3"),aa=h.scry(w,"._59tj")[0],ba=g.hasClass(w,"_59ap"),ca=Math.round(x.scrollHeight/n);if(ca>=y)return 0;var da=z.offsetHeight-r-x.offsetHeight-(aa?aa.offsetHeight:0)-(ba?0:s);return Math.floor(Math.max(da,0)/m);}e.exports=t;},null);
__d("LitestandClassicRHC",["Arbiter","BigPipe","CSS","cx","NavigationMessage","Run","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n="_268y";function o(q,r){var s=new m(),t=s.release.bind(s),u=[].slice.call(q.getElementsByClassName('pagelet')),v=u.length;u.forEach(function(w){s.addSubscriptions(r.subscribeOnce(w.id+'_displayed',function(){if(--v===0){g.inform('LitestandClassicRHC/loaded');i.removeClass(q,n);t();}}));});s.addSubscriptions(g.subscribe(k.NAVIGATION_BEGIN,t),r.subscribeOnce('pagelet_displayed_all',function(){g.inform('LitestandClassicRHC/loaded');i.removeClass(q,n);t();}));l.onLeave(t);}var p={init:function(q){var r=h.getCurrentInstance();if(r&&r.arbiter){o(q,r.arbiter);}else g.subscribeOnce('BigPipe/init',function(event,s){o(q,s.arbiter);},g.SUBSCRIBE_NEW);}};e.exports=p;},null);
__d("DataSource",["ArbiterMixin","AsyncRequest","TokenizeUtil","UnicodeMatch","copyProperties","createArrayFrom","createObjectFrom","emptyFunction","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=o(g);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this._maxResults=t.maxResults||10;this.token=t.token;this.queryData=t.queryData||{};this.queryEndpoint=t.queryEndpoint||'';this.bootstrapData=t.bootstrapData||{};this.bootstrapEndpoint=t.bootstrapEndpoint||'';this._indexedFields=t.indexedFields||['text','tokens'];this._titleFields=t.titleFields||[];this._alwaysPrefixMatch=t.alwaysPrefixMatch||false;this._deduplicationKey=t.deduplicationKey||null;this._enabledLocalCache=(t.enabledLocalCache!=null)?t.enabledLocalCache:true;this._enabledQueryCache=(t.enabledQueryCache!=null)?t.enabledQueryCache:true;this._enabledMergeUids=(t.enabledMergeUids!=null)?t.enabledMergeUids:false;this._queryExactMatch=t.queryExactMatch||false;this._acrossTransitions=t.acrossTransitions||false;this._minQueryLength=t.minQueryLength||-1;this._minExactMatchLength=4;this._filters=[];this.setExclusions(t.exclusions);this.backendUnicodeMatch=new j({prefix_kana_hiragana_to_katakana:!!t.kanaNormalization});this.cacheUnicodeMatch=new j({prefix_kana_hiragana_to_katakana:!!t.kanaNormalization});}s.prototype.init=function(){"use strict";this.init=n;this._fields=m(this._indexedFields);this._activeQueries=0;this.dirty();};s.prototype.dirty=function(){"use strict";this.value='';this._bootstrapped=false;this._bootstrapping=false;this._data={};this.localCache={};this.queryCache={};this.queryIDs={};this.inform('dirty',{});return this;};s.prototype.bootstrap=function(){"use strict";if(this._bootstrapped)return;this.bootstrapWithoutToken();this._bootstrapped=true;this._bootstrapping=true;this.inform('bootstrap',{bootstrapping:true});};s.prototype.bootstrapWithoutToken=function(){"use strict";this.fetch(this.bootstrapEndpoint,this.bootstrapData,{bootstrap:true,token:this.token});};s.prototype.bootstrapWithToken=function(){"use strict";var t=k({},this.bootstrapData);t.token=this.token;this.fetch(this.bootstrapEndpoint,t,{bootstrap:true,replaceCache:true});};s.prototype.query=function(t,u,v,w){"use strict";this.inform('beforeQuery',{value:t,local_only:u,exclusions:v,time_waited:w});if(!this._enabledQueryCache){this.queryCache={};this.queryIDs={};}var x=this.buildUids(t,[],v),y=this.respond(t,x);this.value=t;this.inform('query',{value:t,results:y});var z=this.tokenizeBackend(t).flatValue;if(u||!z||this._isQueryTooShort(z)||!this.queryEndpoint||this.getQueryCache().hasOwnProperty(z)||!this.shouldFetchMoreResults(y))return false;this.inform('queryEndpoint',{value:t});this.fetch(this.queryEndpoint,this.getQueryData(t,x),{value:t,exclusions:v});return true;};s.prototype._isQueryTooShort=function(t){"use strict";return (t.length<this._minQueryLength);};s.prototype._tokenize=function(t,u){"use strict";return i.parse(t,u);};s.prototype.tokenizeBackend=function(t,u){"use strict";t=this.backendUnicodeMatch.prefixMatchPrepare(t);return this._tokenize(t,u);};s.prototype.tokenizeCache=function(t,u){"use strict";t=this.cacheUnicodeMatch.prefixMatchPrepare(t);return this._tokenize(t,u);};s.prototype.shouldFetchMoreResults=function(t){"use strict";return t.length<this._maxResults;};s.prototype.getQueryData=function(t,u){"use strict";var v=k({value:t},this.queryData||{});u=u||[];if(u.length)v.existing_ids=u.join(',');if(this._bootstrapping)v.bsp=true;return v;};s.prototype.setQueryData=function(t,u){"use strict";if(u)this.queryData={};k(this.queryData,t);return this;};s.prototype.setBootstrapData=function(t,u){"use strict";if(u)this.bootstrapData={};k(this.bootstrapData,t);return this;};s.prototype.getExclusions=function(){"use strict";return l(this._exclusions);};s.prototype.setExclusions=function(t){"use strict";this._exclusions=t?t.map(String):[];};s.prototype.addFilter=function(t){"use strict";var u=this._filters;u.push(t);return {remove:function(){u.splice(u.indexOf(t),1);}};};s.prototype.clearFilters=function(){"use strict";this._filters=[];};s.prototype.notify=function(t,u,v,w){"use strict";var x=this.buildData(u);this.inform('notify',{value:t,results:x,isAsync:!!v,rootid:w});return x;};s.prototype.respond=function(t,u,v){"use strict";var w=this.buildData(u);this.inform('respond',{value:t,results:w,isAsync:!!v});return w;};s.prototype.respondWithResults=function(t,u,v){"use strict";this.inform('respond',{value:t,results:u,isAsync:!!v});return u;};s.prototype.fetch=function(t,u,v){"use strict";if(!t)return;if(u.request_id===undefined){u.request_id=Math.random().toString();v.request_id=u.request_id;}var w=new h().setURI(t).setData(u).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._acrossTransitions).setHandler(function(x){this.fetchHandler(x,v||{});}.bind(this));if(t===this.queryEndpoint)w.setFinallyHandler(function(){this._activeQueries--;if(!this._activeQueries)this.inform('activity',{activity:false});}.bind(this));w.setErrorHandler(this.asyncErrorHandler);this.inform('beforeFetch',{request:w,fetch_context:v});w.send();if(t===this.queryEndpoint){if(!this._activeQueries)this.inform('activity',{activity:true});this._activeQueries++;}};s.prototype.fetchHandler=function(t,u){"use strict";var v=u.value,w=u.exclusions;if(v){var x=this.getQueryIDs(),y=this.tokenizeBackend(v).flatValue;x[y]=u.request_id;}if(!v&&u.replaceCache)this.localCache={};this.inform('buildQueryCache',{});var z=t.getPayload().entries;this.addEntries(z,v);this.inform('fetchComplete',{entries:z,response:t,value:v,fetch_context:u});var aa=(!v&&this.value)?this.value:v;this.respond(aa,this.buildUids(aa,[],w),true);if(!v){if(this._bootstrapping){this._bootstrapping=false;this.inform('bootstrap',{bootstrapping:false});}if(u.token&&t.getPayload().token!==u.token)this.bootstrapWithToken();}};s.prototype.addEntries=function(t,u){"use strict";var v=this.processEntries(l(t||[]),u),w=v;if(this._enabledMergeUids)w=this.buildUids(u,v);if(u){var x=this.getQueryCache(),y=this.tokenizeBackend(u).flatValue;x[y]=w;}else this.fillCache(w);};s.prototype.processEntries=function(t,u){"use strict";return t.map(function(v,w){var x=(v.uid=v.uid+''),y=this.getEntry(x);if(!y){y=v;y.query=u;this.setEntry(x,y);}else k(y,v);y.index===undefined&&(y.index=w);return x;},this);};s.prototype.getAllEntries=function(){"use strict";return this._data||{};};s.prototype.getEntry=function(t){"use strict";return this._data[t]||null;};s.prototype.setEntry=function(t,u){"use strict";this._data[t]=u;};s.prototype.fillCache=function(t){"use strict";if(!this._enabledLocalCache)return;var u=this.localCache;t.forEach(function(v){var w=this.getEntry(v);if(!w)return;w.bootstrapped=true;var x=this.tokenizeCache(this.getTextToIndex(w)).tokens;for(var y=0,z=x.length;y<z;++y){var aa=x[y];if(!u.hasOwnProperty(aa))u[aa]={};u[aa][v]=true;}},this);};s.prototype.getTextToIndex=function(t){"use strict";if(t.textToIndex&&!t.needs_update)return t.textToIndex;t.needs_update=false;t.textToIndex=this.getTextToIndexFromFields(t,this._indexedFields);return t.textToIndex;};s.prototype.getTextToIndexFromFields=function(t,u){"use strict";var v=[];for(var w=0;w<u.length;++w){var x=t[u[w]];if(x)v.push(x.join?x.join(' '):x);}return v.join(' ');};s.prototype.mergeUids=function(t,u,v,w){"use strict";this.inform('mergeUids',{local_uids:t,query_uids:u,new_uids:v,value:w});var x=function(y,z){var aa=this.getEntry(y),ba=this.getEntry(z);if(aa.extended_match!==ba.extended_match)return aa.extended_match?1:-1;if(aa.index!==ba.index)return aa.index-ba.index;if(aa.text.length!==ba.text.length)return aa.text.length-ba.text.length;return aa.uid<ba.uid;}.bind(this);this._checkExtendedMatch(w,t);return this.deduplicateByKey(t.sort(x).concat(u,v));};s.prototype._checkExtendedMatch=function(t,u){"use strict";var v=this._alwaysPrefixMatch?i.isPrefixMatch:i.isQueryMatch;for(var w=0;w<u.length;++w){var x=this.getEntry(u[w]);x.extended_match=x.tokens?!v(t,x.text):false;}};s.prototype.buildUids=function(t,u,v){"use strict";if(!u)u=[];if(!t)return u;if(!v)v=[];var w=this.buildCacheResults(t,this.localCache),x=this.buildQueryResults(t),y=this.mergeUids(w,x,u,t),z=m(v.concat(this._exclusions)),aa=y.filter(function(ba){if(z.hasOwnProperty(ba)||!this.getEntry(ba))return false;for(var ca=0;ca<this._filters.length;++ca)if(!this._filters[ca](this.getEntry(ba),t))return false;return (z[ba]=true);},this);return this.uidsIncludingExact(t,aa);};s.prototype.uidsIncludingExact=function(t,u){"use strict";var v=u.length;if(t.length<this._minExactMatchLength||v<=this._maxResults)return u;for(var w=0;w<v;++w){var x=this.getEntry(u[w]);x.text_lower||(x.text_lower=x.text.toLowerCase());if(x.text_lower===this.tokenizeCache(t).flatValue){if(w>=this._maxResults){var y=u.splice(w,1)[0];u.splice(this._maxResults-1,0,y);}break;}}return u;};s.prototype.buildData=function(t){"use strict";var u=[],v=Math.min(t.length,this._maxResults);for(var w=0;w<v;++w)u.push(this.getEntry(t[w]));return u;};s.prototype.findBestPreviousQuery=function(t){"use strict";var u=0,v=null,w=this.getQueryCache();if(this._queryExactMatch)return w.hasOwnProperty(t)?t:null;for(var x in w)if(t.indexOf(x)===0&&x.length>u){u=x.length;v=x;}return v;};s.prototype.findQueryCache=function(t){"use strict";var u=this.findBestPreviousQuery(t);return this.getQueryCache()[u]||[];};s.prototype.buildQueryResults=function(t){"use strict";var u=this.tokenizeBackend(t).flatValue,v=this.findQueryCache(u);if(this.getQueryCache().hasOwnProperty(u))return v;var w=this.filterQueryResults(u,v);return w;};s.prototype.filterQueryResults=function(t,u){"use strict";var v=this._alwaysPrefixMatch?i.isPrefixMatch:i.isQueryMatch;return u.filter(function(w){return v(t,this.getTextToIndex(this.getEntry(w)));},this);};s.prototype.buildCacheResults=function(t,u){"use strict";var v=this.tokenizeCache(t,this._alwaysPrefixMatch),w=this._alwaysPrefixMatch?v.sortedTokens:v.tokens,x=w.length,y=v.isPrefixQuery?x-1:null,z={},aa={},ba={},ca=[],da=false,ea={},fa=0;for(var ga=0;ga<x;++ga){var ha=w[ga];if(!ea.hasOwnProperty(ha)){fa++;ea[ha]=true;}else continue;for(var ia in u)if((!z.hasOwnProperty(ia)&&ia===ha)||((this._alwaysPrefixMatch||y===ga)&&this.cacheUnicodeMatch.prefixMatch(ia,ha))){if(ia===ha){if(aa.hasOwnProperty(ia))da=true;z[ia]=true;}else{if(z.hasOwnProperty(ia)||aa.hasOwnProperty(ia))da=true;aa[ia]=true;}for(var ja in u[ia])if(ga===0||(ba.hasOwnProperty(ja)&&ba[ja]==fa-1))ba[ja]=fa;}}for(var ka in ba)if(ba[ka]==fa)ca.push(ka);if(da||fa<x)ca=this.filterQueryResults(t,ca);if(this._titleFields&&this._titleFields.length>0)ca=this.filterNonTitleMatchQueryResults(t,ca);return ca;};s.prototype.filterNonTitleMatchQueryResults=function(t,u){"use strict";return u.filter(function(v){var w=this.tokenizeCache(t),x=w.tokens.length;if(x===0)return true;var y=this.getTitleTerms(this.getEntry(v)),z=w.tokens[0];return ((x===1)||this._alwaysPrefixMatch)?(i.isPrefixMatch(z,y)||this.cacheUnicodeMatch.prefixMatch(y,z)):i.isQueryMatch(z,y);},this);};s.prototype.getTitleTerms=function(t){"use strict";if(!t.titleToIndex)t.titleToIndex=this.getTextToIndexFromFields(t,this._titleFields);return t.titleToIndex;};s.prototype.deduplicateByKey=function(t){"use strict";if(!this._deduplicationKey)return t;var u=m(t.map(this._getDeduplicationKey.bind(this)),t);return t.filter(function(v){return u[this._getDeduplicationKey(v)]==v;}.bind(this));};s.prototype._getDeduplicationKey=function(t){"use strict";var u=this.getEntry(t);if(u[this._deduplicationKey]){return u[this._deduplicationKey]+'';}else return '__'+t+'__';};s.prototype.getQueryCache=function(){"use strict";return this.queryCache;};s.prototype.getQueryIDs=function(){"use strict";return this.queryIDs;};s.prototype.setMaxResults=function(t){"use strict";this._maxResults=t;this.value&&this.respond(this.value,this.buildUids(this.value));};s.prototype.updateToken=function(t){"use strict";this.token=t;this.dirty();return this;};k(s.prototype,{events:['bootstrap','query','respond'],asyncErrorHandler:n});e.exports=s;},null);
__d("MultiBootstrapDataSource",["DataSource"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";this._bootstrapEndpoints=k.bootstrapEndpoints;g.call(this,k);}j.prototype.bootstrapWithoutToken=function(){"use strict";for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true});};e.exports=j;},null);
__d("XHPTemplate",["DataStore","DOM","HTML"],function(a,b,c,d,e,f,g,h,i){function j(l){"use strict";this._model=l;}j.prototype.render=function(){"use strict";if(i.isHTML(this._model))this._model=h.setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);};j.prototype.build=function(){"use strict";return new k(this.render());};j.getNode=function(l,m){"use strict";return j.getNodes(l)[m];};j.getNodes=function(l){"use strict";var m=g.get(l,'XHPTemplate:nodes');if(!m){m={};var n=h.scry(l,'[data-jsid]');n.push(l);var o=n.length;while(o--){var p=n[o];m[p.getAttribute('data-jsid')]=p;p.removeAttribute('data-jsid');}g.set(l,'XHPTemplate:nodes',m);}return m;};function k(l){"use strict";this._root=l;this._populateNodes();}k.prototype._populateNodes=function(){"use strict";this._nodes={};this._leaves={};var l=this._root.getElementsByTagName('*');for(var m=0,n=l.length;m<n;m++){var o=l[m],p=o.getAttribute('data-jsid');if(p){o.removeAttribute('data-jsid');this._nodes[p]=o;this._leaves[p]=!o.childNodes.length;}}};k.prototype.getRoot=function(){"use strict";return this._root;};k.prototype.getNode=function(l){"use strict";return this._nodes[l];};k.prototype.setNodeProperty=function(l,m,n){"use strict";this.getNode(l)[m]=n;return this;};k.prototype.setNodeContent=function(l,m){"use strict";if(!this._leaves[l])throw new Error("Can't setContent on non-leaf node: "+l);h.setContent(this.getNode(l),m);return this;};e.exports=j;},null);
__d("FbFeedHighlight",["JSXDOM","CSS","DOM","DOMScroll","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=1000,m=1000,n=null;function o(){return (g.div({className:"_1usz"},g.div({className:"_1us-"}),g.div({className:"_1us_"}),g.div({className:"_1ut0"}),g.div({className:"_1ut1"})));}var p={highlightAndScrollTo:function(q){p.highlight(q);p.scrollTo(q);},highlightSingle:function(q){var r=o();i.appendContent(q,r);setTimeout(function(){if(n)i.remove(n);n=r;h.addClass(q,"_1ut2");},0);setTimeout(function(){h.removeClass(q,"_1ut2");setTimeout(function(){i.remove(r);if(r==n)n=null;},l+m);},l+m);},highlight:function(q){var r=o();i.appendContent(q,r);setTimeout(h.addClass.bind(null,q,"_1ut2"),0);setTimeout(function(){h.removeClass(q,"_1ut2");setTimeout(i.remove.bind(null,r),l+l);},l+m);},scrollTo:function(q){setTimeout(j.scrollTo.bind(null,q),0);}};e.exports=p;},null);
__d("VideoAutoplayPlayButton",["CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i){var j={},k={getClicked:function(l){if(j.hasOwnProperty(l))return j[l].clicked;return false;},register:function(l,m,n){j[l]=h.listen(m,'click',function(){g.removeClass(m,"_5vos");g.show(n);j[l].clicked=true;});},unregister:function(l){if(j.hasOwnProperty(l))j[l].remove();}};e.exports=k;},null);